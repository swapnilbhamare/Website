webpackJsonp([5],{1130:function(e,s,n){var r=n(5),t=n(1467),o=["deepInsightsDashboard","layerStyleCollection"],i=function(e){r(e,o,this),this._getWidgets().each(function(e){this._bindWidgetChanges(e)},this),t.trackLegends(this._getLayers())};i.prototype._bindWidgetChanges=function(e){e.bind("change:hasInitialState",function(e){e.bind("change:autoStyle",this._onWidgetAutoStyleChanged,this),e.isAutoStyle()&&(e.layerModel.get("initialStyle")?this._onWidgetAutoStyleChanged(e):e.layerModel.once("change:initialStyle",function(){this._onWidgetAutoStyleChanged(e)},this))},this)},i.prototype._onWidgetAutoStyleChanged=function(e){var s,n=this._getWidgets().any(function(e){return e.isAutoStyle()},this),r=e.isAutoStyle(),o=e.layerModel.id;r?(t.updateLegends(o),s=this._layerStyleCollection.findById(o),e.layerModel&&(e.layerModel.attributes.initialStyle=s.get("cartocss"))):n||t.resetLegends(o)},i.prototype._getLayer=function(e){return this.visMap().getLayerById(e.id)},i.prototype._getLayers=function(e){return this.visMap().layers},i.prototype.visMap=function(){return this._vis().map},i.prototype._getWidgets=function(e){return this._deepInsightsDashboard._dashboard.widgets._widgetsCollection},i.prototype._vis=function(){return this._deepInsightsDashboard.getMap()},e.exports=i},1131:function(e,s,n){var r=n(1);e.exports=r.Collection.extend({model:function(e,s){var n={};return n.id=e.id,e.options.tile_style&&(n.cartocss=e.options.tile_style),new r.Model(n)},resetByLayersData:function(e){this.reset(e,{silent:!0})},findById:function(e){return this.findWhere({id:e})}})},134:function(e,s,n){function r(e){return n(t(e))}function t(e){var s=o[e];if(!(s+1))throw new Error("Cannot find module '"+e+"'.");return s}var o={"./af":142,"./af.js":142,"./ar":149,"./ar-dz":143,"./ar-dz.js":143,"./ar-kw":144,"./ar-kw.js":144,"./ar-ly":145,"./ar-ly.js":145,"./ar-ma":146,"./ar-ma.js":146,"./ar-sa":147,"./ar-sa.js":147,"./ar-tn":148,"./ar-tn.js":148,"./ar.js":149,"./az":150,"./az.js":150,"./be":151,"./be.js":151,"./bg":152,"./bg.js":152,"./bn":153,"./bn.js":153,"./bo":154,"./bo.js":154,"./br":155,"./br.js":155,"./bs":156,"./bs.js":156,"./ca":157,"./ca.js":157,"./cs":158,"./cs.js":158,"./cv":159,"./cv.js":159,"./cy":160,"./cy.js":160,"./da":161,"./da.js":161,"./de":164,"./de-at":162,"./de-at.js":162,"./de-ch":163,"./de-ch.js":163,"./de.js":164,"./dv":165,"./dv.js":165,"./el":166,"./el.js":166,"./en-au":167,"./en-au.js":167,"./en-ca":168,"./en-ca.js":168,"./en-gb":169,"./en-gb.js":169,"./en-ie":170,"./en-ie.js":170,"./en-nz":171,"./en-nz.js":171,"./eo":172,"./eo.js":172,"./es":174,"./es-do":173,"./es-do.js":173,"./es.js":174,"./et":175,"./et.js":175,"./eu":176,"./eu.js":176,"./fa":177,"./fa.js":177,"./fi":178,"./fi.js":178,"./fo":179,"./fo.js":179,"./fr":182,"./fr-ca":180,"./fr-ca.js":180,"./fr-ch":181,"./fr-ch.js":181,"./fr.js":182,"./fy":183,"./fy.js":183,"./gd":184,"./gd.js":184,"./gl":185,"./gl.js":185,"./gom-latn":186,"./gom-latn.js":186,"./he":187,"./he.js":187,"./hi":188,"./hi.js":188,"./hr":189,"./hr.js":189,"./hu":190,"./hu.js":190,"./hy-am":191,"./hy-am.js":191,"./id":192,"./id.js":192,"./is":193,"./is.js":193,"./it":194,"./it.js":194,"./ja":195,"./ja.js":195,"./jv":196,"./jv.js":196,"./ka":197,"./ka.js":197,"./kk":198,"./kk.js":198,"./km":199,"./km.js":199,"./kn":200,"./kn.js":200,"./ko":201,"./ko.js":201,"./ky":202,"./ky.js":202,"./lb":203,"./lb.js":203,"./lo":204,"./lo.js":204,"./lt":205,"./lt.js":205,"./lv":206,"./lv.js":206,"./me":207,"./me.js":207,"./mi":208,"./mi.js":208,"./mk":209,"./mk.js":209,"./ml":210,"./ml.js":210,"./mr":211,"./mr.js":211,"./ms":213,"./ms-my":212,"./ms-my.js":212,"./ms.js":213,"./my":214,"./my.js":214,"./nb":215,"./nb.js":215,"./ne":216,"./ne.js":216,"./nl":218,"./nl-be":217,"./nl-be.js":217,"./nl.js":218,"./nn":219,"./nn.js":219,"./pa-in":220,"./pa-in.js":220,"./pl":221,"./pl.js":221,"./pt":223,"./pt-br":222,"./pt-br.js":222,"./pt.js":223,"./ro":224,"./ro.js":224,"./ru":225,"./ru.js":225,"./sd":226,"./sd.js":226,"./se":227,"./se.js":227,"./si":228,"./si.js":228,"./sk":229,"./sk.js":229,"./sl":230,"./sl.js":230,"./sq":231,"./sq.js":231,"./sr":233,"./sr-cyrl":232,"./sr-cyrl.js":232,"./sr.js":233,"./ss":234,"./ss.js":234,"./sv":235,"./sv.js":235,"./sw":236,"./sw.js":236,"./ta":237,"./ta.js":237,"./te":238,"./te.js":238,"./tet":239,"./tet.js":239,"./th":240,"./th.js":240,"./tl-ph":241,"./tl-ph.js":241,"./tlh":242,"./tlh.js":242,"./tr":243,"./tr.js":243,"./tzl":244,"./tzl.js":244,"./tzm":246,"./tzm-latn":245,"./tzm-latn.js":245,"./tzm.js":246,"./uk":247,"./uk.js":247,"./ur":248,"./ur.js":248,"./uz":250,"./uz-latn":249,"./uz-latn.js":249,"./uz.js":250,"./vi":251,"./vi.js":251,"./x-pseudo":252,"./x-pseudo.js":252,"./yo":253,"./yo.js":253,"./zh-cn":254,"./zh-cn.js":254,"./zh-hk":255,"./zh-hk.js":255,"./zh-tw":256,"./zh-tw.js":256};r.keys=function(){return Object.keys(o)},r.resolve=t,e.exports=r,r.id=134},1467:function(e,s,n){var r,t=n(0),o=n(586),i=t.keys(o),a=["category","choropleth"],j={trackLegends:function(e){r={},t.each(e.models,function(e){var s,n={};null!=e.legends&&(s=e.legends,t.each(i,function(e){var r=s[e];!0===r.get("visible")&&(n[e]=r)}),r[e.id]=n)})},getLegends:function(){return r},updateLegends:function(e){var s=r[e];t.each(a,function(e){var n=s[e];n&&n.set({visible:!1})})},resetLegends:function(e){var s=r[e];t.each(s,function(e){e.set({visible:!0})})}};e.exports=j},1475:function(e,s,n){var r=n(355),t=n(1131),o=n(1130),i=n(0),a=n(133),j=window.vizJSON,c=i.findWhere(j.overlays,{type:"logo"}),l={no_cdn:!1,cartodb_logo:void 0!==c,renderMenu:j.options.dashboard_menu,share_urls:!0,authToken:window.authTokens,layerSelectorEnabled:!0,mapzenApiKey:window.mapzenApiKey},d=window.stateJSON,f=window.layersData,u=a.getStateFromCurrentURL();u&&!i.isEmpty(u)?i.extend(l,{state:u}):d&&"{}"!==d&&i.extend(l,{state:d});var h=new t;h.resetByLayersData(f),r.createDashboard("#dashboard",j,l,function(e,s){e&&console.error("Dashboard has some errors:",e);var n=s.getMap().map,r=j.options.scrollwheel,t=r?"enableScrollWheel":"disableScrollWheel";n&&n[t]&&n[t]();var i=new o({deepInsightsDashboard:s,layerStyleCollection:h});window.embedIntegrations=i}),window.layerStyleCollection=h},382:function(e,s){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=382},5:function(e,s,n){var r=n(0);e.exports=function(e,s,n){if(void 0===s)throw new Error("Opts are required");r.each(s,function(s){if(void 0===e[s])throw new Error(s+" is required");n["_"+s]=e[s]},n)}},586:function(e,s){var n={bubble:{legendType:"size"},category:{legendType:"color"},choropleth:{legendType:"color"},custom:{legendType:"color"},custom_choropleth:{legendType:"color"}};e.exports=n},612:function(e,s,n){function r(e){return n(t(e))}function t(e){var s=o[e];if(!(s+1))throw new Error("Cannot find module '"+e+"'.");return s}var o={"./0.1.0/reference.json":613,"./0.10.0/reference.json":614,"./0.14.0/reference.json":615,"./0.15.0/reference.json":616,"./0.16.0/reference.json":617,"./0.17.0/reference.json":618,"./0.18.0/reference.json":619,"./0.19.0/reference.json":620,"./0.2.0/reference.json":621,"./0.20.0/reference.json":622,"./0.21.0/reference.json":623,"./0.22.0/reference.json":624,"./0.23.0/reference.json":625,"./0.26.0/reference.json":626,"./0.27.0/reference.json":627,"./0.29.0/reference.json":628,"./0.3.0/reference.json":629,"./0.33.0/reference.json":630,"./0.34.0/reference.json":631,"./0.37.0/reference.json":632,"./0.37.1/reference.json":633,"./0.38.0/reference.json":634,"./0.4.0/reference.json":635,"./0.40.0/reference.json":636,"./0.41.0/reference.json":637,"./0.43.0/reference.json":638,"./0.44.0/reference.json":639,"./0.47.0/reference.json":640,"./0.51.0/reference.json":641,"./0.52.0/reference.json":642,"./0.54.0/reference.json":643,"./0.55.0/reference.json":644,"./0.55.1/reference.json":645,"./0.58.1/reference.json":646,"./0.59.3/reference.json":647,"./0.59.4/reference.json":648,"./0.6.0/reference.json":649,"./0.7.0/reference.json":650,"./0.9.0/reference.json":651};r.keys=function(){return Object.keys(o)},r.resolve=t,e.exports=r,r.id=612},958:function(e,s){},959:function(e,s){}},[1475]);
//# sourceMappingURL=builder_embed.js.map