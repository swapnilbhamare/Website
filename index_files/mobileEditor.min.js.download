define("mobileEditor/mobileElementsPanel/mobileElementsData",["lodash","core","experiment"],function(e,t,i){"use strict";function n(t){return e.reject(t.mobile.qab.getActions(),"isDynamic").length>0}function o(e){var t=e.mobile.qab.get();e.selection.selectComponentByCompRef(t)}function a(i){n(i)?o(i):(i.mobile.actionBar.version.upgrade(),i.documentServices.waitForChangesApplied(function(){!function(i){var n=i.mobile.qab.get(),o=i.components.serialize(n);i.bi.event(t.bi.events.addPanel.COMPONENT_ADDED_TO_STAGE,{origin:"mobile_tools",category:null,section:null,component_type:o.componentType,component_id:n.id,preset_id:null,adding_method:null,preset_data_skin:n.skin||e.get(n,["style","skin"])||"",preset_data_tags:null,editor_working_mode:"mobile"})}(i),function(e){o(e),e.panelManager.closeAllPanels(),e.openComponentPanel(t.constants.componentPanels.manage,{firstTimeOpen:!0})}(i)}))}var l=e.once(function(e){var t=e.mobile.actionBar.isEnabled();return n(e)||i.isOpen("se_qab")&&!t}),s=e.once(function(e){return e.mobile.actionBar.isEnabled()||!i.isOpen("se_qab")});return function(e){var t=[];return l(e)?t.push(function(e){return{id:"quickActionBar",title:"mobile_features_feature_title_quick_actions",desc:"mobile_features_feature_text_quick_actions",symbol:"mobile_left_menu_action_bar",expandSymbol:"plusBig",expandSymbolDisabled:"successIcon",onClick:a.bind(null,e),tooltip:{key:"qabActivatedTooltip",id:"qabActivatedTooltip",content:"mobile_features_feature_text_add_tosite"},disabled:n(e),disabledTooltip:{key:"qabDisabledTooltip",id:"qabDisabledTooltip",content:"mobile_quick_actions_preinstalled_tooltip"}}}(e)):s(e)&&t.push(function(e){return{id:"actionBar",title:"mobile_action_bar_title",desc:"mobile_features_feature_text_quick_actions",symbol:"mobile_left_menu_action_bar",helpId:"ec11d690-b5f0-4c35-b95f-2e928067049d",toggle:{action:e.mobile.actionBar.enable,state:e.mobile.actionBar.isEnabled}}}(e)),t.push(function(e){return{id:"backToTop",title:"mobile_backtotop_title",desc:"mobile_features_feature_text_backto_top",symbol:"mobile_left_menu_back_to_top",helpId:"ca3e54a0-3d76-4ede-af8c-f9ccbaeeba5d",toggle:{action:e.mobile.mobileOnlyComponents.enableBackToTopButton,state:e.mobile.mobileOnlyComponents.isMobileOnlyComponentExistOnStructure.bind(null,e.mobile.mobileOnlyComponents.mobileOnlyComps.BACK_TO_TOP_BUTTON)}}}(e)),t}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin",["core"],function(e){"use strict";return{getInitialState:function(){return{toggleValue:this.getToggleState()}},componentWillReceiveProps:function(){this.setState({toggleValue:this.getToggleState()})},onToggleChange:function(e,t){switch(this.setState({toggleValue:e}),this.runToggleAction(e),this.props.id){case"mobileView":this.sendToggleBIOptimized(e,t||"mobile_view_panel_toggle");break;case"backToTop":this.sendToggleBIBackToTop(e);break;case"actionBar":this.sendToggleBIActionBar(e);break;default:throw"Error: mobile settings cannot toggle "+this.props.id}},getImage:function(){return this.state.toggleValue?this.props.image.on:this.props.image.off},getToggleState:function(){return!!this.props.toggle.state&&this.props.toggle.state()},runToggleAction:function(e){this.props.toggle.action&&(this.props.toggle.action(e),this.getEditorAPI().history.add("toggledAction"))},getValueLink:function(){return{value:this.getToggleState(),requestChange:this.onToggleChange}},sendToggleBIActionBar:function(t){this.getEditorAPI().bi.event(e.bi.events.mobileEditor.mobileTools.MOBILE_ACTION_BAR_TOGGLE,{toggle_status:t?"on":"off",site_id:this.getEditorAPI().documentServices.generalInfo.getSiteId()})},sendToggleBIBackToTop:function(t){var i=e.bi.events.mobileEditor.mobileTools.BACK_TO_TOP_SHOW_TOGGLE,n={toggle_status:t?"on":"off"};this.getEditorAPI().bi.event(i,n)},sendToggleBIOptimized:function(t,i){var n="mobileView"===this.props.id?e.bi.events.topbar.mobile_view_mode_toggle:null;if(n){var o={origin:i||"",status:t?1:0};this.getEditorAPI().bi.event(n,o)}}}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader.rt",["react","lodash","util","symbols"],function(e,t,i,n){"use strict";return function(){return e.createElement("div",{className:"mobile-settings-header"},e.createElement("div",{className:"title"},i.translate(this.props.title)),e.createElement("div",{className:"helpSign",onClick:this.openHelpCenter},"?"),e.createElement("div",{onClick:this.minimize},e.createElement(n.symbol,{className:"arrow",name:"arrowRightBig"})))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader",["create-react-class","prop-types","lodash","core","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader.rt"],function(e,t,i,n,o){"use strict";return e({displayName:"mobileElementsSettingsHeader",render:o,mixins:[n.mixins.editorAPIMixin],propTypes:{minimize:t.func,title:t.string,helpId:t.string},minimize:function(){this.props.minimize()},openHelpCenter:function(){var e={panel_name:this.props.title,origin:n.constants.BI.HELP.ORIGIN.LEFTBAR,learn_more:!1};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)}})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop.rt",["react","lodash","baseUI","baseUILib","util","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader"],function(e,t,i,n,o,a){"use strict";return function(){return e.createElement("div",{className:t({"mobile-element-settings":!0,backToTopEnabled:this.state.toggleValue}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},e.createElement(a,{title:"mobile_backtotop_title",helpId:this.props.helpId,minimize:this.props.onClick}),e.createElement("div",{className:"content"},e.createElement("div",{className:"category-desc"},e.createElement("p",{className:"text"},"\r\n                ",o.translate("mobile_backtotop_text")," ",e.createElement("a",{className:"learn-more",onClick:this.openHelpCenter},o.translate("mobile_backtotop_link")))),e.createElement(n.ToggleSwitch,{value:this.getValueLink().value,label:"mobile_backtotop_show_label",onChange:this.getValueLink().requestChange}),e.createElement("br",{}),e.createElement("div",{className:"imageWrapper"},e.createElement("div",{className:"img"})),e.createElement("p",{className:"text"},"\r\n            ",o.translate("mobile_backtotop_bottom_text")," ",e.createElement("a",{onClick:this.goToPreview,className:"go-to-preview"},o.translate("mobile_backtotop_preview_text")),"\r\n            ",o.translate("mobile_backtotop_bottom_text2"),"\r\n        ")))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop",["create-react-class","prop-types","core","lodash","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop.rt"],function(e,t,i,n,o,a){"use strict";return e({displayName:"mobileSettingsBackToTop",mixins:[o,i.mixins.editorAPIMixin],propTypes:{id:t.string,helpId:t.string},goToPreview:function(){var e=this.getEditorAPI();e.preview.togglePreview(),e.bi.event(i.bi.events.mobileEditor.mobileTools.BACK_TO_TOP_PREVIEW_CLICK,{})},openHelpCenter:function(){var e={learn_more:!0,panel_name:this.props.id,origin:i.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)},render:a})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar.rt",["react","lodash","baseUI","baseUILib","util","panels","symbols","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader"],function(e,t,i,n,o,a,l,s){"use strict";return function(){return e.createElement("div",{className:t({"mobile-element-settings":!0,"action-bar-settings":!0}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},e.createElement(s,{title:"mobile_action_bar_title",helpId:this.props.helpId,minimize:this.props.onClick}),e.createElement("div",{className:"content"},e.createElement("div",{className:"category-desc"},e.createElement("p",{className:"text"},"\n                ",o.translate("mobile_action_bar_text")," ",e.createElement("a",{className:"learn-more",onClick:this.openHelpCenter},o.translate("mobile_action_bar_text_link")))),e.createElement(n.ToggleSwitch,{value:this.getValueLink().value,label:"mobile_action_bar_toggle_label",onChange:this.getValueLink().requestChange}),e.createElement("br",{}),e.createElement("div",{className:"action-bar-main-content"},e.createElement("div",{className:"action-bar-menu-wrapper"},e.createElement("div",{className:"action-bar-menu-title"},"\n                    ",o.translate("mobile_action_bar_section_label"),"\n                "),e.createElement("div",{className:"action-bar-menu"},e.createElement(n.CustomScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:!0},e.createElement.apply(this,["ul",{},t.map(this.getActions(),function(i,o){return e.createElement("li",{className:t({"action-bar-item":!0,"social-media-open":this.isSubPanelOpen(i.id)}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:i.id},i.isForm?e.createElement("div",{key:i.id},e.createElement(n.Composites.ToggleSwitchWithSelectiveInput,{},e.createElement(n.Composites.ToggleSwitch,{},e.createElement(n.ToggleSwitch,{value:this.getActionValueLink(i.id).value,label:i.label,onChange:this.getActionValueLink(i.id).requestChange,symbol:this.getSymbolElement(i.symbol),disabled:!this.isActionBarEnabled()})),this.getActionValueLink(i.id).value?e.createElement(n.Composites.TextInput,{key:i.id+"2"},e.createElement(n.TextInput,{value:this.getActionDataValueLink(i.id).value,onChange:this.getActionDataValueLink(i.id).requestChange,validator:i.validators,invalidMessage:i.invalidMessage,placeholder:this.getPlaceholder(i.id),disabled:!this.isActionBarEnabled(),onBlur:this.handleBlur.bind(this,i.id),maxLength:this.getMaxLength(),focus:this.state.shouldInputFocus})):null),e.createElement(n.Divider,{})):null,i.isForm?null:e.createElement("div",{key:i.id},"socialLinks"!==i.id?e.createElement(n.Composites.ToggleSwitch,{key:i.id},e.createElement(n.ToggleSwitch,{value:this.getActionValueLink(i.id).value,onChange:this.getActionValueLink(i.id).requestChange,symbol:this.getSymbolElement(i.symbol),disabled:!this.isActionBarEnabled(),label:i.label})):null,"socialLinks"!==i.id?e.createElement(n.Divider,{key:i.id+"_devider"}):null,"socialLinks"===i.id?e.createElement(n.Composites.ToggleSwitch,{key:i.id},e.createElement(n.ToggleSwitch,{value:this.getActionValueLink(i.id).value,onChange:this.getActionValueLink(i.id).requestChange,symbol:this.getSymbolElement(i.symbol),disabled:!this.isActionBarEnabled(),label:i.label,onCheck:this.openPanel})):null))}.bind(this))]))),e.createElement("div",{className:"action-bar-color-scheme"},e.createElement("div",{className:"action-bar-color-scheme-picker"},e.createElement("div",{className:"color-scheme-label"},o.translate("mobile_action_bar_colors_label")),e.createElement(i.buttonsGroup,{disabled:!this.isActionBarEnabled(),options:this.getColorSchemeOptions(),valueLink:this.getColorSchemeValueLink()})),e.createElement("div",{className:"action-bar-preview",style:{backgroundImage:this.getMobileActionBarDevicePreview()}},this.isActionBarEnabled()?e.createElement("div",{className:"action-bar-menu-preview",key:"actionBarMenuPreview",style:{backgroundImage:this.getMobileActionBarMenuPreview(),backgroundPosition:this.getMobileActionBarMenuPreviewPosition()}}):null)))),e.createElement("div",{className:"action-bar-footer"},e.createElement("span",{},"\n                ",o.translate("mobile_action_bar_bottom_text"),"\n            "),e.createElement("span",{className:"action-bar-publish",onClick:this.goToPublishHelp},"\n                ",o.translate("mobile_action_bar_bottom_link"),"\n            "))))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar",["react","create-react-class","prop-types","core","lodash","util","symbols","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar.rt"],function(e,t,i,n,o,a,l,s,r){"use strict";return t({displayName:"mobileSettingsActionBar",mixins:[s,n.mixins.editorAPIMixin],propTypes:{id:i.string,helpId:i.string},getInitialState:function(){return{shouldInputFocus:!1}},goToPublishHelp:function(){var e={component:"publish_your_site",learn_more:!0,panel_name:this.props.id,origin:n.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter("c61857c1-9b9f-48f8-ae8b-c46c74427ec8",null,e)},openHelpCenter:function(){var e={learn_more:!0,panel_name:this.props.id,origin:n.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)},getActions:function(){return[{id:"navigationMenu",label:"mobile_action_bar_menu_label",symbol:"mba_menu_bold",isForm:!1},{id:"phone",label:"mobile_action_bar_phone_label",symbol:"mba_phone_bold",validators:[a.validate.notEmpty,a.validate.phone],invalidMessage:"Validation_V3_Numeric_Input",isForm:!0},{id:"email",label:"mobile_action_bar_email_label",symbol:"mba_envelope_bold",validators:[a.validate.notEmpty,a.validate.email],invalidMessage:"Validation_V1_Email",isForm:!0},{id:"address",label:"mobile_action_bar_address_label",symbol:"mba_map_bold",isForm:!0},{id:"socialLinks",label:"mobile_action_bar_social_label",symbol:"mba_social_bar_bold",isForm:!1}]},toggleAction:function(e){var t=this.getEditorAPI().mobile.actionBar.actions,i=t.getEnabled(),a=t.get()[e],l=o.find(this.getActions(),{id:e}).isForm,s=this.getDefaultActionValue(e),r=a===s,m={},c="socialLinks"===e,d=!1;i[e]=!i[e],this.getEditorAPI().bi.event(n.bi.events.mobileEditor.mobileTools.MOBILE_ACTION_BAR_COMPONENT_TOGGLE,{toggle_name:e,toggle_status:i[e]?"on":"off",site_id:this.getEditorAPI().documentServices.generalInfo.getSiteId()}),l?(i[e]?(m[e]=a||s,t.update(m)):r&&(m[e]="",t.update(m)),d=i[e]):c&&i[e]&&(o(a).values().compact().value().length>0||(i[e]=!1),this.openPanel()),this.setState({shouldInputFocus:d}),t.enable(i)},isActionEnabled:function(e){return this.getEditorAPI().mobile.actionBar.actions.getEnabled()[e]},getDefaultActionValue:function(e){return a.translate("mobile_action_bar_"+e+"_default")},getPlaceholder:function(e){return"mobile_action_bar_"+e+"_placeholder"},changeActionData:function(e,t){var i={};i[e]=t,this.getEditorAPI().mobile.actionBar.actions.update(i)},handleBlur:function(e,t){var i=this.getEditorAPI().mobile.actionBar,n=i.actions,o={};!t.target.value&&i.isEnabled()&&(o[e]=!1,n.enable(o))},getActionValueLink:function(e){return{value:this.isActionEnabled(e),requestChange:this.toggleAction.bind(this,e)}},getActionDataValueLink:function(e){return{value:this.getEditorAPI().mobile.actionBar.actions.get()[e],requestChange:this.changeActionData.bind(this,e)}},getColorSchemeValueLink:function(){var e=this.getEditorAPI().mobile.actionBar.colorScheme;return{value:e.get(),requestChange:e.set}},getColorSchemeOptions:function(){return[{label:"mobile_action_bar_colors_dark",value:"dark"},{label:"mobile_action_bar_colors_light",value:"light"}]},openPanel:function(){this.isActionBarEnabled()&&this.getEditorAPI().panelManager.openPanel("panels.toolPanels.mobileActionBarSubPanel",{top:194,left:666},!0)},isActionBarEnabled:function(){return this.getEditorAPI().mobile.actionBar.isEnabled()},getMobileActionBarDevicePreview:function(){var e=this.isActionBarEnabled()?"mobileEditor/mobileSettings/mobilePreviewActive.png":"mobileEditor/mobileSettings/mobilePreviewDisable.png";return"url('"+a.media.getMediaUrl(e)+"')"},getMobileActionBarMenuPreview:function(){return"url('"+a.media.getMediaUrl("mobileEditor/mobileSettings/mobilePreviewQuickActionButtons.png")+"')"},getMobileActionBarMenuPreviewPosition:function(){var e=this.getEditorAPI().mobile.actionBar,t=e.actions.getEnabled(),i={navigationMenu:16,phone:8,email:4,address:2,socialLinks:1},n=32*("light"===e.colorScheme.get());return"50% "+(o(t).pickBy().map(function(e,t){return i[t]}).sum()+n)/63*100+"%"},isSubPanelOpen:function(e){var t=this.getEditorAPI().panelManager.getOpenPanels(),i="socialLinks"===e,n=o.some(t,{name:"panels.toolPanels.mobileActionBarSubPanel"});return i&&n},getMaxLength:function(){return 256},getSymbolElement:function(t){return e.createElement(l.symbol,{name:t})},render:r})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementSettings",["react","create-react-class","prop-types","core","lodash","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar"],function(e,t,i,n,o,a,l){"use strict";return t({displayName:"mobileElementSettings",mixins:[n.mixins.editorAPIMixin],propTypes:{id:i.string},render:function(){var t={backToTop:a,actionBar:l};return e.createElement(t[this.props.id],o.assign({},this.props))}})}),define("mobileEditor/mobileElementsPanel/mobileElementsPanel.rt",["react","lodash","experiment","util","panels","baseUI","baseUILib","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementSettings","mobileEditor/mobileElementsPanel/mobileElementsData"],function(e,t,i,n,o,a,l,s,r){"use strict";return function(){function i(){var i=this.getEditorAPI();return e.createElement.apply(this,["div",{className:"items-wrapper"},t.map(r(i),function(i,n,o){return e.createElement("div",{className:t(this.getClass(n)).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:n.id},e.createElement(a.listItemWithSymbol,t.assign({},{key:"itemWithSymbol"},this.getMobileElementProps(n))))}.bind(this,i))])}return e.createElement(o.frames.leftPanelFrame,{className:"mobile-elements-panel "+t({"action-bar-menu-open":this.isActionBarOpened()}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),ref:"mobileElementsPanel",panelName:this.props.panelName,panelClass:this.getPanelClass(),label:n.translate("mobile_features_section_title_mobile_tools"),onContextMenu:function(e){e.preventDefault()}.bind(this)},this.state.selectedMobileElement?e.createElement(s,t.assign({},{key:"mobileElement"},this.getMobileElementSettingsProps())):null,e.createElement("div",{className:"panel-shadow"}),i.apply(this,[]))}}),define("mobileEditor/mobileElementsPanel/mobileElementsPanel",["create-react-class","prop-types","core","lodash","mobileEditor/mobileElementsPanel/mobileElementsData","mobileEditor/mobileElementsPanel/mobileElementsPanel.rt"],function(e,t,i,n,o,a){"use strict";function l(e,t){var i=o(e);return n.find(i,function(e){return e.id.toLowerCase()===t})}return e({displayName:"mobileElementsPanel",mixins:[i.mixins.editorAPIMixin],propTypes:{mobileElementId:t.string},getInitialState:function(){return{selectedMobileElement:l(this.getEditorAPI(),this.props.mobileElementId)}},isItemSelected:function(e){return this.state.selectedMobileElement&&this.state.selectedMobileElement.id===e},componentWillReceiveProps:function(e){if(e.mobileElementId!==this.props.mobileElementId){var t=l(this.getEditorAPI(),e.mobileElementId);this.setState({selectedMobileElement:t})}},selectMobileElement:function(e){this.getEditorAPI().bi.event(i.bi.events.mobileEditor.mobileTools.MOBILE_ELEMENT_CLICK,{element_name:e.id}),n.isFunction(e.onClick)?e.onClick():this.setMobileElement(e)},setMobileElement:function(e){this.setState({selectedMobileElement:e})},getMobileElementSettingsProps:function(){return n.assign(this.state.selectedMobileElement,{onClick:this.setMobileElement})},getMobileElementProps:function(e){return n.assign(e,{callback:this.selectMobileElement.bind(this,e)})},getClass:function(e){return n.defaults(e.classNames,{"item-in-list":!0,selected:this.isItemSelected(e.id)})},isActionBarOpened:function(){return this.isItemSelected("actionBar")},getPanelClass:function(){return"mobile-elements-panel "+(this.isActionBarOpened()?"action-bar-menu-open-wrapper":"")},render:a})}),define("mobileEditor/hiddenItemsPanel/mobileOnlyHiddenItemsData",[],function(){"use strict";var e={TINY_MENU:{id:"TINY_MENU",className:"wysiwyg.viewer.components.mobile.TinyMenu",label:"component_label_tinyMenu"}};return{getMobileItemData:function(t){return e[t]}}}),define("mobileEditor/hiddenItemsPanel/hiddenItemsData",["lodash","util","mobileEditor/hiddenItemsPanel/mobileOnlyHiddenItemsData"],function(e,t,i){"use strict";function n(e){var i=e||"";return i=t.stringUtils.removeHtmlTagsFromString(i),i=t.stringUtils.removeBreakLinesFromString(i),i=i.substring(0,l),i=function(e){var t=window.document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}(i)}function o(e,t,i){var o=i.components.get.byId(e,t,i.documentServices.viewMode.VIEW_MODES.DESKTOP),a=i.components.getType(o),l=i.components.getIconInfo(o,s);return{compId:o.id,compType:a,label:function(e,t,i){var o=i.components.getDisplayName(e);if(r[t]){var a=i.components.data.get(e);a&&(o+=": "+a[r[t]])}return n(o)}(o,a,i),iconUrl:l.src,svgName:l.svgName,css:l.css}}function a(e,n,a,l){return l?function(e){var n=i.getMobileItemData(e),o=t.compIcon.getCompIconInfo(null,n.className,s);return{compId:n.id,compType:n.id,label:t.translate(n.label),iconUrl:o.src,svgName:o.svgName,css:o.css}}(n):o(n,a,e)}var l=50,s={width:50,height:50},r={"wysiwyg.viewer.components.SiteButton":"label","wysiwyg.viewer.components.WRichText":"text"};return{getItemData:a}}),define("mobileEditor/hiddenItemsUtils/hiddenItemsUtils",["lodash","mobileEditor/hiddenItemsPanel/hiddenItemsData"],function(e,t){"use strict";function i(i,n){var o=i.mobile.hiddenComponents.get(n);return e.map(o,function(e){var o=i.mobile.mobileOnlyComponents.isMobileOnlyComponent(e);return t.getItemData(i,e,n,o)})}return{getHiddenCompsForPage:i,getFocusedPageHiddenComps:function(t,n){n=n||t.documentServices.pages.getFocusedPageId();var o=i(t,"masterPage"),a=i(t,n);return e.uniqBy(e.union(o,a),"compId")}}}),define("mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem.rt",["react","lodash","baseUI","util"],function(e,t,i,n){"use strict";return function(){return e.createElement("div",{className:"hidden-item"},e.createElement("div",function(e,i){var n=t.assign({},e,i);return e.hasOwnProperty("style")&&(n.style=t.defaults(n.style,e.style)),e.hasOwnProperty("className")&&i.hasOwnProperty("className")&&(n.className=i.className+" "+e.className),n}({className:"icon"},this.getStyle()),this.props.svgName?e.createElement(i.symbol,{key:"hiddenItemIcon",name:this.props.svgName}):null),e.createElement("div",{className:"label"},this.props.label),e.createElement(i.tooltip,{value:"mobile_hidden_items_show_tooltip"},e.createElement("div",{className:"add-button",onClick:this.reAddComp},e.createElement(i.symbol,{name:"showComp"}))))}}),define("mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem",["create-react-class","prop-types","core","lodash","mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem.rt"],function(e,t,i,n,o){"use strict";return e({displayName:"hiddenItem",render:o,mixins:[i.mixins.editorAPIMixin],propTypes:{label:t.string.isRequired,compId:t.string.isRequired,compType:t.string.isRequired,pageId:t.string.isRequired,sectionType:t.string.isRequired,svgName:t.string,iconUrl:t.string,css:t.object},sendReAddBiEvent:function(){var e=this.getEditorAPI(),t={current_page_name:this.props.pageId,component_type:this.props.compType,section:this.props.sectionType};if(e.isTpa(this.props.compType)){var n=e.components.get.byId(this.props.compId,this.props.pageId,e.documentServices.viewMode.VIEW_MODES.DESKTOP),o=e.components.data.get(n),a=e.documentServices.tpa.app.getData(o.applicationId);t.app_id=a.appDefinitionId,t.app_site_id=a.instanceId,t.instance_id=this.props.compId}e.bi.event(i.bi.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_SHOW,t)},reAddComp:function(){var e=this.getEditorAPI();e.mobile.hiddenComponents.show(this.props.compId,this.props.pageId),e.history.add("unhide mobile component"),this.sendReAddBiEvent()},getStyle:function(){var e={};return this.props.css&&((e=this.props.css).backgroundImage="url("+this.props.iconUrl+")"),{style:e}}})}),define("mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer.rt",["react","lodash","mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem"],function(e,t,i){"use strict";return function(){return e.createElement("div",{className:"hidden-items-container"},e.createElement("div",{className:"container-header"},this.props.title),e.createElement.apply(this,["div",{className:"container-comps"},t.map(this.props.hiddenComps,function(n,o){return e.createElement(i,t.assign({},{key:n.compId},t.assign(n,{pageId:this.props.pageId,sectionType:this.props.sectionType})))}.bind(this))]))}}),define("mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer",["create-react-class","prop-types","lodash","mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer.rt"],function(e,t,i,n){"use strict";return e({displayName:"hiddenItemsContainer",propTypes:{hiddenComps:t.arrayOf(t.shape({label:t.string.isRequired,compId:t.string.isRequired,compType:t.string.isRequired,iconUrl:t.string,svgName:t.string,css:t.object})).isRequired,pageId:t.string.isRequired,title:t.string.isRequired,sectionType:t.string.isRequired},render:n})}),define("mobileEditor/hiddenItemsPanel/hiddenItemsPanel.rt",["react","lodash","baseUI","baseUILib","util","core","panels","experiment","mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer"],function(e,t,i,n,o,a,l,s,r){"use strict";return function(){return e.createElement(l.frames.leftPanelFrame,{className:"hidden-items-panel",ref:"hiddenItemsPanel",panelName:this.props.panelName,panelClass:"hidden-items-panel",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",label:o.translate("mobile_hidden_items_panel_title")+" ("+this.getAllHiddenItems().length+")",onContextMenu:function(e){e.preventDefault()}.bind(this)},e.createElement(n.CustomScroll,{heightRelativeToParent:"inherit",addScrolledClass:!0},e.createElement("div",{className:"content"},e.createElement("div",{className:"scrollable"},this.hasHiddenItemsMasterPage()?e.createElement(r,t.assign({},{key:"hiddenItemsMP"},this.getMasterPageProps())):null,this.hasHiddenItemsCurrPage()?e.createElement(r,t.assign({},{key:"hiddenItemsCP"},this.getCurrentPageProps())):null,this.hasDeletedItemsOnPanel()?null:e.createElement("div",{className:"no-items",key:"hiddenItemsNoItems"},"\n                    ",o.translate("mobile_hidden_items_no_elements"),"\n                ")))))}}),define("mobileEditor/hiddenItemsPanel/hiddenItemsPanel",["reactDOM","create-react-class","lodash","core","util","mobileEditor/hiddenItemsUtils/hiddenItemsUtils","mobileEditor/hiddenItemsPanel/hiddenItemsPanel.rt"],function(e,t,i,n,o,a,l){"use strict";function s(e,t,i){return{hiddenComps:a.getHiddenCompsForPage(this.getEditorAPI(),e),pageId:e,title:t,sectionType:i}}return t({displayName:"hiddenItemsPanel",mixins:[n.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"mobileEditor.hiddenItemsPanel"}},isFirstTimeInfoBoxShown:function(){return!0},getMasterPageProps:function(){return s.call(this,"masterPage",o.translate("mobile_hidden_items_section_title_allpages"),"masterPage")},getCurrentPageProps:function(){var e=o.translate("mobile_hidden_items_section_title_currentpage"),t=this.getEditorAPI().documentServices.pages.getFocusedPageId();return e=e.replace("$$PAGE$$",this.getEditorAPI().pages.getPageTitle(t)),s.call(this,t,e,"currentPage")},getAllHiddenItems:function(){return a.getFocusedPageHiddenComps(this.getEditorAPI())},hasHiddenItemsCurrPage:function(){var e=this.getEditorAPI().mobile.hiddenComponents.get(this.getEditorAPI().documentServices.pages.getFocusedPageId());return!i.isEmpty(e)},hasHiddenItemsMasterPage:function(){var e=this.getEditorAPI().mobile.hiddenComponents.get("masterPage");return!i.isEmpty(e)},hasDeletedItemsOnPanel:function(){return this.hasHiddenItemsMasterPage()||this.hasHiddenItemsCurrPage()},componentWillMount:function(){this.getEditorAPI().mobile.hideHiddenItemsCounter()},getTooltipsPanelBounds:function(){var t=function(e){if(e)return e.getBoundingClientRect()}(e.findDOMNode(this));return{left:t?t.left:180,width:t?t.width:352}},render:l})}),define("mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel.rt",["react","lodash","baseUI","util","symbols","panels"],function(e,t,i,n,o,a){"use strict";return function(){return e.createElement(a.frames.leftPanelFrame,{className:"layout-optimizer-panel",ref:"layoutOptimizerPanel",panelName:this.props.panelName,panelClass:"layout-optimizer-panel",helpId:this.helpId,label:n.translate("mobile_layout_optimizer_panel_title"),onContextMenu:function(e){e.preventDefault()}.bind(this)},e.createElement("div",{className:"content"},e.createElement("div",{className:"image-container"},e.createElement(o.symbol,{name:"autoRefreshingLayout"})),e.createElement("div",{className:"text"},n.translate(this.textKey),"\n            ",e.createElement("span",{className:"learn-more",onClick:this.openHelpCenter},"\n                ",n.translate("Notification_Box_Mobile_Layout_Optimizer_FirstTime_Learn_More"),"\n            ")),e.createElement(i.button,{className:"optimize-layout-button",label:"Notification_Box_Mobile_Layout_Optimizer_FirstTime_Button",disabled:!this.canOptimize(),onClick:this.optimizeLayout})))}}),define("mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel",["create-react-class","prop-types","lodash","core","mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel.rt"],function(e,t,i,n,o){"use strict";return e({displayName:"layoutOptimizerPanel",mixins:[n.mixins.editorAPIMixin],textKey:"Notification_Box_Mobile_Layout_Optimizer_FirstTime_Body",helpId:"1a65ebfc-138a-45df-bd54-5f06c03b5973",propTypes:{panelName:t.string},getDefaultProps:function(){return{panelName:"mobileEditor.layoutOptimizerPanel"}},canOptimize:function(){var e=this.getEditorAPI(),t=e.documentServices.generalInfo.isFirstSave();return e.documentServices.history.canUndo()||!t},optimizeLayout:function(){var e=this.getEditorAPI();e.mobile.optimizeLayout(),e.panelManager.closeAllPanels()},sendBILearnMore:function(){this.getEditorAPI().bi.event(n.bi.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_REFRESH_LAYOUT_TOOLTIP_OPEN,{})},openHelpCenter:function(){var e=this.getEditorAPI(),t={panel_name:this.props.panelName,origin:n.constants.BI.HELP.ORIGIN.LEFTBAR,learn_more:!0};e.panelManager.openHelpCenter(this.helpId,null,t)},render:o})}),define("mobileEditor/panels/cantMakeChangeMobile.rt",["react","lodash","util","core","baseUI","panels"],function(e,t,i,n,o,a){"use strict";return function(){return e.createElement(a.frames.messagePanelFrame,{ref:"frame",key:"cantMakeChangesOnMobile",panelName:this.props.panelName,className:"mobile-cant-make-changes",panelTitle:i.translate("Notification_Box_Changes_Mobile_Title"),confirmLabel:"Notification_Box_Got_It",dontShowAgainKey:n.constants.USER_PREFS.CANT_MAKE_CHANGES.MOBILE_CANT_MAKE_CHANGE_DONT_SHOW_AGAIN,userPrefType:"site"},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"logo"},e.createElement(o.symbol,{name:"plaster"})),e.createElement("div",{className:"message"},i.translate("Notification_Box_Changes_Mobile_Text"))))}}),define("mobileEditor/panels/cantMakeChangeMobile",["create-react-class","lodash","mobileEditor/panels/cantMakeChangeMobile.rt"],function(e,t,i){"use strict";return e({displayName:"cantMakeChangeMobile",render:i})}),define("mobileEditor",["mobileEditor/mobileElementsPanel/mobileElementsPanel","mobileEditor/hiddenItemsPanel/hiddenItemsPanel","mobileEditor/hiddenItemsPanel/hiddenItemsData","mobileEditor/hiddenItemsUtils/hiddenItemsUtils","mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel","mobileEditor/panels/cantMakeChangeMobile"],function(e,t,i,n,o,a){"use strict";return{mobileElementsPanel:e,hiddenItemsPanel:t,hiddenItemsData:i,hiddenItemsUtils:n,layoutOptimizerPanel:o,panels:{cantMakeChangeMobile:a}}});
//# sourceMappingURL=mobileEditor.min.js.map