webpackJsonp([3],{114:function(t,e,i){var n=i(3),r={};r._isViewport=function(t){return n(window).width()<t},r.isMobileViewport=function(){return this._isViewport(480)},r.isTabletViewport=function(){return this._isViewport(759)},t.exports=r},116:function(t,e,i){"use strict";function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=y.exec(t))?(e=parseInt(e[1],16),new h(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=C.exec(t))?o(parseInt(e[1],16)):(e=x.exec(t))?new h(e[1],e[2],e[3],1):(e=S.exec(t))?new h(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=M.exec(t))?s(e[1],e[2],e[3],e[4]):(e=B.exec(t))?s(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=D.exec(t))?c(e[1],e[2]/100,e[3]/100,1):(e=k.exec(t))?c(e[1],e[2]/100,e[3]/100,e[4]):T.hasOwnProperty(t)?o(T[t]):"transparent"===t?new h(NaN,NaN,NaN,0):null}function o(t){return new h(t>>16&255,t>>8&255,255&t,1)}function s(t,e,i,n){return n<=0&&(t=e=i=NaN),new h(t,e,i,n)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new h(t.r,t.g,t.b,t.opacity)):new h}function l(t,e,i,n){return 1===arguments.length?a(t):new h(t,e,i,null==n?1:n)}function h(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function c(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new p(t,e,i,n)}function d(t){if(t instanceof p)return new p(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new p;if(t instanceof p)return t;t=t.rgb();var e=t.r/255,i=t.g/255,o=t.b/255,s=Math.min(e,i,o),a=Math.max(e,i,o),l=NaN,h=a-s,c=(a+s)/2;return h?(l=e===a?(i-o)/h+6*(i<o):i===a?(o-e)/h+2:(e-i)/h+4,h/=c<.5?a+s:2-a-s,l*=60):h=c>0&&c<1?0:l,new p(l,h,c,t.opacity)}function u(t,e,i,n){return 1===arguments.length?d(t):new p(t,e,i,null==n?1:n)}function p(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function f(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}var g=i(117);e.c=n,i.d(e,"e",function(){return _}),i.d(e,"d",function(){return m}),e.h=r,e.b=a,e.g=l,e.a=h,e.f=u;var _=.7,m=1/_,v="\\s*([+-]?\\d+)\\s*",w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y=/^#([0-9a-f]{3})$/,C=/^#([0-9a-f]{6})$/,x=new RegExp("^rgb\\("+[v,v,v]+"\\)$"),S=new RegExp("^rgb\\("+[b,b,b]+"\\)$"),M=new RegExp("^rgba\\("+[v,v,v,w]+"\\)$"),B=new RegExp("^rgba\\("+[b,b,b,w]+"\\)$"),D=new RegExp("^hsl\\("+[w,b,b]+"\\)$"),k=new RegExp("^hsla\\("+[w,b,b,w]+"\\)$"),T={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i.i(g.a)(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),i.i(g.a)(h,l,i.i(g.b)(n,{brighter:function(t){return t=null==t?m:Math.pow(m,t),new h(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?_:Math.pow(_,t),new h(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),i.i(g.a)(p,u,i.i(g.b)(n,{brighter:function(t){return t=null==t?m:Math.pow(m,t),new p(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?_:Math.pow(_,t),new p(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,r=2*i-n;return new h(f(t>=240?t-240:t+120,r,n),f(t,r,n),f(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},117:function(t,e,i){"use strict";function n(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}e.b=n,e.a=function(t,e,i){t.prototype=e.prototype=i,i.constructor=t}},118:function(t,e,i){"use strict";function n(t,e,i,n,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*i+(1+3*t+3*o-3*s)*n+s*r)/6}e.b=n,e.a=function(t){var e=t.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),o=t[r],s=t[r+1],a=r>0?t[r-1]:2*o-s,l=r<e-1?t[r+2]:2*s-o;return n((i-r/e)*e,a,o,s,l)}}},119:function(t,e,i){"use strict";var n=i(41),r=i(314),o=i(309),s=i(312),a=i(79),l=i(313),h=i(315),c=i(311);e.a=function(t,e){var d,u=typeof e;return null==e||"boolean"===u?i.i(c.a)(e):("number"===u?a.a:"string"===u?(d=i.i(n.f)(e))?(e=d,r.a):h.a:e instanceof n.f?r.a:e instanceof Date?s.a:Array.isArray(e)?o.a:isNaN(e)?l.a:a.a)(t,e)}},120:function(t,e,i){"use strict";var n=i(729);t.exports=Function.prototype.bind||n},122:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(82),h=n(l),c=i(22),d=n(c),u=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.type="atrule",n}return s(e,t),e.prototype.append=function(){var e;this.nodes||(this.nodes=[]);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.prototype.append).call.apply(e,[this].concat(n))},e.prototype.prepend=function(){var e;this.nodes||(this.nodes=[]);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.prototype.prepend).call.apply(e,[this].concat(n))},a(e,[{key:"afterName",get:function(){return(0,d.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"),this.raws.afterName},set:function(t){(0,d.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"),this.raws.afterName=t}},{key:"_params",get:function(){return(0,d.default)("AtRule#_params was deprecated. Use AtRule#raws.params"),this.raws.params},set:function(t){(0,d.default)("AtRule#_params was deprecated. Use AtRule#raws.params"),this.raws.params=t}}]),e}(h.default);e.default=u,t.exports=e.default},123:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(22),h=n(l),c=i(125),d=n(c),u=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.type="comment",n}return s(e,t),a(e,[{key:"left",get:function(){return(0,h.default)("Comment#left was deprecated. Use Comment#raws.left"),this.raws.left},set:function(t){(0,h.default)("Comment#left was deprecated. Use Comment#raws.left"),this.raws.left=t}},{key:"right",get:function(){return(0,h.default)("Comment#right was deprecated. Use Comment#raws.right"),this.raws.right},set:function(t){(0,h.default)("Comment#right was deprecated. Use Comment#raws.right"),this.raws.right=t}}]),e}(d.default);e.default=u,t.exports=e.default},124:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(320),a=n(s),l=i(745),h=n(l),c=i(49),d=n(c),u=0,p=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.css=e.toString(),"\ufeff"!==this.css[0]&&"￾"!==this.css[0]||(this.css=this.css.slice(1)),i.from&&(/^\w+:\/\//.test(i.from)?this.file=i.from:this.file=d.default.resolve(i.from));var n=new h.default(this.css,i);if(n.text){this.map=n;var o=n.consumer().file;!this.file&&o&&(this.file=this.mapResolve(o))}this.file||(u+=1,this.id="<input css "+u+">"),this.map&&(this.map.file=this.from)}return t.prototype.error=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0,o=this.origin(e,i);return r=o?new a.default(t,o.line,o.column,o.source,o.file,n.plugin):new a.default(t,e,i,this.css,this.file,n.plugin),r.input={line:e,column:i,source:this.css},this.file&&(r.input.file=this.file),r},t.prototype.origin=function(t,e){if(!this.map)return!1;var i=this.map.consumer(),n=i.originalPositionFor({line:t,column:e});if(!n.source)return!1;var r={file:this.mapResolve(n.source),line:n.line,column:n.column},o=i.sourceContentFor(n.source);return o&&(r.source=o),r},t.prototype.mapResolve=function(t){return/^\w+:\/\//.test(t)?t:d.default.resolve(this.map.consumer().sourceRoot||".",t)},o(t,[{key:"from",get:function(){return this.file||this.id}}]),t}();e.default=p,t.exports=e.default},125:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(320),l=n(a),h=i(127),c=n(h),d=i(326),u=n(d),p=i(22),f=n(p),g=function t(e,i){var n=new e.constructor;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r],a=void 0===o?"undefined":s(o);"parent"===r&&"object"===a?i&&(n[r]=i):"source"===r?n[r]=o:o instanceof Array?n[r]=o.map(function(e){return t(e,n)}):"before"!==r&&"after"!==r&&"between"!==r&&"semicolon"!==r&&("object"===a&&null!==o&&(o=t(o)),n[r]=o)}return n},_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,t),this.raws={},"object"!==(void 0===e?"undefined":s(e))&&void 0!==e)throw new Error("PostCSS nodes constructor accepts object, not "+JSON.stringify(e));for(var i in e)this[i]=e[i]}return t.prototype.error=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var i=this.positionBy(e);return this.source.input.error(t,i.line,i.column,e)}return new l.default(t)},t.prototype.warn=function(t,e,i){var n={node:this};for(var r in i)n[r]=i[r];return t.warn(e,n)},t.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},t.prototype.toString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default;t.stringify&&(t=t.stringify);var e="";return t(this,function(t){e+=t}),e},t.prototype.clone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=g(this);for(var i in t)e[i]=t[i];return e},t.prototype.cloneBefore=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.clone(t);return this.parent.insertBefore(this,e),e},t.prototype.cloneAfter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.clone(t);return this.parent.insertAfter(this,e),e},t.prototype.replaceWith=function(){if(this.parent){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=e,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=s;this.parent.insertBefore(this,a)}this.remove()}return this},t.prototype.moveTo=function(t){return this.cleanRaws(this.root()===t.root()),this.remove(),t.append(this),this},t.prototype.moveBefore=function(t){return this.cleanRaws(this.root()===t.root()),this.remove(),t.parent.insertBefore(t,this),this},t.prototype.moveAfter=function(t){return this.cleanRaws(this.root()===t.root()),this.remove(),t.parent.insertAfter(t,this),this},t.prototype.next=function(){var t=this.parent.index(this);return this.parent.nodes[t+1]},t.prototype.prev=function(){var t=this.parent.index(this);return this.parent.nodes[t-1]},t.prototype.toJSON=function(){var t={};for(var e in this)if(this.hasOwnProperty(e)&&"parent"!==e){var i=this[e];i instanceof Array?t[e]=i.map(function(t){return"object"===(void 0===t?"undefined":s(t))&&t.toJSON?t.toJSON():t}):"object"===(void 0===i?"undefined":s(i))&&i.toJSON?t[e]=i.toJSON():t[e]=i}return t},t.prototype.raw=function(t,e){return(new c.default).raw(this,t,e)},t.prototype.root=function(){for(var t=this;t.parent;)t=t.parent;return t},t.prototype.cleanRaws=function(t){delete this.raws.before,delete this.raws.after,t||delete this.raws.between},t.prototype.positionInside=function(t){for(var e=this.toString(),i=this.source.start.column,n=this.source.start.line,r=0;r<t;r++)"\n"===e[r]?(i=1,n+=1):i+=1;return{line:n,column:i}},t.prototype.positionBy=function(t){var e=this.source.start;if(t.index)e=this.positionInside(t.index);else if(t.word){var i=this.toString().indexOf(t.word);-1!==i&&(e=this.positionInside(i))}return e},t.prototype.removeSelf=function(){return(0,f.default)("Node#removeSelf is deprecated. Use Node#remove."),this.remove()},t.prototype.replace=function(t){return(0,f.default)("Node#replace is deprecated. Use Node#replaceWith"),this.replaceWith(t)},t.prototype.style=function(t,e){return(0,f.default)("Node#style() is deprecated. Use Node#raw()"),this.raw(t,e)},t.prototype.cleanStyles=function(t){return(0,f.default)("Node#cleanStyles() is deprecated. Use Node#cleanRaws()"),this.cleanRaws(t)},o(t,[{key:"before",get:function(){return(0,f.default)("Node#before is deprecated. Use Node#raws.before"),this.raws.before},set:function(t){(0,f.default)("Node#before is deprecated. Use Node#raws.before"),this.raws.before=t}},{key:"between",get:function(){return(0,f.default)("Node#between is deprecated. Use Node#raws.between"),this.raws.between},set:function(t){(0,f.default)("Node#between is deprecated. Use Node#raws.between"),this.raws.between=t}}]),t}();e.default=_,t.exports=e.default},126:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(82),h=n(l),c=i(22),d=n(c),u=i(743),p=n(u),f=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.type="rule",n.nodes||(n.nodes=[]),n}return s(e,t),a(e,[{key:"selectors",get:function(){return p.default.comma(this.selector)},set:function(t){var e=this.selector?this.selector.match(/,\s*/):null,i=e?e[0]:","+this.raw("between","beforeOpen");this.selector=t.join(i)}},{key:"_selector",get:function(){return(0,d.default)("Rule#_selector is deprecated. Use Rule#raws.selector"),this.raws.selector},set:function(t){(0,d.default)("Rule#_selector is deprecated. Use Rule#raws.selector"),this.raws.selector=t}}]),e}(h.default);e.default=f,t.exports=e.default},127:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return t[0].toUpperCase()+t.slice(1)}e.__esModule=!0;var o={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" "},s=function(){function t(e){n(this,t),this.builder=e}return t.prototype.stringify=function(t,e){this[t.type](t,e)},t.prototype.root=function(t){this.body(t),t.raws.after&&this.builder(t.raws.after)},t.prototype.comment=function(t){var e=this.raw(t,"left","commentLeft"),i=this.raw(t,"right","commentRight");this.builder("/*"+e+t.text+i+"*/",t)},t.prototype.decl=function(t,e){var i=this.raw(t,"between","colon"),n=t.prop+i+this.rawValue(t,"value");t.important&&(n+=t.raws.important||" !important"),e&&(n+=";"),this.builder(n,t)},t.prototype.rule=function(t){this.block(t,this.rawValue(t,"selector"))},t.prototype.atrule=function(t,e){var i="@"+t.name,n=t.params?this.rawValue(t,"params"):"";if(void 0!==t.raws.afterName?i+=t.raws.afterName:n&&(i+=" "),t.nodes)this.block(t,i+n);else{var r=(t.raws.between||"")+(e?";":"");this.builder(i+n+r,t)}},t.prototype.body=function(t){for(var e=t.nodes.length-1;e>0&&"comment"===t.nodes[e].type;)e-=1;for(var i=this.raw(t,"semicolon"),n=0;n<t.nodes.length;n++){var r=t.nodes[n],o=this.raw(r,"before");o&&this.builder(o),this.stringify(r,e!==n||i)}},t.prototype.block=function(t,e){var i=this.raw(t,"between","beforeOpen");this.builder(e+i+"{",t,"start");var n=void 0;t.nodes&&t.nodes.length?(this.body(t),n=this.raw(t,"after")):n=this.raw(t,"after","emptyBody"),n&&this.builder(n),this.builder("}",t,"end")},t.prototype.raw=function(t,e,i){var n=void 0;if(i||(i=e),e&&void 0!==(n=t.raws[e]))return n;var s=t.parent;if("before"===i&&(!s||"root"===s.type&&s.first===t))return"";if(!s)return o[i];var a=t.root();if(a.rawCache||(a.rawCache={}),void 0!==a.rawCache[i])return a.rawCache[i];if("before"===i||"after"===i)return this.beforeAfter(t,i);var l="raw"+r(i);return this[l]?n=this[l](a,t):a.walk(function(t){if(void 0!==(n=t.raws[e]))return!1}),void 0===n&&(n=o[i]),a.rawCache[i]=n,n},t.prototype.rawSemicolon=function(t){var e=void 0;return t.walk(function(t){if(t.nodes&&t.nodes.length&&"decl"===t.last.type&&void 0!==(e=t.raws.semicolon))return!1}),e},t.prototype.rawEmptyBody=function(t){var e=void 0;return t.walk(function(t){if(t.nodes&&0===t.nodes.length&&void 0!==(e=t.raws.after))return!1}),e},t.prototype.rawIndent=function(t){if(t.raws.indent)return t.raws.indent;var e=void 0;return t.walk(function(i){var n=i.parent;if(n&&n!==t&&n.parent&&n.parent===t&&void 0!==i.raws.before){var r=i.raws.before.split("\n");return e=r[r.length-1],e=e.replace(/[^\s]/g,""),!1}}),e},t.prototype.rawBeforeComment=function(t,e){var i=void 0;return t.walkComments(function(t){if(void 0!==t.raws.before)return i=t.raws.before,-1!==i.indexOf("\n")&&(i=i.replace(/[^\n]+$/,"")),!1}),void 0===i&&(i=this.raw(e,null,"beforeDecl")),i},t.prototype.rawBeforeDecl=function(t,e){var i=void 0;return t.walkDecls(function(t){if(void 0!==t.raws.before)return i=t.raws.before,-1!==i.indexOf("\n")&&(i=i.replace(/[^\n]+$/,"")),!1}),void 0===i&&(i=this.raw(e,null,"beforeRule")),i},t.prototype.rawBeforeRule=function(t){var e=void 0;return t.walk(function(i){if(i.nodes&&(i.parent!==t||t.first!==i)&&void 0!==i.raws.before)return e=i.raws.before,-1!==e.indexOf("\n")&&(e=e.replace(/[^\n]+$/,"")),!1}),e},t.prototype.rawBeforeClose=function(t){var e=void 0;return t.walk(function(t){if(t.nodes&&t.nodes.length>0&&void 0!==t.raws.after)return e=t.raws.after,-1!==e.indexOf("\n")&&(e=e.replace(/[^\n]+$/,"")),!1}),e},t.prototype.rawBeforeOpen=function(t){var e=void 0;return t.walk(function(t){if("decl"!==t.type&&void 0!==(e=t.raws.between))return!1}),e},t.prototype.rawColon=function(t){var e=void 0;return t.walkDecls(function(t){if(void 0!==t.raws.between)return e=t.raws.between.replace(/[^\s:]/g,""),!1}),e},t.prototype.beforeAfter=function(t,e){var i=void 0;i="decl"===t.type?this.raw(t,null,"beforeDecl"):"comment"===t.type?this.raw(t,null,"beforeComment"):"before"===e?this.raw(t,null,"beforeRule"):this.raw(t,null,"beforeClose");for(var n=t.parent,r=0;n&&"root"!==n.type;)r+=1,n=n.parent;if(-1!==i.indexOf("\n")){var o=this.raw(t,null,"indent");if(o.length)for(var s=0;s<r;s++)i+=o}return i},t.prototype.rawValue=function(t,e){var i=t[e],n=t.raws[e];return n&&n.value===i?n.raw:i},t}();e.default=s,t.exports=e.default},133:function(t,e,i){var n=i(953),r=i(0);t.exports={getURLFromState:function(t){var e=new n(this.getLocalURL());if(e.removeQuery("state"),!r.isEmpty(t)){var i=JSON.stringify(t);e.setQuery("state",i)}return e.toString()},getStateFromCurrentURL:function(){var t=this.getLocalURL();return this.getStateFromURL(t)},getStateFromURL:function(t){var e,i=new n(t),o={};return i.hasQuery("state")&&(e=i.query(!0).state,r.isEmpty(e)||(o=JSON.parse(decodeURIComponent(e)))),o},getLocalURL:r.constant(window.location.href)}},21:function(t,e,i){var n=i(0),r=i(35),o=i(4),s={second:{display:"HH:mm:ss",unit:"s"},minute:{display:"HH:mm - MMM Do, YYYY",unit:"m"},hour:{display:"HH:00 - MMM Do, YYYY",unit:"h"},day:{display:"MMM Do, YYYY",unit:"d"},week:{display:"MMM Do, YYYY",unit:"w"},month:{display:"MMM YYYY",unit:"M"},quarter:{display:"[Q]Q YYYY",unit:"Q"},year:{display:"YYYY",unit:"y"}},a={};a.formatNumber=function(t,e){if(!n.isNumber(t)||0===t)return t;var i=r.format(".2s"),o=0,s=Math.abs(t);if(t>1e3)return t=i(t)+(e?" "+e:"");s>100?o=0:s>10?o=1:s>1?o=2:s>0&&(o=Math.max(Math.ceil(Math.abs(Math.log(s)/Math.log(10)))+2,3)),t=t.toFixed(o);var a=t.match(/(\.0+)$/);return a&&(t=t.replace(a[0],"")),t},a.formatDate=function(t){return r.time.format("%Y-%m-%d")(t)},a.formatTime=function(t){return r.time.format("%H:%M:%S %d/%m/%Y")(t)},a.timeFactory=function(t){return r.time.format(t)},a.formatValue=function(t){return n.isNumber(t)?a.formatNumber(t):n.isDate(t)?a.formatDate(t):t},a.timestampFactory=function(t,e){return function(i){if(!n.has(s,t))return"-";var r=s[t],a=o.unix(i).utc();return n.isFinite(e)&&a.utcOffset(e/60),a.format(r.display)}},t.exports=a},22:function(t,e,i){"use strict";function n(t){r[t]||(r[t]=!0,"undefined"!=typeof console&&console.warn&&console.warn(t))}e.__esModule=!0,e.default=n;var r={};t.exports=e.default},296:function(t,e,i){"use strict";t.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g}},297:function(t,e){t.exports=function(t,e,i){return e.split(".").reduce(function(t,e){return(t||{})[e]},t)||i}},298:function(t,e,i){var n=i(6),r=i(299),o=i(666),s=i(297),a=n.core.Model.extend({initialize:function(t,e,i){this.options=i||{},this.styles=i&&i.auto_style,this.dataviewModel=t,this.colors=new o(this.styles),this.layer=e},getStyle:function(){var t=this.layer.get("initialStyle");if(t)return a.FILL_SELECTORS.forEach(function(e){t=r.changeStyle(t,e,this._getFillColor(e))}.bind(this)),a.OPACITY_SELECTORS.forEach(function(e){t=r.changeStyle(t,e,this._getOpacity())}.bind(this)),r.replaceWrongSpaceChar(t)},_getColor:function(){return s(this.styles,"definition.color")},_getOpacity:function(){return s(this.styles,"definition.color.opacity")}});a.FILL_SELECTORS=["marker-fill","polygon-fill","line-color"],a.OPACITY_SELECTORS=["marker-fill-opacity","polygon-opacity","line-opacity"],t.exports=a},299:function(t,e,i){function n(t){return d().use(u).process(t,{syntax:p})}function r(t,e){var i=n(t),r=i.result.root,a=!1;return r&&r.walkDecls(e,function(t){var e=t.parent;o(e)&&!s(e)||(a=!0)}),a}function o(t){return"rule"===t.type&&-1!==t.selector.search(/\[(.)+\]/g)}function s(t){return o(t)&&-1!==t.selector.search("mapnik::geometry_type")}function a(t){return"rule"===t.type&&-1!==t.selector.search("::outline")}function l(t){return t.replace(new RegExp(String.fromCharCode(160),"g")," ")}function h(t,e,i){if(c.isUndefined(i))return t;var r=n(t),s=r.result.root,l=!1;return s?(s.walkDecls(e,function(t){var n=t.parent;a(n)&&c.contains(f,e)||(o(n)||l?t.remove():(t.value=i,l=!0))}),r.css):t}var c=i(0),d=i(96),u=i(750),p=i(741),f=["line-color","line-opacity"];t.exports={changeStyle:c.memoize(h,function(t,e,i){return t+e+i}),isPropertyIncluded:r,replaceWrongSpaceChar:l}},300:function(t,e,i){var n=i(3),r=i(0),o=i(6),s=i(672),a=i(341);t.exports=o.core.View.extend({options:{paginator:!1,itemsPerPage:6},className:"CDB-Widget-list CDB-Widget-list--wrapped js-list",tagName:"ul",initialize:function(){this.widgetModel=this.options.widgetModel,this.dataviewModel=this.options.dataviewModel,this.dataviewModel.get("sync_on_bbox_change")||this.$el.addClass("CDB-Widget-list--nodynamic"),this._initBinds()},render:function(){this.clearSubViews(),this.$el.empty();var t=this.dataviewModel.getData();return r.isEmpty(t)||0===r.size(t)?this._renderPlaceholder():this._renderList(),this},_initBinds:function(){this.widgetModel.bind("change:search",this.toggle,this),this.widgetModel.bind("change:autoStyle",this.render,this),this.widgetModel.bind("change:style",this.render,this),this.add_related_model(this.widgetModel),this.dataviewModel.bind("change:data",this.render,this),this.dataviewModel.bind("change:sync_on_bbox_change",this.blockFiltering,this),this.add_related_model(this.dataviewModel)},_renderPlaceholder:function(){this.$el.addClass("CDB-Widget-list--withBorders CDB-Widget-list--fake").removeClass("CDB-Widget-list--wrapped"),this.$el.append(a())},_renderList:function(){this.$el.removeClass("CDB-Widget-list--withBorders CDB-Widget-list--fake"),this.$el[this.options.paginator?"addClass":"removeClass"]("CDB-Widget-list--wrapped");var t;this.dataviewModel.getData().each(function(e,i){i%this.options.itemsPerPage==0&&(t=n("<div>").addClass("CDB-Widget-listGroup"),this.$el.append(t)),this._addItem(e,t)},this)},_addItem:function(t,e){var i=new s({model:t,widgetModel:this.widgetModel,dataviewModel:this.dataviewModel});i.bind("itemClicked",this._setFilters,this),this.addView(i),e.append(i.render().el)},_setFilters:function(t){var e=t.get("selected"),i=this.dataviewModel.filter,n=t.get("name");if(e)if(0===i.rejectedCategories.size()&&0===i.acceptedCategories.size()){var r=this.dataviewModel.getData();r.each(function(t){t.get("name")!==n&&t.set("selected",!1)}),i.accept(t.get("name"))}else t.set("selected",!1),i.reject(n);else t.set("selected",!0),i.accept(n);this.widgetModel.set("acceptedCategories",this.widgetModel._acceptedCategories().pluck("name"))},blockFiltering:function(t){t.changed.sync_on_bbox_change?this.$el.removeClass("CDB-Widget-list--nodynamic"):(this.$el.addClass("CDB-Widget-list--nodynamic"),this.dataviewModel.filter.acceptAll())},removeSelections:function(){this.dataviewModel.filter.acceptAll()},toggle:function(){this[this.widgetModel.isSearchEnabled()?"hide":"show"]()},show:function(){this.$el.removeClass("is-hidden")},hide:function(){this.$el.addClass("is-hidden")}})},301:function(t,e,i){var n=i(3),r=i(0),o=i(6),s=i(928);t.exports=o.core.View.extend({options:{itemsPerPage:6,template:s,paginator:!1},className:"CDB-Widget-nav CDB-Widget-contentSpaced",events:{"click .js-searchToggle":"_onSearchClicked","click .js-page":"_onDotClick"},initialize:function(){this.dataviewModel=this.options.dataviewModel,this.widgetModel=this.options.widgetModel,this._$target=this.options.$target,this.model=new o.core.Model({page:0}),this._initBinds()},render:function(){this.clearSubViews(),this.$el.empty();var t=this.dataviewModel.getCount(),e="ontouchstart"in window;if(t>5){var i=Math.ceil(this.dataviewModel.getSize()/this.options.itemsPerPage),n=this.options.template;this.$el.html(n({showSearch:!e,showPaginator:this.options.paginator,currentPage:this.model.get("page"),categoriesCount:t,pages:i}))}else this.model.set("page",0);return this._scrollToPage(),this},_initBinds:function(){n(window).bind("resize."+this.cid,r.bind(this._scrollToPage,this)),this.model.bind("change:page",this.render,this),this.dataviewModel.bind("change:categoriesCount",this.render,this),this.dataviewModel.bind("change:data change:searchData",function(){this._setPage(),this.render()},this),this.widgetModel.bind("change:search",this.toggle,this),this.add_related_model(this.dataviewModel),this.add_related_model(this.widgetModel)},_setPage:function(){var t=this.dataviewModel.getSize(),e=Math.ceil(t/this._ITEMS_PER_PAGE);this.model.get("page")>e-1&&this.model.set({page:0},{silent:!0})},_onSearchClicked:function(){this.widgetModel.setupSearch()},_scrollToPage:function(){var t=this.model.get("page"),e=this._$target.find(".CDB-Widget-listGroup").first().outerWidth();this._$target.css("margin-left",-t*e)},_onDotClick:function(t){var e=n(t.target).data("page");this.model.set("page",e)},toggle:function(){this[this.widgetModel.isSearchEnabled()?"hide":"show"]()},hide:function(){this.$el.addClass("is-hidden")},show:function(){this.$el.removeClass("is-hidden")},clean:function(){n(window).unbind("resize."+this.cid),o.core.View.prototype.clean.call(this)}})},302:function(t,e,i){var n=i(3),r=i(0),o=i(35),s=i(703),a=i(6),l=i(789),h=i(21),c=i(664),d=i(114),u=function(t,e,i,n,r,o,s){var a=o+1*s;return"M "+t+" "+e+" L "+i+" "+n+" C "+(r+.1)+" "+a+" "+(r-.1)+" "+a+" "+t+" "+e+" z"};t.exports=a.core.View.extend({options:{showOnWidthChange:!0,chartBarColor:"#F2CC8F",labelsMargin:16,hasAxisTip:!1,minimumBarHeight:2,animationSpeed:750,handleWidth:8,handleRadius:3,divisionWidth:80,animationBarDelay:function(t,e){return Math.random()*(100+10*e)},transitionType:"elastic"},initialize:function(){if(this._originalData=this.options.originalData,!r.isNumber(this.options.height))throw new Error("height is required");if(!this.options.dataviewModel)throw new Error("dataviewModel is required");if(!this.options.layerModel)throw new Error("layerModel is required");if(!this.options.type)throw new Error("type is required");r.bindAll(this,"_selectBars","_adjustBrushHandles","_onBrushMove","_onBrushEnd","_onMouseMove","_onMouseOut"),this.forceResize=r.debounce(this._resizeToParentElement.bind(this),50),this.setElement(n('<svg class=""></svg>')[0]),this._widgetModel=this.options.widgetModel,this._dataviewModel=this.options.dataviewModel,this._layerModel=this.options.layerModel,this.canvas=o.select(this.el).style("overflow","visible").attr("width",0).attr("height",this.options.height),this.canvas.append("g").attr("class","CDB-WidgetCanvas"),this._setupModel(),this._setupBindings(),this._setupDimensions(),this._setupD3Bindings(),this._setupFillColor(),this.hide(),this._tooltipFormatter=h.formatNumber,this._createFormatter()},render:function(){return this._generateChart(),this._generateChartContent(),this},replaceData:function(t){this.model.set({data:t})},toggleLabels:function(t){this.model.set("showLabels",t)},chartWidth:function(){var t=this.model.get("margin");return Math.max(0,this.model.get("width")-t.left-t.right)},chartHeight:function(){var t=this.model.get("margin"),e=this.model.get("showLabels")?this.options.labelsMargin:0;return this.model.get("height")-t.top-t.bottom-e},getSelectionExtent:function(){if(this.brush&&this.brush.extent()){var t=this.brush.extent();return t[1]-t[0]}return 0},_resizeToParentElement:function(){if(this.$el.parent()){var t=this.isHidden();this.hide();var e=this.$el.parent(),i=e.parent&&e.parent()&&e.parent().length>0?e.parent():null,r=e.width()||0;this.model.get("animated")&&this.$el.siblings().each(function(){r-=n(this).width()}),i&&i.outerWidth&&this._isTabletViewport()&&(r-=i.outerWidth(!0)-i.width()),t?this.hide():this.show(),this.model.set("width",r)}},_onChangeLeftAxisTip:function(){this._updateAxisTip("left")},_onChangeRightAxisTip:function(){this._updateAxisTip("right")},_overlap:function(t,e){var i=t.node().getBoundingClientRect(),n=e.node().getBoundingClientRect();return!(i.right<n.left||i.left>n.right||i.bottom<n.top||i.top>n.bottom)},_updateTriangle:function(t,e,i,n,r){var s=!t||this._isTabletViewport()&&this._isTimeSeries()?1:-1,a=o.transform(e.attr("transform")),l=Math.min(14,r),h=n-l/2,c=t?Math.min(i+r-(h+l),0):Math.abs(Math.min(h-i,0)),d=[0,0],p=[l,0],f=[l/2-c,7*s];e.attr("d",u(d[0],d[1],p[0],p[1],f[0],f[1],s)),a.translate[0]=n-l/2+c,e.attr("transform",a.toString())},_updateAxisTip:function(t){var e=t+"_axis_tip",i="right"===t,n=!i,r="week"===this._dataviewModel.get("aggregation"),s=this.model.get(e);if(void 0!==s){var a=this.model.get("left_axis_tip"),l=this.model.get("right_axis_tip"),h=this.chart.select(".CDB-Chart-axisTipText.CDB-Chart-axisTip-"+t),c=this.chart.select(".CDB-Chart-axisTip.CDB-Chart-axisTip-"+t),d=this.chart.select(".CDB-Chart-axisTipRect.CDB-Chart-axisTip-"+t),u=this.chart.select(".CDB-Chart-handle.CDB-Chart-handle-"+t),p=u.select(".CDB-Chart-axisTipTriangle");if(h.data([s]).text(function(t){var i=this.formatter(t);return this._dataviewModel.trigger("on_update_axis_tip",{attr:e,text:i}),i}.bind(this)),h.node()){var f=h.node().getBBox(),g=f.width,_=g+6,m=this.options.handleWidth,v=this.barWidth,w=this.chartWidth();d.attr("width",_),h.attr("dx",3),h.attr("dy",f.height-Math.abs((f.height-17)/2));var b=o.transform(u.attr("transform")).translate,y=+b[0]+this.options.handleWidth/2,C=!i||this._isMobileViewport()&&this._isTimeSeries()?-26:this.chartHeight()+9.1-1;C=Math.floor(C);var x=_/2,S=(m+v)/2;S-=i?v:0,this._isDateTimeSeries()&&!r||(S=m/2);var M=S-x,B=y+M,D=B+_,k=M+x,T=D-(w+m);B<0&&(M-=B),T>0&&(M-=T);var j=n?a<=l:a<=l&&!(a===l&&this._isDateTimeSeries());this._showAxisTip(t,j),c.attr("transform","translate("+M+", "+C+")"),this._updateTriangle(i,p,M,k,_),this.model.get("dragging")&&this._isMobileViewport()&&this._isTimeSeries()&&this._showAxisTip(t,!0)}}},_onChangeData:function(){this.model.previous("data").length!==this.model.get("data").length?this.reset():this.refresh(),this._setupFillColor(),this._refreshBarsColor()},_onChangeRange:function(){var t=this.model.get("lo_index"),e=this.model.get("hi_index");0===t&&0===e||null===t&&null===e||(this.selectRange(t,e),this._adjustBrushHandles(),this._setAxisTipAccordingToBins(),this._selectBars(),this.trigger("on_brush_end",t,e))},_onChangeWidth:function(){var t=this.model.get("width");this.canvas.attr("width",t),this.chart.attr("width",t),this.options.showOnWidthChange&&t>0&&this.show(),this.reset();var e=this.model.get("lo_index"),i=this.model.get("hi_index");this.selectRange(e,i),this._updateAxisTip("left"),this._updateAxisTip("right")},_onChangeNormalized:function(){this.model.set("show_shadow_bars",!this.model.get("normalized")),this._generateShadowBars(),this.updateYScale(),this.refresh()},_onChangeHeight:function(){var t=this.model.get("height");this.$el.height(t),this.chart.attr("height",t),this.leftHandle.attr("height",t),this.rightHandle.attr("height",t),this.updateYScale(),this.reset()},_onChangeShowLabels:function(){this._axis.style("opacity",this.model.get("showLabels")?1:0)},_onChangePos:function(){var t=this.model.get("pos"),e=this.model.get("margin"),i=+t.x,n=+t.y;this.chart.transition().duration(150).attr("transform","translate("+(e.left+i)+", "+(e.top+n)+")")},_onChangeDragging:function(){this.chart.classed("is-dragging",this.model.get("dragging")),!this.model.get("dragging")&&this._isMobileViewport()&&this._isTimeSeries()&&(this._showAxisTip("right",!1),this._showAxisTip("left",!1))},_toggleAxisTip:function(t,e){var i=this.chart.select(".CDB-Chart-axisTipText.CDB-Chart-axisTip-"+t),n=this.chart.select(".CDB-Chart-axisTipRect.CDB-Chart-axisTip-"+t),r=this.chart.select(".CDB-Chart-handle.CDB-Chart-handle-"+t),o=r.select(".CDB-Chart-axisTipTriangle");i&&i.transition().duration(60).attr("opacity",e),n&&n.transition().duration(60).attr("opacity",e),o&&o.transition().duration(60).style("opacity",e)},_showAxisTip:function(t,e){this._toggleAxisTip(t,e?1:0)},_setAxisTipAccordingToBins:function(){var t=this._getValueFromBinIndex(this._getLoBarIndex()),e=this._getValueFromBinIndex(this._getHiBarIndex());this._isDateTimeSeries()&&(e=c.substractOneUnit(e,this._dataviewModel.get("aggregation"))),this._setAxisTip(t,e)},_setAxisTip:function(t,e){this.options.hasAxisTip&&this.model.set({left_axis_tip:t,right_axis_tip:e})},reset:function(){this._removeChartContent(),this._setupDimensions(),this._calcBarWidth(),this._generateChartContent(),this._generateShadowBars()},refresh:function(){this._createFormatter(),this._setupDimensions(),this._removeAxis(),this._generateAxis(),this._updateChart(),this._refreshBarsColor(),this.chart.select(".CDB-Chart-handles").moveToFront(),this.chart.select(".Brush").moveToFront()},resetIndexes:function(){this.model.set({lo_index:null,hi_index:null})},removeShadowBars:function(){this.model.set("show_shadow_bars",!1)},_removeShadowBars:function(){this.chart.selectAll(".CDB-Chart-shadowBars").remove()},_removeBars:function(){this.chart.selectAll(".CDB-Chart-bars").remove()},_removeBrush:function(){this.chart.selectAll(".Brush").remove(),this.chart.classed("is-selectable",!1),this._axis.classed("is-disabled",!1)},_removeLines:function(){this.chart.select(".CDB-Chart-lines").remove(),this.chart.select(".CDB-Chart-line--bottom").remove()},_removeChartContent:function(){this._removeBrush(),this._removeHandles(),this._removeBars(),this._removeAxis(),this._removeLines()},_generateChartContent:function(){this._generateAxis(),this._isTabletViewport()&&this._isTimeSeries()||this._generateLines(),this._generateBars(),this._isMobileViewport()&&this._isTimeSeries()||this._generateBottomLine(),this._generateHandles(),this._setupBrush()},_generateLines:function(){this._generateHorizontalLines(),this._generateVerticalLines()},_generateVerticalLines:function(){this.chart.select(".CDB-Chart-lines").append("g").selectAll(".CDB-Chart-line").data(this.verticalRange.slice(1,this.verticalRange.length-1)).enter().append("svg:line").attr("class","CDB-Chart-line").attr("y1",0).attr("x1",function(t){return t}).attr("y2",this.chartHeight()).attr("x2",function(t){return t})},_generateHorizontalLines:function(){this.chart.append("g").attr("class","CDB-Chart-lines").append("g").attr("class","y").selectAll(".CDB-Chart-line").data(this.horizontalRange.slice(0,this.horizontalRange.length-1)).enter().append("svg:line").attr("class","CDB-Chart-line").attr("x1",0).attr("y1",function(t){return t}).attr("x2",this.chartWidth()).attr("y2",function(t){return t})},_generateBottomLine:function(){this.chart.append("line").attr("class","CDB-Chart-line CDB-Chart-line--bottom").attr("x1",0).attr("y1",this.chartHeight()-1).attr("x2",this.chartWidth()-1).attr("y2",this.chartHeight()-1)},_setupD3Bindings:function(){o.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})},o.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})}},_setupModel:function(){this.model=new a.core.Model({bounded:!1,showLabels:!0,data:this.options.data,height:this.options.height,display:!0,show_shadow_bars:this.options.displayShadowBars,margin:r.clone(this.options.margin),width:0,pos:{x:0,y:0},normalized:this.options.normalized,local_timezone:this.options.local_timezone})},_setupBindings:function(){this.listenTo(this.model,"change:data",this._onChangeData),this.listenTo(this.model,"change:display",this._onChangeDisplay),this.listenTo(this.model,"change:dragging",this._onChangeDragging),this.listenTo(this.model,"change:height",this._onChangeHeight),this.listenTo(this.model,"change:left_axis_tip",this._onChangeLeftAxisTip),this.listenTo(this.model,"change:lo_index change:hi_index",this._onChangeRange),this.listenTo(this.model,"change:pos",this._onChangePos),this.listenTo(this.model,"change:right_axis_tip",this._onChangeRightAxisTip),this.listenTo(this.model,"change:showLabels",this._onChangeShowLabels),this.listenTo(this.model,"change:show_shadow_bars",this._onChangeShowShadowBars),this.listenTo(this.model,"change:width",this._onChangeWidth),this.listenTo(this.model,"change:normalized",this._onChangeNormalized),this._widgetModel&&(this.listenTo(this._widgetModel,"change:autoStyle",this._refreshBarsColor),this.listenTo(this._widgetModel,"change:style",function(){this._setupFillColor(),this._refreshBarsColor()})),this._dataviewModel&&this.listenTo(this._dataviewModel,"change:offset change:localTimezone",function(){this.refresh()}),this.listenTo(this._layerModel,"change:cartocss",function(){this._areGradientsAlreadyGenerated()||this._setupFillColor()}),this._originalData&&this.listenTo(this._originalData,"change:data",function(){this.updateYScale(),this._removeShadowBars(),this._generateShadowBars()})},_setupDimensions:function(){this._setupScales(),this._setupRanges(),this.forceResize()},_getData:function(){return this._originalData&&this._originalData.getData()||this.model.get("data")},_getMaxData:function(t){return o.max(t,function(t){return r.isEmpty(t)?0:t.freq})},_getXScale:function(){return o.scale.linear().domain([0,100]).range([0,this.chartWidth()])},_getYScale:function(){var t=this.model.get("normalized")?this.model.get("data"):this._getData();return o.scale.linear().domain([0,this._getMaxData(t)]).range([this.chartHeight(),0])},updateXScale:function(){this.xScale=this._getXScale()},updateYScale:function(){this.yScale=this._getYScale()},resetYScale:function(){this.yScale=this._originalYScale},_getDataForScales:function(){return!this.model.get("bounded")&&this._originalData?this._originalData.getData():this.model.get("data")},_setupScales:function(){var t=this._getDataForScales();if(this.updateXScale(),this._originalYScale&&!this.model.get("normalized")||(this._originalYScale=this.yScale=this._getYScale()),t&&t.length){var e=t[0].start,i=t[t.length-1].end;this.xAxisScale=o.scale.linear().range([e,i]).domain([0,this.chartWidth()])}},_setupRanges:function(){this.verticalRange=this._calculateVerticalRangeDivisions(),this.horizontalRange=o.range(0,this.chartHeight()+this.chartHeight()/2,this.chartHeight()/2)},_calculateVerticalRangeDivisions:function(){return this._isDateTimeSeries()&&this.model.get("data").length>0?this._calculateTimelySpacedDivisions():this._calculateEvenlySpacedDivisions()},_calculateTimelySpacedDivisions:function(){this._calcBarWidth();for(var t=Math.round(this.chartWidth()/this.options.divisionWidth),e=Math.ceil(this.model.get("data").length/t),i=[0],n=0,o=0;o<t;o++)n=o<t-1?n+e:this.model.get("data").length,i.push(Math.ceil(this.xAxisScale.invert(this._getValueFromBinIndex(n))));if(i=r.uniq(i),i.length>=3){var s=r.last(i,2);s[1]-s[0]<this.options.divisionWidth&&(i=r.without(i,s[0]))}return i},_calculateEvenlySpacedDivisions:function(){var t=Math.round(this.chartWidth()/this.options.divisionWidth),e=this.chartWidth()/t,i=this.chartWidth()+e;return o.range(0,i,e).slice(0,t+1)},_calcBarWidth:function(){this.barWidth=this.chartWidth()/this.model.get("data").length},_generateChart:function(){var t=this.model.get("margin");this.chart=o.select(this.el).selectAll(".CDB-WidgetCanvas").append("g").attr("class","CDB-Chart").attr("transform","translate("+t.left+", "+t.top+")"),this.chart.classed(this.options.className||"",!0)},_onChangeShowShadowBars:function(){this.model.get("show_shadow_bars")?this._generateShadowBars():this._removeShadowBars()},_onChangeDisplay:function(){this.model.get("display")?this._show():this._hide()},hide:function(){this.model.set("display",!1)},show:function(){this.model.set("display",!0)},_hide:function(){this.$el.hide()},_show:function(){this.$el.show()},isHidden:function(){return!this.model.get("display")},_selectBars:function(){this.chart.selectAll(".CDB-Chart-bar").classed({"is-selected":function(t,e){return this._isBarChartWithinFilter(e)}.bind(this),"is-filtered":function(t,e){return!this._isBarChartWithinFilter(e)}.bind(this)})},_isBarChartWithinFilter:function(t){var e=this.brush.extent(),i=e[0],n=e[1],r=Math.floor(t*this.barWidth),o=Math.floor(r+this.barWidth),s=Math.floor(this.xScale(i)),a=Math.floor(this.xScale(n));return r>s&&r<a||o>s&&o<a||r<=s&&o>=a},_isDragging:function(){return this.model.get("dragging")},setAnimated:function(){return this.model.set("animated",!0)},_isAnimated:function(){return this.model.get("animated")},_move:function(t){this.model.set({pos:t})},expand:function(t){this.canvas.attr("height",this.model.get("height")+t),this._move({x:0,y:t})},contract:function(t){this.canvas.attr("height",t),this._move({x:0,y:0})},resizeHeight:function(t){this.model.set("height",t)},setNormalized:function(t){return this.model.set("normalized",!!t),this},removeSelection:function(){this.resetIndexes(),this.chart.selectAll(".CDB-Chart-bar").classed({"is-selected":!1,"is-filtered":!1}),this._refreshBarsColor(),this._removeBrush(),this._setupBrush()},selectRange:function(t,e){if(t||e){var i=this._dataviewModel.get("data");if(!i[t]||!i[e-1])return this.trigger("on_reset_filter");var n=this._getBarPosition(t),r=this._getBarPosition(e);this.model.set({lo_index:t,hi_index:e}),this._selectRange(n,r)}},_selectRange:function(t,e){this.chart.select(".Brush").transition().duration(this.brush.empty()?0:150).call(this.brush.extent([t,e])).call(this.brush.event)},_getLoBarIndex:function(){var t=this.brush.extent();return Math.round(this.xScale(t[0])/this.barWidth)},_getHiBarIndex:function(){var t=this.brush.extent();return Math.round(this.xScale(t[1])/this.barWidth)},_getBarIndex:function(){var t=o.event.sourceEvent.layerX;return Math.floor(t/this.barWidth)},_getBarPosition:function(t){return t*(100/this.model.get("data").length)},_setupBrush:function(){var t=o.svg.brush().x(this.xScale).on("brush",this._onBrushMove).on("brushend",this._onBrushEnd),e=this.chart.append("g").attr("class","Brush").call(t),i=this._isTabletViewport()&&this._isTimeSeries()?2*this.chartHeight():this.chartHeight();e.selectAll("rect").attr("y",0).attr("height",i),e.selectAll("rect.background").on("mouseout",this._onMouseOut).on("mousemove",this._onMouseMove),e.selectAll("rect").classed("ps-prevent-touchmove",!0),e.selectAll("g").classed("ps-prevent-touchmove",!0),this.brush=t,this.chart.selectAll("g.resize rect").attr("width",this.options.handleWidth).attr("x",-this.options.handleWidth/2)},_onBrushMove:function(){this.brush.empty()||(this.chart.classed("is-selectable",!0),this._axis.classed("is-disabled",!0),this.model.set({dragging:!0}),this._selectBars(),this._setupFillColor(),this._refreshBarsColor(),this._adjustBrushHandles(),this._updateAxisTip("left"),this._updateAxisTip("right"))},_onBrushEnd:function(){var t,e,i=this.model.get("data"),n=this.brush,r=this._getLoBarIndex(),s=this._getHiBarIndex();if(this.model.set({dragging:!1}),n.empty()&&this._isAnimated())return void this.trigger("on_brush_click",n.extent()[0]/100);if(t=this._getBarPosition(r),e=this._getBarPosition(s),o.event.sourceEvent){if(r===s&&(s>=i.length?(r=i.length-1,s=i.length):s+=1),this.model.set({lo_index:r,hi_index:s},{silent:!0}),this.model.trigger("change:lo_index"),o.event.sourceEvent&&void 0===t&&void 0===e){var a=this._getBarIndex();this.model.set({lo_index:a,hi_index:a+1})}this._setupFillColor(),this._refreshBarsColor()}},_onMouseOut:function(){this.chart.selectAll(".CDB-Chart-bar").classed("is-highlighted",!1).attr("fill",this._getFillColor.bind(this)),this.trigger("hover",{target:null})},_onMouseMove:function(){var t=o.event.offsetX-this.model.get("margin").left,e=Math.floor(t/this.barWidth),i=this.model.get("data");if(void 0!==i[e]&&null!==i[e]){var n=i[e].freq,r={},s=this.chart.select(".CDB-Chart-bar:nth-child("+(e+1)+")");if(s&&s.node()&&!s.classed("is-selected")){var a=e*this.barWidth+this.barWidth/2,l=this.yScale(n),h=this.chartHeight()-this.yScale(n);if(h<this.options.minimumBarHeight&&h>0&&(l=this.chartHeight()-this.options.minimumBarHeight),!this._isDragging()&&n>0){var c=this.formatter(n);r={target:s[0][0],top:l,left:a,data:c}}else r=null}else r=null;this.trigger("hover",r),this.chart.selectAll(".CDB-Chart-bar").classed("is-highlighted",!1).attr("fill",this._getFillColor.bind(this)),s&&s.node()&&(s.attr("fill",function(){return this._getHoverFillColor(i[e],e)}.bind(this)),s.classed("is-highlighted",!0))}},_adjustBrushHandles:function(){var t=this.brush.extent(),e=t[0],i=t[1];this._moveHandle(e,"left"),this._moveHandle(i,"right"),this._setAxisTipAccordingToBins()},_moveHandle:function(t,e){var i=this.chart.select(".CDB-Chart-handle-"+e),n=t.toFixed(5),r=this.xScale(n)-this.options.handleWidth/2,o=n>=0&&n<=100?"inline":"none";i.style("display",o).attr("transform","translate("+r+", 0)")},_generateAxisTip:function(t){var e=this.chart.select(".CDB-Chart-handle.CDB-Chart-handle-"+t),i="right"!==t||this._isMobileViewport()&&this._isTimeSeries()?-26:this.chartHeight()+9.1;i=Math.floor(i);var n="right"!==t||this._isMobileViewport()&&this._isTimeSeries()?-11:this.chartHeight()+9.1+2,r="right"===t?-1:1,o=7*r,s=e.selectAll("g").data([""]).enter().append("g").attr("class","CDB-Chart-axisTip CDB-Chart-axisTip-"+t).attr("transform","translate(0,"+i+")");e.append("path").attr("class","CDB-Chart-axisTipRect CDB-Chart-axisTipTriangle").attr("transform","translate("+(this.options.handleWidth/2-7)+", "+n+")").attr("d",u(0,0,14,0,7,o,r)).style("opacity","1"),s.append("rect").attr("class","CDB-Chart-axisTipRect CDB-Chart-axisTip-"+t).attr("rx","2").attr("ry","2").attr("opacity","1").attr("height",17),s.append("text").attr("class","CDB-Text CDB-Size-small CDB-Chart-axisTipText CDB-Chart-axisTip-"+t).attr("dy","11").attr("dx","0").attr("opacity","1").text(function(t){return t})},_isTabletViewport:function(){return d.isTabletViewport()},_generateHandle:function(t){var e=this._isTabletViewport()&&this._isTimeSeries()?2*this.chartHeight():this.chartHeight(),i={width:this.options.handleWidth,height:e,radius:this.options.handleRadius},n=this.chart.select(".CDB-Chart-handles").append("g").attr("class","CDB-Chart-handle CDB-Chart-handle-"+t);if(this.options.hasAxisTip&&this._generateAxisTip(t),this.options.hasHandles){n.append("rect").attr("class","CDB-Chart-handleRect").attr("width",i.width).attr("height",i.height).attr("rx",i.radius).attr("ry",i.radius);var r=this._isTabletViewport()&&this._isTimeSeries()?this.chartHeight():this.chartHeight()/2;r-=3;for(var o=(i.width-2)/2,s=0;s<3;s++)n.append("line").attr("class","CDB-Chart-handleGrip").attr("x1",o).attr("y1",r+3*s).attr("x2",o+2).attr("y2",r+3*s)}return n},_generateHandles:function(){this.chart.append("g").attr("class","CDB-Chart-handles"),this.leftHandle=this._generateHandle("left"),this.rightHandle=this._generateHandle("right")},_removeHandles:function(){this.chart.select(".CDB-Chart-handles").remove()},_removeAxis:function(){this.canvas.select(".CDB-Chart-axis").remove()},_generateAdjustAnchorMethod:function(t){return function(e,i){return 0===i?"start":i===t.length-1?"end":"middle"}},_generateAxis:function(){this._axis=this._generateNumericAxis(),this._onChangeShowLabels()},_generateNumericAxis:function(){function t(t){return e.xAxisScale?e.xAxisScale(t):null}var e=this,i=this._generateAdjustAnchorMethod(this.verticalRange),n=this.chart.append("g").attr("class","CDB-Chart-axis CDB-Text CDB-Size-small");return n.append("g").selectAll(".Label").data(this.verticalRange).enter().append("text").attr("x",function(t){return t}).attr("y",function(){return e.chartHeight()+15}).attr("text-anchor",i).text(function(i){var n=t(i);if(r.isFinite(n))return e.formatter(n)}),n},_getMinValueFromBinIndex:function(t){var e=this.model.get("data"),i=e[t];return i?null!=i.min?i.min:i.start:null},_getMaxValueFromBinIndex:function(t){var e=null,i=this.model.get("data"),n=i[t];return n&&(e=this._isDateTimeSeries()&&!r.isUndefined(n.next)?n.next:null!=n.min?n.max:n.end),e},_getValueFromBinIndex:function(t){if(!r.isNumber(t))return null;var e=null,i=!0,n=this.model.get("data");t>=n.length&&(t=n.length-1,i=!1);var o=n[t];return o&&(e=i?o.start:r.isFinite(o.next)?o.next:o.end),e},_getIndexFromValue:function(t){return r.findIndex(this.model.get("data"),function(e){return e.start<=t&&t<=e.end})},_getMaxFromData:function(){return this.model.get("data").length>0?r.last(this.model.get("data")).end:null},_calculateDataDomain:function(){var t,e,i,n,o=r.clone(this.model.get("data"));if(this._hasFilterApplied()){var s=this._getLoBarIndex(),a=this._getHiBarIndex()-1,l=o.slice(s,a);if(r.isNaN(s)||r.isNaN(a))return[0,0];if(i=this._getMinValueFromBinIndex(s),n=this._getMaxValueFromBinIndex(a),o[s]&&0===o[s].freq&&(t=r.find(l,function(t){return 0!==t.freq},this)),o[a]&&0===o[a].freq){var h=l.reverse();e=r.find(h,function(t){return 0!==t.freq},this)}}else i=this._getMinValueFromBinIndex(0),n=this._getMaxValueFromBinIndex(o.length-1),t=r.find(o,function(t){return 0!==t.freq}),e=r.find(o.reverse(),function(t){return 0!==t.freq});return i=t?null!=t.min?t.min:t.start:i,n=e?null!=e.max?e.max:e.end:n,[i,n]},_removeFillGradients:function(){o.select(this.el).select("defs").remove(),delete this._linearGradients},_areGradientsAlreadyGenerated:function(){return!!this._linearGradients},_generateFillGradients:function(){if(!this._widgetModel||!this._widgetModel.isAutoStyleEnabled())return!1;var t=this._widgetModel.getAutoStyle();if(r.isEmpty(t)||r.isEmpty(t.definition))return!1;var e=this,i=t.definition[Object.keys(t.definition)[0]],n=i&&i.color.range,a=this.model.get("data"),l=s.interpolateRgbBasis(n),h=this._calculateDataDomain(),c=o.scale.linear().domain(h).range([0,1]),d=o.select(this.el).append("defs");this._linearGradients=d.selectAll("linearGradient").data(a).enter().append("linearGradient").attr("id",function(t,i){return this.__scale__=o.scale.linear().range([e._getMinValueFromBinIndex(i),e._getMaxValueFromBinIndex(i)]).domain([0,1]),"bar-"+e.cid+"-"+i}).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%"),this._linearGradients.selectAll("stop").data(o.range(5)).enter().append("stop").attr("offset",function(t,e){return(this.__offset__=Math.floor(e/4*100))+"%"}).attr("stop-color",function(){var t=this.parentNode.__scale__,e=c(t(this.__offset__/100));return l(e)})},_setupFillColor:function(){this._removeFillGradients(),this._generateFillGradients()},_getFillColor:function(t,e){return this._widgetModel?this._widgetModel.isAutoStyle()?this._hasFilterApplied()&&!this._isBarChartWithinFilter(e)?"rgba(0, 0, 0, 0.06)":"url(#bar-"+this.cid+"-"+e+")":this._hasFilterApplied()?this._isBarChartWithinFilter(e)?"#1181FB":"rgba(0, 0, 0, 0.06)":this._widgetModel.getWidgetColor()||this.options.chartBarColor:this.options.chartBarColor},_getHoverFillColor:function(t,e){var i=this._getFillColor(t,e);return this._widgetModel&&this._widgetModel.isAutoStyle()?i:l(i).darken(20).toString()},_updateChart:function(){var t=this,e=this.model.get("data"),i=this.chart.selectAll(".CDB-Chart-bar").data(e);i.enter().append("rect").attr("class","CDB-Chart-bar").attr("fill",this._getFillColor.bind(this)).attr("x",function(e,i){return i*t.barWidth}).attr("y",t.chartHeight()).attr("height",0).attr("width",Math.max(0,this.barWidth-1)),i.transition().duration(200).attr("height",function(e){if(r.isEmpty(e))return 0;if(t._isMobileViewport()&&t._isTimeSeries())return 3;var i=t.chartHeight()-t.yScale(e.freq);return i<t.options.minimumBarHeight&&i>0&&(i=t.options.minimumBarHeight),i}).attr("y",function(e){if(r.isEmpty(e))return t.chartHeight();if(t._isMobileViewport()&&t._isTimeSeries())return t.chartHeight()/2+3;var i=t.chartHeight()-t.yScale(e.freq);return i<t.options.minimumBarHeight&&i>0?t.chartHeight()-t.options.minimumBarHeight:t.yScale(e.freq)}),i.exit().transition().duration(200).attr("height",function(){return 0}).attr("y",function(){return t.chartHeight()})},_refreshBarsColor:function(){this.chart.selectAll(".CDB-Chart-bar").classed("is-highlighted",!1).attr("fill",this._getFillColor.bind(this))},_isMobileViewport:function(){return d.isMobileViewport()},_generateBars:function(){var t=this,e=this.model.get("data");this._calcBarWidth();var i=(2*e.length-1>this.chartWidth()||this._isMobileViewport())&&this._isDateTimeSeries()?0:1,n=this.chart.append("g").attr("transform","translate(0, 0)").attr("class","CDB-Chart-bars").selectAll(".CDB-Chart-bar").data(e);n.enter().append("rect").attr("class","CDB-Chart-bar").attr("fill",this._getFillColor.bind(t)).attr("x",function(e,i){return i*t.barWidth}).attr("y",t.chartHeight()).attr("height",0).attr("data-tooltip",function(e){return t._tooltipFormatter(e.freq)}).attr("width",Math.max(1,this.barWidth-i)),n.transition().ease(this.options.transitionType).duration(this.options.animationSpeed).delay(this.options.animationBarDelay).transition().attr("height",function(e){if(r.isEmpty(e))return 0;if(t._isMobileViewport()&&t._isTimeSeries())return 3;var i=t.chartHeight()-t.yScale(e.freq);return i<t.options.minimumBarHeight&&i>0&&(i=t.options.minimumBarHeight),i}).attr("y",function(e){if(r.isEmpty(e))return t.chartHeight();if(t._isMobileViewport()&&t._isTimeSeries())return t.chartHeight()/2+3;var i=t.chartHeight()-t.yScale(e.freq);return i<t.options.minimumBarHeight&&i>0?t.chartHeight()-t.options.minimumBarHeight:t.yScale(e.freq)})},showShadowBars:function(){this.options.displayShadowBars&&this.model.set("show_shadow_bars",!0)},_generateShadowBars:function(){var t=this._getData();if(!t||!t.length||!this.model.get("show_shadow_bars")||this.model.get("normalized"))return void this._removeShadowBars();this._removeShadowBars();var e=this,i=o.scale.linear().domain([0,this._getMaxData(t)]).range([this.chartHeight(),0]),n=this.chartWidth()/t.length;this.chart.append("g").attr("transform","translate(0, 0)").attr("class","CDB-Chart-shadowBars").selectAll(".CDB-Chart-shadowBar").data(t).enter().append("rect").attr("class","CDB-Chart-shadowBar").attr("x",function(t,e){return e*n}).attr("y",function(t){if(r.isEmpty(t))return e.chartHeight();var n=e.chartHeight()-i(t.freq);return n<e.options.minimumBarHeight&&n>0?e.chartHeight()-e.options.minimumBarHeight:i(t.freq)}).attr("width",Math.max(.5,n-1)).attr("height",function(t){if(r.isEmpty(t))return 0;var n=e.chartHeight()-i(t.freq);return n<e.options.minimumBarHeight&&n>0&&(n=e.options.minimumBarHeight),n}),this.chart.selectAll(".CDB-Chart-shadowBars").moveToBack(),this.chart.selectAll(".CDB-Chart-lines").moveToBack()},_hasFilterApplied:function(){return null!=this.model.get("lo_index")&&null!=this.model.get("hi_index")},_isTimeSeries:function(){return 0===this.options.type.indexOf("time")},_isDateTimeSeries:function(){return"time-date"===this.options.type},_calculateDivisionWithByAggregation:function(t){switch(t){case"year":return 50;case"quarter":case"month":return 80;case"week":case"day":return 120;default:return 140}},_createFormatter:function(){this.formatter=h.formatNumber,this._isDateTimeSeries()&&(this.formatter=h.timestampFactory(this._dataviewModel.get("aggregation"),this._dataviewModel.getCurrentOffset()),this.options.divisionWidth=this._calculateDivisionWithByAggregation(this._dataviewModel.get("aggregation")))},unsetBounds:function(){this.model.set("bounded",!1),this.updateYScale(),this.contract(this.options.height),this.resetIndexes(),this.removeSelection(),this._setupFillColor()},setBounds:function(){this.model.set("bounded",!0),this.updateYScale(),this.expand(4),this.removeShadowBars()}})},303:function(t,e,i){var n=i(6),r=i(3),o=i(302),s=i(114),a=i(40);t.exports=n.core.View.extend({className:"CDB-Chart--histogram",defaults:{histogramChartHeight:72,histogramChartMobileHeight:16},initialize:function(){if(!this.options.dataviewModel)throw new Error("dataviewModel is required");if(!this.options.layerModel)throw new Error("layerModel is required");this._timeSeriesModel=this.options.timeSeriesModel,this._dataviewModel=this.options.dataviewModel,this._layerModel=this.options.layerModel,this._rangeFilter=this.options.rangeFilter,this._originalData=this._dataviewModel.getUnfilteredDataModel(),this._initBinds()},render:function(){return this.clearSubViews(),this._createHistogramView(),this._createTooltipView(),this},selectRange:function(t,e){this._chartView.selectRange(t,e)},resetFilter:function(){this._rangeFilter.unsetRange()},_initBinds:function(){this.listenTo(this._dataviewModel,"change:data",this._onChangeData,this),this.listenTo(this._dataviewModel,"change:column",this.resetFilter,this),this.listenTo(this._timeSeriesModel,"change:normalized",this._onNormalizedChanged),this.listenTo(this._timeSeriesModel,"change:local_timezone",this._onChangeLocalTimezone),this.listenTo(this._timeSeriesModel,"forceResize",this._onForceResize),this.listenTo(this._rangeFilter,"change",this._onFilterChanged)},_createTooltipView:function(){var t=new a({context:this._chartView,event:"hover"});r("body").append(t.render().el),this.addView(t)},_createHistogramView:function(){this._chartView=this._instantiateChartView(),this.addView(this._chartView),this.$el.append(this._chartView.render().el),this._chartView.show(),this.listenTo(this._chartView,"on_brush_end",this._onBrushEnd,this),this.listenTo(this._chartView,"on_reset_filter",this.resetFilter,this),this.listenTo(this._chartView.model,"change:width",this._onChangeChartWidth,this)},_instantiateChartView:function(){return new o({type:this._getChartType(),chartBarColor:this._timeSeriesModel.getWidgetColor()||"#F2CC8F",animationSpeed:100,margin:{top:this._getMarginTop(),right:4,bottom:4,left:this._getMarginLeft()},hasHandles:!0,handleWidth:8,hasAxisTip:!0,animationBarDelay:function(t,e){return 3*e},height:this.defaults.histogramChartHeight,dataviewModel:this._dataviewModel,layerModel:this._layerModel,data:this._dataviewModel.getData(),originalData:this._originalData,displayShadowBars:!this._timeSeriesModel.get("normalized"),normalized:!!this._timeSeriesModel.get("normalized"),widgetModel:this._timeSeriesModel,local_timezone:!!this._timeSeriesModel.get("local_timezone")})},_getChartType:function(){return"time-"+this._dataviewModel.getColumnType()},_onChangeData:function(){this._chartView&&(this._chartView.replaceData(this._dataviewModel.getData()),this._chartView.updateXScale(),this._chartView.updateYScale())},_onBrushEnd:function(t,e){var i=this._dataviewModel.getData();this._rangeFilter.setRange(i[t].start,i[e-1].end),this._timeSeriesModel.set({lo_index:t,hi_index:e})},_onChangeChartWidth:function(){var t=s.isTabletViewport();this._chartView.toggleLabels(!t);var e=t?this.defaults.histogramChartMobileHeight:this.defaults.histogramChartHeight;this._chartView.model.set("height",e)},_onNormalizedChanged:function(){this._chartView&&this._chartView.setNormalized(this._timeSeriesModel.get("normalized"))},_onChangeLocalTimezone:function(){this._dataviewModel.set("localTimezone",this._timeSeriesModel.get("local_timezone"))},_onForceResize:function(){this._chartView.forceResize()},_resetFilterInDI:function(){this._timeSeriesModel.set({min:void 0,max:void 0,lo_index:void 0,hi_index:void 0}),this._chartView.removeSelection()},_onFilterChanged:function(){this._rangeFilter.has("min")||this._rangeFilter.has("max")||this._resetFilterInDI()},_getMarginLeft:function(){return 4},_getMarginTop:function(){return s.isTabletViewport()?0:4}})},304:function(t,e,i){var n=i(6),r=i(35),o=i(3),s=i(942),a=i(21),l=i(77),h=i(940),c=i(40);t.exports=n.core.View.extend({className:"CDB-Widget-contentSpaced CDB-Widget-contentFull",events:{"click .js-clear":"_onClick"},options:{showClearButton:!0},initialize:function(t){if(!t.dataviewModel)throw new Error("dataviewModel is required");if(!t.layerModel)throw new Error("layerModel is required");if(!t.rangeFilter)throw new Error("rangeFilter is required");if(!t.timeSeriesModel)throw new Error("timeSeriesModel is required");if(void 0===t.selectedAmount)throw new Error("selectedAmount is required");this._timeSeriesModel=t.timeSeriesModel,this._dataviewModel=t.dataviewModel,this._rangeFilter=t.rangeFilter,this._selectedAmount=t.selectedAmount,this._layerModel=t.layerModel,this.model=new n.core.Model,this._createFormatter(),this._initBinds()},render:function(){var t=this._timeSeriesModel.get("title"),e=!this._rangeFilter.isEmpty();return this.$el.html(s({start:this.model.get("left_axis_tip")||this.formatter(this._rangeFilter.get("min")),end:this.model.get("right_axis_tip")||this.formatter(this._rangeFilter.get("max")),title:t,showClearButton:this.options.showClearButton&&e,showSelection:e})),this._animateValue(),this._initViews(),this},_initViews:function(){var t=new c({context:this.$el,target:".js-actions"});o("body").append(t.render().el),this.addView(t)},_createFormatter:function(){this.formatter=a.formatNumber,"date"===this._dataviewModel.getColumnType()&&(this.formatter=a.timestampFactory(this._dataviewModel.get("aggregation"),this._dataviewModel.getCurrentOffset()))},_onLocalTimezoneChanged:function(){this._createFormatter(),this.render()},_animateValue:function(){var t=new l({el:this.$el}),e=this._rangeFilter.isEmpty()?"totalAmount":"filteredAmount",i=this._dataviewModel.get(e);t.animateFromValues.call(this,this._selectedAmount,i,".js-val",h,{formatter:a.formatNumber,templateData:{suffix:" Selected"}}),this._selectedAmount=i},_initBinds:function(){this.listenTo(this.model,"change:left_axis_tip change:right_axis_tip",this.render),this.listenTo(this._timeSeriesModel,"change:title",this.render),this.listenTo(this._timeSeriesModel,"change:local_timezone",this._onLocalTimezoneChanged),this.listenTo(this._dataviewModel,"change:totalAmount",this._animateValue),this.listenTo(this._dataviewModel,"on_update_axis_tip",this._onUpdateAxisTip),this.listenTo(this._rangeFilter,"change",this.render)},_onUpdateAxisTip:function(t){this.model.set(t.attr,t.text)},_setupScales:function(){var t=this._dataviewModel.get("data"),e=this._dataviewModel.getColumnType();this._scale="date"===e?r.time.scale().domain([1e3*t[0].start,1e3*t[t.length-1].end]).range([this._dataviewModel.get("start"),this._dataviewModel.get("end")]):r.scale.linear().domain([t[0].start,t[t.length-1].end]).range([this._dataviewModel.get("start"),this._dataviewModel.get("end")])},_onClick:function(){this.trigger("resetFilter",this)}})},305:function(t,e,i){var n=i(0),r=i(694),o=function(t){this.defs=[],n.each(t,function(t){this.addType(t)},this)};o.prototype.DEFAULT_CLASS_NAMES="CDB-Widget CDB-Widget--light",o.prototype.addType=function(t){if(!t.match){if(!t.type)throw new Error("def.type or def.match must be provided for createContentView to work");t.match=function(t){return t.get("type")===this.type}}if(!n.isFunction(t.createContentView))throw new Error("def.createContentView must be a function");this.defs.push(t)},o.prototype.createWidgetView=function(t){var e=n.find(this.defs,function(e){return e.match(t)});if(e){var i={className:this.DEFAULT_CLASS_NAMES,model:t,contentView:e.createContentView(t)};return new r(n.isFunction(e.customizeWidgetAttrs)?e.customizeWidgetAttrs(i):i)}},t.exports=o},306:function(t,e,i){"use strict";(function(e){function n(t){this.enabled=t&&void 0!==t.enabled?t.enabled:c}function r(t){var e=function(){return o.apply(e,arguments)};return e._styles=t,e.enabled=this.enabled,e.__proto__=f,e}function o(){var t=arguments,e=t.length,i=0!==e&&String(arguments[0]);if(e>1)for(var n=1;n<e;n++)i+=" "+t[n];if(!this.enabled||!i)return i;var r=this._styles,o=r.length,s=a.dim.open;for(!u||-1===r.indexOf("gray")&&-1===r.indexOf("grey")||(a.dim.open="");o--;){var l=a[r[o]];i=l.open+i.replace(l.closeRe,l.open)+l.close}return a.dim.open=s,i}var s=i(726),a=i(608),l=i(786),h=i(732),c=i(696),d=Object.defineProperties,u="win32"===e.platform&&!/^xterm/i.test(e.env.TERM);u&&(a.blue.open="[94m");var p=function(){var t={};return Object.keys(a).forEach(function(e){a[e].closeRe=new RegExp(s(a[e].close),"g"),t[e]={get:function(){return r.call(this,this._styles.concat(e))}}}),t}(),f=d(function(){},p);d(n.prototype,function(){var t={};return Object.keys(p).forEach(function(e){t[e]={get:function(){return r.call(this,[e])}}}),t}()),t.exports=new n,t.exports.styles=a,t.exports.hasColor=h,t.exports.stripColor=l,t.exports.supportsColor=c}).call(e,i(97))},308:function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r});var n=Math.PI/180,r=180/Math.PI},309:function(t,e,i){"use strict";var n=i(119);e.a=function(t,e){var r,o=e?e.length:0,s=t?Math.min(o,t.length):0,a=new Array(o),l=new Array(o);for(r=0;r<s;++r)a[r]=i.i(n.a)(t[r],e[r]);for(;r<o;++r)l[r]=e[r];return function(t){for(r=0;r<s;++r)l[r]=a[r](t);return l}}},310:function(t,e,i){"use strict";var n=i(118);e.a=function(t){var e=t.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*e),s=t[(o+e-1)%e],a=t[o%e],l=t[(o+1)%e],h=t[(o+2)%e];return i.i(n.b)((r-o/e)*e,s,a,l,h)}}},311:function(t,e,i){"use strict";e.a=function(t){return function(){return t}}},312:function(t,e,i){"use strict";e.a=function(t,e){var i=new Date;return t=+t,e-=t,function(n){return i.setTime(t+e*n),i}}},313:function(t,e,i){"use strict";var n=i(119);e.a=function(t,e){var r,o={},s={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(r in e)r in t?o[r]=i.i(n.a)(t[r],e[r]):s[r]=e[r];return function(t){for(r in o)s[r]=o[r](t);return s}}},314:function(t,e,i){"use strict";function n(t){return function(e){var n,o,s=e.length,a=new Array(s),l=new Array(s),h=new Array(s);for(n=0;n<s;++n)o=i.i(r.e)(e[n]),a[n]=o.r||0,l[n]=o.g||0,h[n]=o.b||0;return a=t(a),l=t(l),h=t(h),o.opacity=1,function(t){return o.r=a(t),o.g=l(t),o.b=h(t),o+""}}}var r=i(41),o=i(118),s=i(310),a=i(61);i.d(e,"b",function(){return l}),i.d(e,"c",function(){return h}),e.a=function t(e){function n(t,e){var n=o((t=i.i(r.e)(t)).r,(e=i.i(r.e)(e)).r),s=o(t.g,e.g),a=o(t.b,e.b),l=o(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=s(e),t.b=a(e),t.opacity=l(e),t+""}}var o=i.i(a.c)(e);return n.gamma=t,n}(1);var l=n(o.a),h=n(s.a)},315:function(t,e,i){"use strict";function n(t){return function(){return t}}function r(t){return function(e){return t(e)+""}}var o=i(79),s=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(s.source,"g");e.a=function(t,e){var l,h,c,d=s.lastIndex=a.lastIndex=0,u=-1,p=[],f=[];for(t+="",e+="";(l=s.exec(t))&&(h=a.exec(e));)(c=h.index)>d&&(c=e.slice(d,c),p[u]?p[u]+=c:p[++u]=c),(l=l[0])===(h=h[0])?p[u]?p[u]+=h:p[++u]=h:(p[++u]=null,f.push({i:u,x:i.i(o.a)(l,h)})),d=a.lastIndex;return d<e.length&&(c=e.slice(d),p[u]?p[u]+=c:p[++u]=c),p.length<2?f[0]?r(f[0].x):n(e):(e=f.length,function(t){for(var i,n=0;n<e;++n)p[(i=f[n]).i]=i.x(t);return p.join("")})}},316:function(t,e,i){"use strict";var n=i(715),r=i(728),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=function(t){return"function"==typeof t&&"[object Function]"===s.call(t)},l=Object.defineProperty&&function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(t){return!1}}(),h=function(t,e,i,n){(!(e in t)||a(n)&&n())&&(l?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},c=function(t,e){var i=arguments.length>2?arguments[2]:{},s=n(e);o&&(s=s.concat(Object.getOwnPropertySymbols(e))),r(s,function(n){h(t,n,e[n],i[n])})};c.supportsDescriptors=!!l,t.exports=c},317:function(t,e,i){var n=i(120);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},318:function(t,e,i){"use strict";var n=Function.prototype.toString,r=/^\s*class /,o=function(t){try{var e=n.call(t),i=e.replace(/\/\/.*\n/g,""),o=i.replace(/\/\*[.\s\S]*\*\//g,""),s=o.replace(/\n/gm," ").replace(/ {2}/g," ");return r.test(s)}catch(t){return!1}},s=function(t){try{return!o(t)&&(n.call(t),!0)}catch(t){return!1}},a=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return s(t);if(o(t))return!1;var e=a.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},320:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(787),a=n(s),l=i(306),h=n(l),c=i(748),d=n(c),u=i(22),p=n(u),f=function(){function t(e,i,n,o,s,a){r(this,t),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),o&&(this.source=o),a&&(this.plugin=a),void 0!==i&&void 0!==n&&(this.line=i,this.column=n),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},t.prototype.showSourceCode=function(t){function e(e){return t?u.red.bold(e):e}function i(e){return t?u.gray(e):e}var n=this;if(!this.source)return"";var r=this.source;void 0===t&&(t=a.default),t&&(r=(0,d.default)(r));var o=r.split(/\r?\n/),s=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length,u=new h.default.constructor({enabled:!0});return o.slice(s,l).map(function(t,r){var o=s+1+r,a=" "+(" "+o).slice(-c)+" | ";if(o===n.line){var l=i(a.replace(/\d/g," "))+t.slice(0,n.column-1).replace(/[^\t]/g," ");return e(">")+i(a)+t+"\n "+l+e("^")}return" "+i(a)+t}).join("\n")},t.prototype.toString=function(){var t=this.showSourceCode();return t&&(t="\n\n"+t+"\n"),this.name+": "+this.message+t},o(t,[{key:"generated",get:function(){return(0,p.default)("CssSyntaxError#generated is deprecated. Use input instead."),this.input}}]),t}();e.default=f,t.exports=e.default},321:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(22),h=n(l),c=i(125),d=n(c),u=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.type="decl",n}return s(e,t),a(e,[{key:"_value",get:function(){return(0,h.default)("Node#_value was deprecated. Use Node#raws.value"),this.raws.value},set:function(t){(0,h.default)("Node#_value was deprecated. Use Node#raws.value"),this.raws.value=t}},{key:"_important",get:function(){return(0,h.default)("Node#_important was deprecated. Use Node#raws.important"),this.raws.important},set:function(t){(0,h.default)("Node#_important was deprecated. Use Node#raws.important"),this.raws.important=t}}]),e}(d.default);e.default=u,t.exports=e.default},322:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return"object"===(void 0===t?"undefined":a(t))&&"function"==typeof t.then}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=i(744),h=n(l),c=i(326),d=n(c),u=i(22),p=n(u),f=i(747),g=n(f),_=i(323),m=n(_),v=function(){function t(e,i,n){r(this,t),this.stringified=!1,this.processed=!1;var o=void 0;if("object"===(void 0===i?"undefined":a(i))&&"root"===i.type)o=i;else if(i instanceof t||i instanceof g.default)o=i.root,i.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=i.map);else{var s=m.default;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{o=s(i,n)}catch(e){this.error=e}}this.result=new g.default(e,o,n)}return t.prototype.warnings=function(){return this.sync().warnings()},t.prototype.toString=function(){return this.css},t.prototype.then=function(t,e){return this.async().then(t,e)},t.prototype.catch=function(t){return this.async().catch(t)},t.prototype.handleError=function(t,e){try{if(this.error=t,"CssSyntaxError"!==t.name||t.plugin){if(e.postcssVersion){var i=e.postcssPlugin,n=e.postcssVersion,r=this.result.processor.version,o=n.split("."),s=r.split(".");(o[0]!==s[0]||parseInt(o[1])>parseInt(s[1]))&&(0,p.default)("Your current PostCSS version is "+r+", but "+i+" uses "+n+". Perhaps this is the source of the error below.")}}else t.plugin=e.postcssPlugin,t.setMessage()}catch(t){console&&console.error&&console.error(t)}},t.prototype.asyncTick=function(t,e){var i=this;if(this.plugin>=this.processor.plugins.length)return this.processed=!0,t();try{var n=this.processor.plugins[this.plugin],r=this.run(n);this.plugin+=1,o(r)?r.then(function(){i.asyncTick(t,e)}).catch(function(t){i.handleError(t,n),i.processed=!0,e(t)}):this.asyncTick(t,e)}catch(t){this.processed=!0,e(t)}},t.prototype.async=function(){var t=this;return this.processed?new Promise(function(e,i){t.error?i(t.error):e(t.stringify())}):this.processing?this.processing:(this.processing=new Promise(function(e,i){if(t.error)return i(t.error);t.plugin=0,t.asyncTick(e,i)}).then(function(){return t.processed=!0,t.stringify()}),this.processing)},t.prototype.sync=function(){if(this.processed)return this.result;if(this.processed=!0,this.processing)throw new Error("Use process(css).then(cb) to work with async plugins");if(this.error)throw this.error;for(var t=this.result.processor.plugins,e=Array.isArray(t),i=0,t=e?t:t[Symbol.iterator]();;){var n;if(e){if(i>=t.length)break;n=t[i++]}else{if(i=t.next(),i.done)break;n=i.value}var r=n;if(o(this.run(r)))throw new Error("Use process(css).then(cb) to work with async plugins")}return this.result},t.prototype.run=function(t){this.result.lastPlugin=t;try{return t(this.result.root,this.result)}catch(e){throw this.handleError(e,t),e}},t.prototype.stringify=function(){if(this.stringified)return this.result;this.stringified=!0,this.sync();var t=this.result.opts,e=d.default;t.syntax&&(e=t.syntax.stringify),t.stringifier&&(e=t.stringifier),e.stringify&&(e=e.stringify);var i=new h.default(e,this.result.root,this.result.opts),n=i.generate();return this.result.css=n[0],this.result.map=n[1],this.result},s(t,[{key:"processor",get:function(){return this.result.processor}},{key:"opts",get:function(){return this.result.opts}},{key:"css",get:function(){return this.stringify().css}},{key:"content",get:function(){return this.stringify().content}},{key:"map",get:function(){return this.stringify().map}},{key:"root",get:function(){return this.sync().root}},{key:"messages",get:function(){return this.sync().messages}}]),t}();e.default=v,t.exports=e.default},323:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(e&&e.safe)throw new Error('Option safe was removed. Use parser: require("postcss-safe-parser")');var i=new l.default(t,e),n=new s.default(i);try{n.tokenize(),n.loop()}catch(t){throw"CssSyntaxError"===t.name&&e&&e.from&&(/\.scss$/i.test(e.from)?t.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(e.from)?t.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(e.from)&&(t.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),t}return n.root}e.__esModule=!0,e.default=r;var o=i(324),s=n(o),a=i(124),l=n(a);t.exports=e.default},324:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(321),s=n(o),a=i(327),l=n(a),h=i(123),c=n(h),d=i(122),u=n(d),p=i(325),f=n(p),g=i(126),_=n(g),m=function(){function t(e){r(this,t),this.input=e,this.pos=0,this.root=new f.default,this.current=this.root,this.spaces="",this.semicolon=!1,this.root.source={input:e,start:{line:1,column:1}}}return t.prototype.tokenize=function(){this.tokens=(0,l.default)(this.input)},t.prototype.loop=function(){for(var t=void 0;this.pos<this.tokens.length;){switch(t=this.tokens[this.pos],t[0]){case"space":case";":this.spaces+=t[1];break;case"}":this.end(t);break;case"comment":this.comment(t);break;case"at-word":this.atrule(t);break;case"{":this.emptyRule(t);break;default:this.other()}this.pos+=1}this.endFile()},t.prototype.comment=function(t){var e=new c.default;this.init(e,t[2],t[3]),e.source.end={line:t[4],column:t[5]};var i=t[1].slice(2,-2);if(/^\s*$/.test(i))e.text="",e.raws.left=i,e.raws.right="";else{var n=i.match(/^(\s*)([^]*[^\s])(\s*)$/);e.text=n[2],e.raws.left=n[1],e.raws.right=n[3]}},t.prototype.emptyRule=function(t){var e=new _.default;this.init(e,t[2],t[3]),e.selector="",e.raws.between="",this.current=e},t.prototype.other=function(){for(var t=void 0,e=!1,i=null,n=!1,r=null,o=[],s=this.pos;this.pos<this.tokens.length;){if(t=this.tokens[this.pos],"("===(i=t[0])||"["===i)r||(r=t),o.push("("===i?")":"]");else if(0===o.length){if(";"===i){if(n)return void this.decl(this.tokens.slice(s,this.pos+1));break}if("{"===i)return void this.rule(this.tokens.slice(s,this.pos+1));if("}"===i){this.pos-=1,e=!0;break}":"===i&&(n=!0)}else i===o[o.length-1]&&(o.pop(),0===o.length&&(r=null));this.pos+=1}if(this.pos===this.tokens.length&&(this.pos-=1,e=!0),o.length>0&&this.unclosedBracket(r),e&&n){for(;this.pos>s&&("space"===(t=this.tokens[this.pos][0])||"comment"===t);)this.pos-=1;return void this.decl(this.tokens.slice(s,this.pos+1))}this.unknownWord(s)},t.prototype.rule=function(t){t.pop();var e=new _.default;this.init(e,t[0][2],t[0][3]),e.raws.between=this.spacesAndCommentsFromEnd(t),this.raw(e,"selector",t),this.current=e},t.prototype.decl=function(t){var e=new s.default;this.init(e);var i=t[t.length-1];for(";"===i[0]&&(this.semicolon=!0,t.pop()),i[4]?e.source.end={line:i[4],column:i[5]}:e.source.end={line:i[2],column:i[3]};"word"!==t[0][0];)e.raws.before+=t.shift()[1];for(e.source.start={line:t[0][2],column:t[0][3]},e.prop="";t.length;){var n=t[0][0];if(":"===n||"space"===n||"comment"===n)break;e.prop+=t.shift()[1]}e.raws.between="";for(var r=void 0;t.length;){if(r=t.shift(),":"===r[0]){e.raws.between+=r[1];break}e.raws.between+=r[1]}"_"!==e.prop[0]&&"*"!==e.prop[0]||(e.raws.before+=e.prop[0],e.prop=e.prop.slice(1)),e.raws.between+=this.spacesAndCommentsFromStart(t),this.precheckMissedSemicolon(t);for(var o=t.length-1;o>0;o--){if(r=t[o],"!important"===r[1]){e.important=!0;var a=this.stringFrom(t,o);" !important"!==(a=this.spacesFromEnd(t)+a)&&(e.raws.important=a);break}if("important"===r[1]){for(var l=t.slice(0),h="",c=o;c>0;c--){var d=l[c][0];if(0===h.trim().indexOf("!")&&"space"!==d)break;h=l.pop()[1]+h}0===h.trim().indexOf("!")&&(e.important=!0,e.raws.important=h,t=l)}if("space"!==r[0]&&"comment"!==r[0])break}this.raw(e,"value",t),-1!==e.value.indexOf(":")&&this.checkMissedSemicolon(t)},t.prototype.atrule=function(t){var e=new u.default;e.name=t[1].slice(1),""===e.name&&this.unnamedAtrule(e,t),this.init(e,t[2],t[3]);var i=!1,n=!1,r=[];for(this.pos+=1;this.pos<this.tokens.length;){if(t=this.tokens[this.pos],";"===t[0]){e.source.end={line:t[2],column:t[3]},this.semicolon=!0;break}if("{"===t[0]){n=!0;break}if("}"===t[0]){this.end(t);break}r.push(t),this.pos+=1}this.pos===this.tokens.length&&(i=!0),e.raws.between=this.spacesAndCommentsFromEnd(r),r.length?(e.raws.afterName=this.spacesAndCommentsFromStart(r),this.raw(e,"params",r),i&&(t=r[r.length-1],e.source.end={line:t[4],column:t[5]},this.spaces=e.raws.between,e.raws.between="")):(e.raws.afterName="",e.params=""),n&&(e.nodes=[],this.current=e)},t.prototype.end=function(t){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end={line:t[2],column:t[3]},this.current=this.current.parent):this.unexpectedClose(t)},t.prototype.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces},t.prototype.init=function(t,e,i){this.current.push(t),t.source={start:{line:e,column:i},input:this.input},t.raws.before=this.spaces,this.spaces="","comment"!==t.type&&(this.semicolon=!1)},t.prototype.raw=function(t,e,i){for(var n=void 0,r=void 0,o=i.length,s="",a=!0,l=0;l<o;l+=1)n=i[l],r=n[0],"comment"===r||"space"===r&&l===o-1?a=!1:s+=n[1];if(!a){var h=i.reduce(function(t,e){return t+e[1]},"");t.raws[e]={value:s,raw:h}}t[e]=s},t.prototype.spacesAndCommentsFromEnd=function(t){for(var e=void 0,i="";t.length&&("space"===(e=t[t.length-1][0])||"comment"===e);)i=t.pop()[1]+i;return i},t.prototype.spacesAndCommentsFromStart=function(t){for(var e=void 0,i="";t.length&&("space"===(e=t[0][0])||"comment"===e);)i+=t.shift()[1];return i},t.prototype.spacesFromEnd=function(t){for(var e="";t.length&&"space"===t[t.length-1][0];)e=t.pop()[1]+e;return e},t.prototype.stringFrom=function(t,e){for(var i="",n=e;n<t.length;n++)i+=t[n][1];return t.splice(e,t.length-e),i},t.prototype.colon=function(t){for(var e=0,i=void 0,n=void 0,r=void 0,o=0;o<t.length;o++){if(i=t[o],"("===(n=i[0]))e+=1;else if(")"===n)e-=1;else if(0===e&&":"===n){if(r){if("word"===r[0]&&"progid"===r[1])continue;return o}this.doubleColon(i)}r=i}return!1},t.prototype.unclosedBracket=function(t){throw this.input.error("Unclosed bracket",t[2],t[3])},t.prototype.unknownWord=function(t){var e=this.tokens[t];throw this.input.error("Unknown word",e[2],e[3])},t.prototype.unexpectedClose=function(t){throw this.input.error("Unexpected }",t[2],t[3])},t.prototype.unclosedBlock=function(){var t=this.current.source.start;throw this.input.error("Unclosed block",t.line,t.column)},t.prototype.doubleColon=function(t){throw this.input.error("Double colon",t[2],t[3])},t.prototype.unnamedAtrule=function(t,e){throw this.input.error("At-rule without name",e[2],e[3])},t.prototype.precheckMissedSemicolon=function(t){},t.prototype.checkMissedSemicolon=function(t){var e=this.colon(t);if(!1!==e){for(var i=0,n=void 0,r=e-1;r>=0&&(n=t[r],"space"===n[0]||2!==(i+=1));r--);throw this.input.error("Missed semicolon",n[2],n[3])}},t}();e.default=m,t.exports=e.default},325:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(82),l=n(a),h=i(22),c=n(h),d=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.type="root",n.nodes||(n.nodes=[]),n}return s(e,t),e.prototype.removeChild=function(e){return e=this.index(e),0===e&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),t.prototype.removeChild.call(this,e)},e.prototype.normalize=function(e,i,n){var r=t.prototype.normalize.call(this,e);if(i)if("prepend"===n)this.nodes.length>1?i.raws.before=this.nodes[1].raws.before:delete i.raws.before;else if(this.first!==i)for(var o=r,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var h=l;h.raws.before=i.raws.before}return r},e.prototype.toResult=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(i(322))(new(i(746)),this,t).stringify()},e.prototype.remove=function(t){(0,c.default)("Root#remove is deprecated. Use Root#removeChild"),this.removeChild(t)},e.prototype.prevMap=function(){return(0,c.default)("Root#prevMap is deprecated. Use Root#source.input.map"),this.source.input.map},e}(l.default);e.default=d,t.exports=e.default},326:function(t,e,i){"use strict";function n(t,e){new o.default(e).stringify(t)}e.__esModule=!0,e.default=n;var r=i(127),o=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=e.default},327:function(t,e,i){"use strict";function n(t){function e(e){throw t.error("Unclosed "+e,P,$-O)}for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],B=t.css.valueOf(),D=i.ignoreErrors,k=void 0,T=void 0,j=void 0,A=void 0,z=void 0,E=void 0,F=void 0,V=void 0,L=void 0,W=void 0,I=void 0,R=void 0,q=void 0,N=B.length,O=-1,P=1,$=0;$<N;){switch(k=B.charCodeAt($),(k===l||k===c||k===u&&B.charCodeAt($+1)!==l)&&(O=$,P+=1),k){case l:case h:case d:case u:case c:T=$;do{T+=1,(k=B.charCodeAt(T))===l&&(O=T,P+=1)}while(k===h||k===l||k===d||k===u||k===c);n.push(["space",B.slice($,T)]),$=T-1;break;case p:n.push(["[","[",P,$-O]);break;case f:n.push(["]","]",P,$-O]);break;case m:n.push(["{","{",P,$-O]);break;case v:n.push(["}","}",P,$-O]);break;case y:n.push([":",":",P,$-O]);break;case w:n.push([";",";",P,$-O]);break;case g:if(R=n.length?n[n.length-1][1]:"",q=B.charCodeAt($+1),"url"===R&&q!==r&&q!==o&&q!==h&&q!==l&&q!==d&&q!==c&&q!==u){T=$;do{if(W=!1,-1===(T=B.indexOf(")",T+1))){if(D){T=$;break}e("bracket")}for(I=T;B.charCodeAt(I-1)===s;)I-=1,W=!W}while(W);n.push(["brackets",B.slice($,T+1),P,$-O,P,T-O]),$=T}else T=B.indexOf(")",$+1),E=B.slice($,T+1),-1===T||M.test(E)?n.push(["(","(",P,$-O]):(n.push(["brackets",E,P,$-O,P,T-O]),$=T);break;case _:n.push([")",")",P,$-O]);break;case r:case o:j=k===r?"'":'"',T=$;do{if(W=!1,-1===(T=B.indexOf(j,T+1))){if(D){T=$+1;break}e("string")}for(I=T;B.charCodeAt(I-1)===s;)I-=1,W=!W}while(W);E=B.slice($,T+1),A=E.split("\n"),z=A.length-1,z>0?(V=P+z,L=T-A[z].length):(V=P,L=O),n.push(["string",B.slice($,T+1),P,$-O,V,T-L]),O=L,P=V,$=T;break;case C:x.lastIndex=$+1,x.test(B),T=0===x.lastIndex?B.length-1:x.lastIndex-2,n.push(["at-word",B.slice($,T+1),P,$-O,P,T-O]),$=T;break;case s:for(T=$,F=!0;B.charCodeAt(T+1)===s;)T+=1,F=!F;k=B.charCodeAt(T+1),F&&k!==a&&k!==h&&k!==l&&k!==d&&k!==u&&k!==c&&(T+=1),n.push(["word",B.slice($,T+1),P,$-O,P,T-O]),$=T;break;default:k===a&&B.charCodeAt($+1)===b?(T=B.indexOf("*/",$+2)+1,0===T&&(D?T=B.length:e("comment")),E=B.slice($,T+1),A=E.split("\n"),z=A.length-1,z>0?(V=P+z,L=T-A[z].length):(V=P,L=O),n.push(["comment",E,P,$-O,V,T-L]),O=L,P=V,$=T):(S.lastIndex=$+1,S.test(B),T=0===S.lastIndex?B.length-1:S.lastIndex-2,n.push(["word",B.slice($,T+1),P,$-O,P,T-O]),$=T)}$++}return n}e.__esModule=!0,e.default=n;var r=39,o=34,s=92,a=47,l=10,h=32,c=12,d=9,u=13,p=91,f=93,g=40,_=41,m=123,v=125,w=59,b=42,y=58,C=64,x=/[ \n\t\r\f\{\(\)'"\\;\/\[\]#]/g,S=/[ \n\t\r\f\(\)\{\}:;@!'"\\\]\[#]|\/(?=\*)/g,M=/.[\\\/\("'\n]/;t.exports=e.default},333:function(t,e,i){"use strict";var n=i(120),r=i(719),o=n.call(Function.call,String.prototype.replace),s=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=r.ToString(r.CheckObjectCoercible(this));return o(o(t,s,""),a,"")}},334:function(t,e,i){"use strict";var n=i(333),r="​";t.exports=function(){return String.prototype.trim&&r.trim()===r?String.prototype.trim:n}},341:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<li class="CDB-Widget-listItem CDB-Widget-listItem--fake"></li>\n<li class="CDB-Widget-listItem CDB-Widget-listItem--fake"></li>\n<li class="CDB-Widget-listItem CDB-Widget-listItem--fake"></li>\n<li class="CDB-Widget-listItem CDB-Widget-listItem--fake"></li>\n';return __p}},342:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj){__p+='<ul class="CDB-Widget-chart CDB-Widget-chart--fake">\n  ';for(var i=0;i<15;i++)__p+='\n  <li class="CDB-Widget-chartItem CDB-Widget-chartItem--'+__e(_.sample(["small","medium","big"],1)[0])+' CDB-Widget-chartItem--fake"></li>\n  ';__p+="\n</ul>\n"}return __p}},343:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj){__p+='<div class="CDB-Widget-header CDB-Widget-header--timeSeries">\n  <div class="CDB-Widget-timeSeriesTimeInfo CDB-Widget-timeSeriesTimeInfo--fake"></div>\n</div>\n<div class="CDB-Widget-content CDB-Widget-content--',hasTorqueLayer?__p+="torqueTimeSeries":__p+="timeSeries",__p+=' u-flex u-alignCenter">\n  ',hasTorqueLayer&&(__p+='\n    <div class="CDB-Widget-timeSeriesFakeControl"></div>\n  '),__p+='\n  <div class="CDB-Widget-timeSeriesFakeChart ',hasTorqueLayer&&(__p+="CDB-Widget-timeSeriesFakeChart--torque"),__p+='">\n    ';for(var i=0;i<50;i++)__p+='\n      <div class="CDB-Widget-timeSeriesFakeChartItem" style="height: '+__e(Math.floor(100*Math.random()))+'%"></div>\n    ';__p+="\n  </div>\n</div>\n"}return __p}},355:function(t,e,i){t.exports={VERSION:i(653).version,createDashboard:i(654)}},40:function(t,e,i){var n=i(6),r=i(3),o=i(656);t.exports=n.core.View.extend({className:"CDB-Widget-tooltip CDB-Widget-tooltip--light CDB-Text CDB-Size-small",options:{attribute:"data-tooltip"},initialize:function(t){if(!t.context)throw new Error("context must be defined.");this.hide=this.hide.bind(this),this.show=this.show.bind(this),this._$context=t.context,this._target=t.target,this._initBinds()},_initBinds:function(){this.options.event?this._$context.on(this.options.event,this.show):(this._$context.on("mouseenter",this._target,this.show),this._$context.on("mouseleave",this._target,this.hide))},_setPosition:function(t){var e=r(t),i=e.get(0).getBoundingClientRect().width,n=e.offset(),s=this.$el.outerWidth(),a=this.$el.outerHeight();this.$el.css({top:n.top-a-o.WIDGETS.TOOLTIP_OFFSET_Y,left:n.left+i/2-s/2})},_setValue:function(t){var e=r(t),i=e.attr(this.options.attribute);this.$el.html(i)},show:function(t){if(!t||!t.target)return void this.hide();this._setValue(t.target),this._setPosition(t.target),this.render(),this.$el.fadeIn(70)},clean:function(){this._$context.off("mouseenter mouseleave"),n.core.View.prototype.clean.call(this)}})},41:function(t,e,i){"use strict";var n=i(116);i.d(e,"f",function(){return n.h}),i.d(e,"e",function(){return n.g}),i.d(e,"d",function(){return n.f});var r=i(701);i.d(e,"c",function(){return r.b}),i.d(e,"b",function(){return r.a});var o=i(700);i.d(e,"a",function(){return o.a})},57:function(t,e,i){var n=i(662),r=i(652),o=new r({locale:"en",phrases:n.en}),s=o.t.bind(o),a={"aggregate-intersection":{title:s("analyses.aggregate-intersection.short-title")},"bounding-box":{title:s("analyses.bounding-box.short-title")},"bounding-circle":{title:s("analyses.bounding-circle.short-title")},buffer:{title:s("analyses.area-of-influence.short-title")},centroid:{title:s("analyses.centroid.short-title")},"convex-hull":{title:s("analyses.convex-hull.short-title")},"concave-hull":{title:s("analyses.concave-hull.short-title")},"data-observatory-measure":{title:s("analyses.data-observatory-measure.short-title")},"data-observatory-multiple-measures":{title:s("analyses.data-observatory-multiple-measures.short-title")},"filter-by-node-column":{title:s("analyses.filter-by-node-column.short-title")},"filter-category":{title:s("analyses.filter.short-title")},"filter-range":{title:s("analyses.filter.short-title")},"georeference-city":{title:s("analyses.georeference.short-title")},"georeference-ip-address":{title:s("analyses.georeference.short-title")},"georeference-country":{title:s("analyses.georeference.short-title")},"georeference-long-lat":{title:s("analyses.georeference.short-title")},"georeference-postal-code":{title:s("analyses.georeference.short-title")},"georeference-street-address":{title:s("analyses.georeference.short-title")},"georeference-admin-region":{title:s("analyses.georeference.short-title")},intersection:{title:s("analyses.filter-intersection.short-title")},kmeans:{title:s("analyses.kmeans.short-title")},"line-to-column":{title:s("analyses.connect-with-lines.short-title")},"line-to-single-point":{title:s("analyses.connect-with-lines.short-title")},"line-source-to-target":{title:s("analyses.connect-with-lines.short-title")},"line-sequential":{title:s("analyses.connect-with-lines.short-title")},merge:{title:s("analyses.merge.short-title")},moran:{title:s("analyses.moran-cluster.short-title")},"routing-sequential":{title:s("analyses.routing.short-title")},"routing-to-layer-all-to-all":{title:s("analyses.routing.short-title")},"routing-to-single-point":{title:s("analyses.routing.short-title")},sampling:{title:s("analyses.sampling.short-title")},"spatial-markov-trend":{title:s("analyses.spatial-markov-trend.short-title")},"trade-area":{title:s("analyses.area-of-influence.short-title")},"weighted-centroid":{title:s("analyses.centroid.short-title")},closest:{title:s("analyses.find-nearest.short-title")},"deprecated-sql-function":{title:s("analyses.deprecated-sql-function.short-title")}},l=function(t){var e=""===t?"unknown":t;return a[e]||{title:s("analyses."+e)}};t.exports={MAP:a,title:function(t){return l(t).title}}},58:function(t,e,i){var n=i(0);t.exports=function(t){return n.escape(t)}},59:function(t,e,i){var n=i(0);t.exports={COLORS:["#66B79E","#E65176","#528995","#FF710F","#305482","#CCD859","#565175","#FFB927","#3EBCAE","#E54C1F"],letter:function(t){if(!t||!n.isString(t))return"";var e=t.match(/^([a-z]+)/);return n.isArray(e)&&e[0]||""},getColorForLetter:function(t){if(!t)return this.COLORS[0];var e=t.charCodeAt(0)-97,i=(e/this.COLORS.length%1*10).toFixed();return this.COLORS[i]||this.COLORS[0]}}},60:function(t,e,i){var n=i(3),r=i(0),o=i(6),s=i(933);t.exports=o.core.View.extend({className:"CDB-Dropdown",events:{"click .js-toggleLocalTimezone":"_toggleLocalTimezone","click .js-toggleNormalized":"_toggleNormalized","click .js-toggleCollapsed":"_toggleCollapsed","click .js-removeWidget":"_removeWidget","click .js-editWidget":"_editWidget"},initialize:function(t){if(!t.target)throw new Error("target is not defined");this._target=this.options.target,this._$container=this.options.container,this._initBinds()},render:function(){var t=r.defaults(this.options.flags||{},{canCollapse:!0}),e=r.defaults({},this.model.attributes,{flags:t},{local_timezone:!1,normalized:!1,collapsed:!1,show_options:!1});return this.$el.html(s(e)),this},_initBinds:function(){this.add_related_model(this.model),this.model.bind("change:widget_dropdown_open",this._onChangeOpen,this),this._$container.delegate(this._target,"click",r.bind(this._toggleClick,this))},_removeWidget:function(){this.model.trigger("removeWidget",this.model)},_editWidget:function(){this.model.trigger("editWidget",this.model)},_bindGlobalClick:function(){n(document).bind("click."+this.cid,r.bind(this._onGlobalClick,this))},_unbindGlobalClick:function(){n(document).unbind("click."+this.cid)},_bindESC:function(){n(document).bind("keyup."+this.cid,r.bind(this._onKeyUp,this))},_unbindESC:function(){n(document).unbind("keyup."+this.cid)},_onGlobalClick:function(t){var e=this._$container.find(this._target);e.get(0)!==n(t.target).closest(e).get(0)&&this.model.set("widget_dropdown_open",!1)},_onKeyUp:function(t){if(27===t.keyCode)return this.model.set("widget_dropdown_open",!1),!1},_onChangeOpen:function(){this.model.get("widget_dropdown_open")?this._open():this._close()},_toggleCollapsed:function(){var t=!this.model.get("collapsed");this.model.set("collapsed",t)},_toggleNormalized:function(){var t=!this.model.get("normalized");this.model.set("normalized",t)},_toggleLocalTimezone:function(){var t=!this.model.get("local_timezone");this.model.set("local_timezone",t)},_open:function(){this._bindESC(),this._bindGlobalClick(),this.render(),this._$container.append(this.$el),this.$el.show(),this._adjustVerticalPosition()},_adjustVerticalPosition:function(){this._getDropdownBottom()>this._getBodyHeight()&&this.$el.addClass("has-top-position")},_getDropdownBottom:function(){return this.$el.offset().top+this.$el.height()},_getBodyHeight:function(){return n("body").height()},_close:function(){this._unbindESC(),this._unbindGlobalClick(),this.$el.hide(),this.$el.removeClass("has-top-position")},_toggleClick:function(){this.model.set("widget_dropdown_open",!this.model.get("widget_dropdown_open"))},clean:function(){this.model.set("widget_dropdown_open",!1),this._unbindESC(),this._unbindGlobalClick(),this._$container.undelegate(this._target,"click"),o.core.View.prototype.clean.call(this)}})},608:function(t,e,i){"use strict";(function(t){function e(){var t={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return t.colors.grey=t.colors.gray,Object.keys(t).forEach(function(e){var i=t[e];Object.keys(i).forEach(function(e){var n=i[e];t[e]=i[e]={open:"["+n[0]+"m",close:"["+n[1]+"m"}}),Object.defineProperty(t,e,{value:i,enumerable:!1})}),t}Object.defineProperty(t,"exports",{enumerable:!0,get:e})}).call(e,i(132)(t))},61:function(t,e,i){"use strict";function n(t,e){return function(i){return t+i*e}}function r(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}function o(t,e){var r=e-t;return r?n(t,r>180||r<-180?r-360*Math.round(r/360):r):i.i(l.a)(isNaN(t)?e:t)}function s(t){return 1==(t=+t)?a:function(e,n){return n-e?r(e,n,t):i.i(l.a)(isNaN(e)?n:e)}}function a(t,e){var r=e-t;return r?n(t,r):i.i(l.a)(isNaN(t)?e:t)}var l=i(311);e.b=o,e.c=s,e.a=a},652:function(t,e,i){"use strict";function n(t){var e={};return l(t,function(t,i){l(t,function(t){e[t]=i})}),e}function r(t){var e=n(m);return e[t]||e[f.call(t,/-/,1)[0]]||e.en}function o(t,e){return _[r(t)](e)}function s(t,e,i){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var n=t,r="number"==typeof e?{smart_count:e}:e;if(null!=r.smart_count&&n){var s=f.call(n,g);n=d(s[o(i||"en",r.smart_count)]||s[0])}return n=p.call(n,b,function(t,e){return c(r,e)&&null!=r[e]?p.call(r[e],v,w):t})}function a(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var i=e.allowMissing?s:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:i,this.warn=e.warn||u}var l=i(727),h=i(955),c=i(317),d=i(784),u=function(t){h(!1,t)},p=String.prototype.replace,f=String.prototype.split,g="||||",_={arabic:function(t){return t<3?t:t%100>=3&&t%100<=10?3:t%100>=11?4:5},chinese:function(){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},m={arabic:["ar"],chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru","lt"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]},v=/\$/g,w="$$",b=/%\{(.*?)\}/g;a.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},a.prototype.extend=function(t,e){l(t,function(t,i){var n=e?e+"."+i:i;"object"==typeof t?this.extend(t,n):this.phrases[n]=t},this)},a.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:l(t,function(t,i){var n=e?e+"."+i:i;"object"==typeof t?this.unset(t,n):delete this.phrases[n]},this)},a.prototype.clear=function(){this.phrases={}},a.prototype.replace=function(t){this.clear(),this.extend(t)},a.prototype.t=function(t,e){var i,n,r=null==e?{}:e;if("string"==typeof this.phrases[t])i=this.phrases[t];else if("string"==typeof r._)i=r._;else if(this.onMissingKey){var o=this.onMissingKey;n=o(t,r,this.currentLocale)}else this.warn('Missing translation for key: "'+t+'"'),n=t;return"string"==typeof i&&(n=s(i,r,this.currentLocale)),n},a.prototype.has=function(t){return c(this.phrases,t)},a.transformPhrase=s,t.exports=a},653:function(t,e){t.exports={_args:[[{raw:"cartodb-deep-insights.js@git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",scope:null,escapedName:"cartodb-deep-insights.js",name:"cartodb-deep-insights.js",rawSpec:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",spec:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",type:"hosted",hosted:{type:"github",ssh:"git@github.com:cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",sshUrl:"git+ssh://git@github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",httpsUrl:"git+https://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",gitUrl:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",shortcut:"github:cartodb/deep-insights.js#946aff57fc1933d63c223ce81f69fe5fd6a77959",directUrl:"https://raw.githubusercontent.com/cartodb/deep-insights.js/946aff57fc1933d63c223ce81f69fe5fd6a77959/package.json"}},"/home/ubuntu/www/production.cartodb.com/releases/20171211170721"]],_from:"cartodb/deep-insights.js#v0.4.20",_id:"cartodb-deep-insights.js@0.4.20",_inCache:!0,_location:"/cartodb-deep-insights.js",_phantomChildren:{"for-each":"0.3.2",has:"1.0.1","string.prototype.trim":"1.1.2",warning:"3.0.0"},_requested:{raw:"cartodb-deep-insights.js@git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",scope:null,escapedName:"cartodb-deep-insights.js",name:"cartodb-deep-insights.js",rawSpec:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",spec:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",type:"hosted",hosted:{type:"github",ssh:"git@github.com:cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",sshUrl:"git+ssh://git@github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",httpsUrl:"git+https://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",gitUrl:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",shortcut:"github:cartodb/deep-insights.js#946aff57fc1933d63c223ce81f69fe5fd6a77959",directUrl:"https://raw.githubusercontent.com/cartodb/deep-insights.js/946aff57fc1933d63c223ce81f69fe5fd6a77959/package.json"}},_requiredBy:["/"],_resolved:"git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",_shasum:"84d7640b815de6f1359e3d6f43a20f803ed21d12",_shrinkwrap:null,_spec:"cartodb-deep-insights.js@git://github.com/cartodb/deep-insights.js.git#946aff57fc1933d63c223ce81f69fe5fd6a77959",_where:"/home/ubuntu/www/production.cartodb.com/releases/20171211170721",author:{name:"CARTO",email:"wadus@carto.com",url:"http://carto.com/"},browserify:{transform:["jstify"]},bugs:{url:"https://github.com/CartoDB/deep-insights.js/issues"},contributors:[{name:"Javier Álvarez",email:"jmedina@cartodb.com"},{name:"Javier Arce",email:"javierarce@cartodb.com"},{name:"Javier Santana",email:"jsantana@cartodb.com"},{name:"Raul Ochoa",email:"rochoa@cartodb.com"},{name:"Nicklas Gummesson",email:"nicklas@cartodb.com"},{name:"Pablo Alonso",email:"pablo@cartodb.com"},{name:"Antonio Santiago Pérez",email:"asantiago@cartodb.com"},{name:"Ivan Malagon",email:"ivan@carto.com"},{name:"Ruben Moya",email:"ruben@carto.com"},{name:"Carlos Matallín",email:"matallo@carto.com"},{name:"Jesús Arroyo Torrens",email:"jarroyo@cartodb.com"}],dependencies:{backbone:"1.2.3",cartocolor:"4.0.0","cartodb.js":"github:cartodb/cartodb.js#v4.0.0-alpha.31",d3:"3.5.17","d3-interpolate":"1.1.2",jquery:"2.1.4",moment:"^2.18.1","node-polyglot":"^2.2.2","perfect-scrollbar":"git://github.com/CartoDB/perfect-scrollbar.git#master",postcss:"5.0.19","postcss-scss":"0.4.0","postcss-strip-inline-comments":"0.1.5",tinycolor2:"1.4.1",underscore:"1.8.3",urijs:"1.17.1"},description:"CARTO Deep Insights JS library",devDependencies:{"babel-preset-es2015":"~6.24.1",babelify:"~7.3.0",browserify:"13.0.0","browserify-resolutions":"1.1.0",cartoassets:"github:cartodb/CartoAssets#master",eslint:"~4.8.0","eslint-config-semistandard":"~11.0.0","eslint-config-standard":"~10.2.1","eslint-plugin-import":"~2.7.0","eslint-plugin-node":"~5.2.0","eslint-plugin-promise":"~3.5.0","eslint-plugin-standard":"~3.0.1",grunt:"0.4.5","grunt-aws":"^0.4.0","grunt-browserify":"5.0.0","grunt-contrib-clean":"0.7.0","grunt-contrib-concat":"0.5.1","grunt-contrib-connect":"0.11.2","grunt-contrib-copy":"0.8.2","grunt-contrib-cssmin":"0.14.0","grunt-contrib-imagemin":"1.0.0","grunt-contrib-jasmine":"github:cartodb/grunt-contrib-jasmine#headless-chrome","grunt-contrib-uglify":"0.11.0","grunt-contrib-watch":"0.6.1","grunt-eslint":"~20.1.0","grunt-exorcise":"2.1.0","grunt-fastly":"~0.1.3","grunt-gh-pages":"1.0.0","grunt-sass":"2.0.0",jstify:"0.13.0",leaflet:"1.2.0","load-grunt-tasks":"3.3.0","source-map-support":"0.4.0","time-grunt":"1.2.2",watchify:"3.6.1"},gitHead:"946aff57fc1933d63c223ce81f69fe5fd6a77959",homepage:"https://github.com/CartoDB/deep-insights.js#readme",license:"BSD-3-Clause",main:"src/index.js",name:"cartodb-deep-insights.js",optionalDependencies:{},readme:"Deep-Insights.js [![Build Status](http://travis-ci.org/CartoDB/deep-insights.js.png?branch=master)](http://travis-ci.org/CartoDB/deep-insights.js)\n====================\n\n## Intro\n\nDepth Insights.js allows to create powerful dashboards using CARTO\n\n## Quickstart\n\nPlease, read the [quickstart](doc/quickstart.md) and the [API](doc/api.md)\n\n\n## Develop\n\n`yarn install` and then `grunt dev` to build dev dist files\n\nAfter the last step [http://localhost:9002/](http://localhost:9002/) should open in a browser, where you can run tests, see styleguide and examples etc.\n\n## release\n\n1. be sure you have the right secrets.json\n1. Modify the package.json version\n1. execute `grunt release`\n",readmeFilename:"README.md",repository:{type:"git",url:"git://github.com/CartoDB/deep-insights.js.git"},scripts:{lint:"eslint .","lint:fix":"eslint . --fix",postversion:"git push origin master --follow-tags",test:"grunt test"},version:"0.4.20"}},654:function(t,e,i){var n=i(0),r=i(6),o=i(655),s=i(660),a=i(695),l=i(665),h=i(133),c=function(t,e,i,o){var c=document.querySelector(t);if(!c)throw new Error("no element found with selector "+t);i=i||{},i.renderMenu=!n.isBoolean(i.renderMenu)||i.renderMenu,i.autoStyle=!!n.isBoolean(i.autoStyle)&&i.autoStyle;var d=new a,u=new r.core.Model({title:e.title,description:e.description,updatedAt:e.updated_at,userName:e.user.fullname,userProfileURL:e.user.profile_url,userAvatarURL:e.user.avatar_url,renderMenu:i.renderMenu,autoStyle:i.autoStyle,showLogo:i.cartodb_logo,initialPosition:{bounds:e.bounds}}),p=new s({el:c,widgets:d,model:u}),f=i.state||h.getStateFromCurrentURL();f&&!n.isEmpty(f.map)&&(n.isArray(f.map.center)&&(e.center=f.map.center),n.isNumber(f.map.zoom)&&(e.zoom=f.map.zoom),f.map.ne&&f.map.sw&&(e.bounds=[f.map.ne,f.map.sw])),r.createVis(p.$("#map"),e,n.extend(i,{skipMapInstantiation:!0})).once("load",function(t){var i=f&&f.widgets||{},s=new l(d,t.dataviews),a={formula:s.createFormulaModel.bind(s),histogram:s.createHistogramModel.bind(s),"time-series":s.createTimeSeriesModel.bind(s),category:s.createCategoryModel.bind(s)};e.widgets.forEach(function(e){var o=n.extend({},e,e.options),s=a[e.type],l=i[e.id];if(n.isFunction(s)){var h,c;e.layer_id?h=t.map.layers.get(e.layer_id):Number.isInteger(e.layerIndex)&&(h=t.map.layers.at(e.layerIndex)),e.source&&e.source.id&&(c=t.analysis.findNodeById(e.source.id),o.source=c),s(o,h,l)}else r.log.error("No widget found for type "+e.type)}),p.render();var h={dashboardView:p,widgets:s,areWidgetsInitialised:function(){var t=s.getCollection();return!(t.size()>0)||t.hasInitialState()},vis:t};t.instantiateMap({success:function(){o&&o(null,h)},error:function(t){o&&o(new Error(t),h)}})})};t.exports=function(t,e,i,s){function a(e){c(t,e,i,function(t,e){var r=new o(e);i.share_urls&&r.onStateChanged(n.debounce(function(t,e){window.history.replaceState("Object","Title",e)},500)),s&&s(t,r)})}var l=arguments,h=l[l.length-1];n.isFunction(h)&&(s=h),"string"==typeof e?r.core.Loader.get(e,function(t){t?a(t):s&&s(new Error("Error fetching viz.json file: "+e))}):a(e)}},655:function(t,e,i){function n(t){this._dashboard=t,this.onDataviewsFetched(function(){t.widgets._widgetsCollection.initialState(),t.widgets._widgetsCollection.each(function(t){t&&t.applyInitialState&&t.applyInitialState()})})}var r=i(133),o=i(0);n.prototype={getView:function(){return this._dashboard.dashboardView},getMap:function(){return this._dashboard.vis},reloadMap:function(){this.getMap().reload()},forceResize:function(){this._dashboard.widgets.getCollection().each(function(t){t.forceResize()})},getWidgets:function(){return this._dashboard.widgets.getList()},getDashboardURL:function(){return r.getURLFromState(this.getState())},getState:function(){var t={},e=this.getMapState();o.isEmpty(e)||(t.map=e);var i=this._dashboard.widgets.getCollection(),n=i.getStates();return o.isEmpty(n)||(t.widgets=n),t},getMapState:function(){var t=this._dashboard.vis.map,e=t.getViewBounds(),i=t.get("center"),n=t.get("zoom");return{ne:e[0],sw:e[1],center:i,zoom:n}},setState:function(t){this._dashboard.widgets.setWidgetsState(t.widgets),this._dashboard.vis.mapvis.map.setBounds([t.map.ne,t.map.sw])},onDataviewsFetched:function(t){this._dashboard.areWidgetsInitialised()?t&&t():this._dashboard.vis.once("dataviewsFetched",function(){t&&t()})},onStateChanged:function(t){this.onDataviewsFetched(function(){t&&this._bindChange(t)}.bind(this))},_bindChange:function(t){this._dashboard.widgets.getCollection().bind("change",function(){t(this.getState(),this.getDashboardURL())},this),this._dashboard.vis.map.bind("change",function(){t(this.getState(),this.getDashboardURL())},this)},getWidget:function(t){return this._dashboard.widgets.get(t)},createCategoryWidget:function(t,e){return this._dashboard.widgets.createCategoryModel(t,e,null)},createHistogramWidget:function(t,e){return this._dashboard.widgets.createHistogramModel(t,e,null)},createFormulaWidget:function(t,e){return this._dashboard.widgets.createFormulaModel(t,e,null)},createTimeSeriesWidget:function(t,e){return this._dashboard.widgets.createTimeSeriesModel(t,e,null)}},t.exports=n},656:function(t,e){t.exports={WIDGETS:{TOOLTIP_OFFSET_Y:10}}},657:function(t,e,i){var n=i(0),r=i(6),o=i(305),s=i(684),a=i(686);t.exports=r.core.View.extend({className:"CDB-Dashboard-belowMap",initialize:function(t){this._widgetViewFactory=new o([{match:function(t){if("time-series"===t.get("type")){var e=t.dataviewModel,i=t.layerModel;return e&&"torque"===i.get("type")&&!0===t.get("animated")}return!1},createContentView:function(t){return new a({model:t})},customizeWidgetAttrs:function(t){return t.className+=" CDB-Widget--timeSeries",t}},{type:"time-series",createContentView:function(t){return new s({model:t})},customizeWidgetAttrs:function(t){return t.className+=" CDB-Widget--timeSeries",t}}]),this._widgets=t.widgets,this._widgets.bind("add",this._maybeRenderWidgetView,this),this._widgets.bind("reset",this.render,this),this._widgets.bind("add reset remove",this._onWidgetsChange,this),this.add_related_model(this._widgets)},render:function(){return this.clearSubViews(),this.$el.empty(),this._widgets.each(this._maybeRenderWidgetView,this),this._toggleVisiblity(),this},_maybeRenderWidgetView:function(t){var e=this._widgetViewFactory.createWidgetView(t);e&&(this.addView(e),this.$el.append(e.render().el))},_toggleVisiblity:function(){this.$el.toggle(!n.isEmpty(this._subviews))},_onWidgetsChange:function(){this._widgets.each(function(t){t.forceResize()}),this._toggleVisiblity()}})},658:function(t,e,i){var n=i(6),r=i(0),o=i(3),s=i(919),a=i(4),l=i(50),h=n.core.View.extend({className:"CDB-Dashboard-menu",events:{"click .js-toggle-view":"_toogleView"},initialize:function(){this.viewModel=new n.core.Model({open:!1,small:o(window).width()<760}),this._initBinds()},_initBinds:function(){this.listenTo(this.viewModel,"change",this.render),this._resize=r.debounce(this._onResizeWindow.bind(this),20),o(window).on("resize",this._resize)},render:function(){var t=this.model.get("title"),e=this.viewModel.get("open"),i=this.viewModel.get("small");t&&t.length>120&&(t=t.slice(0,110)+"... %23 map"),this.$el.html(s({hasTranslation:e||i,showLogo:this.model.get("showLogo"),title:this.model.get("title"),description:this.model.get("description"),updatedAt:a(this.model.get("updatedAt")).fromNow(),userName:this.model.get("userName"),url:window.location.href,urlWithoutParams:window.location.protocol+"//"+window.location.host+window.location.pathname,inIframe:window.location!==window.parent.location,shortTitle:t,userAvatarURL:this.model.get("userAvatarURL"),userProfileURL:this.model.get("userProfileURL")})),this.$el.toggleClass("is-active",e);var n=this._getDescription().get(0);return l.initialize(n,{wheelSpeed:2,suppressScrollX:!0}),this},_getDescription:function(){return this.$(".js-scroll-wrapper")},_toogleView:function(){var t=this.viewModel.get("open");this.viewModel.set({open:!t})},_onResizeWindow:function(){this.viewModel.set({small:o(window).width()<760})},clean:function(){o(window).off("resize",this._resize),n.core.View.prototype.clean.call(this)}});t.exports=h},659:function(t,e,i){var n=i(0),r=i(3),o=i(50),s=i(6),a=i(671),l=i(680),h=i(681),c=i(305),d=i(920),u=window.matchMedia;t.exports=s.core.View.extend({className:"CDB-Widget-canvas",initialize:function(t){this._widgetViewFactory=new c([{type:"formula",createContentView:function(t){return new l({model:t})}},{type:"histogram",createContentView:function(t){return new h({model:t})}},{type:"category",createContentView:function(t){return new a({model:t})}}]),this._widgets=t.widgets,this._widgets.bind("add",this._maybeRenderWidgetView,this),this._widgets.bind("reset",this.render,this),this._widgets.bind("orderChanged",this.render,this),this._widgets.bind("change:collapsed",this._onWidgetUpdate,this),this._widgets.bind("add remove reset",this._onWidgetsChange,this),this.add_related_model(this._widgets),this._resizeHandler=this._onResize.bind(this)},render:function(){return this._cleanScroll(),this._observer&&this._observer.disconnect(),this.clearSubViews(),this.$el.html(d()),this.$el.toggleClass("CDB-Widget-canvas--withMenu",this.model.get("renderMenu")),this._widgets.each(this._maybeRenderWidgetView,this),this._toggleVisiblity(),this._renderScroll(),this._renderShadows(),this._bindScroll(),this._initResize(),this},_initResize:function(){["(max-width: 1600px)","(max-width: 1280px)","(max-width: 759px)"].forEach(function(t){u(t).addListener(this._resizeHandler)},this)},_updateScrollCss:function(){this._onWidgetUpdate();var t=this._container();if(t){var e=t.clientWidth,i=t.clientHeight,n=t.scrollWidth,r=t.scrollHeight,o=e<n,s=i<r;this._$container().toggleClass("hasXScroll",o),this._$container().toggleClass("hasYScroll",s)}},_$container:function(){return r(this._container())},_container:function(){return this.el.querySelector(".js-container")},_maybeRenderWidgetView:function(t){var e=this._widgetViewFactory.createWidgetView(t);e&&(this.addView(e),this._$container().append(e.render().el))},_bindScroll:function(){this._$container().on("ps-y-reach-start",n.bind(this._onScrollTop,this)).on("ps-y-reach-end",n.bind(this._onScrollBottom,this)).on("ps-scroll-y",n.bind(this._onScroll,this))},_renderScroll:function(){o.initialize(this._container(),{wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,stopPropagationOnClick:!1,minScrollbarLength:20,useBothWheelAxes:!0})},_onWidgetUpdate:function(){o.update(this._container())},_renderShadows:function(){this.$shadowTop=r("<div>").addClass("CDB-Widget-canvasShadow CDB-Widget-canvasShadow--top"),this.$shadowBottom=r("<div>").addClass("CDB-Widget-canvasShadow CDB-Widget-canvasShadow--bottom"),this.$el.append(this.$shadowTop),this.$el.append(this.$shadowBottom)},_onScrollTop:function(){this.$shadowTop.removeClass("is-visible")},_onScroll:function(){var t=this._$container(),e=t.scrollTop(),i=t.get(0).scrollHeight,n=t.outerHeight(),r=i-n;this.$shadowTop.toggleClass("is-visible",e>0),this.$shadowBottom.toggleClass("is-visible",e<r)},_updateScroll:function(){this._$container().scrollLeft=0,this._$container().scrollTop=0},_onResize:function(t){this._updateScroll(),this._onScroll()},_onScrollBottom:function(){this.$shadowBottom.removeClass("is-visible")},_cleanScroll:function(){r(window).off("resize",this._resizeHandler),this._container()&&(this._$container().off("ps-scroll-y"),o.destroy(this._container()))},_toggleVisiblity:function(){this.$el.toggle(!n.isEmpty(this._subviews))},_onWidgetsChange:function(){this._toggleVisiblity()},clean:function(){this._cleanScroll(),this._observer&&this._observer.disconnect(),s.core.View.prototype.clean.call(this)}})},660:function(t,e,i){var n=i(3),r=i(6),o=i(921),s=i(657),a=i(658),l=i(659);t.exports=r.core.View.extend({className:"CDB-Dashboard-canvas",initialize:function(t){this._widgets=t.widgets,this._infoView=t.infoView,this.el.classList.add(this.className),this.$el.html(o()),this._onWindowResize=this._onWindowResize.bind(this),n(window).bind("resize",this._onWindowResize)},render:function(){this.clearSubViews();var t,e=this.model.get("renderMenu");return e&&(t=new a({model:this.model}),this.addView(t),this.$el.append(t.render().el)),t=new s({widgets:this._widgets}),this.addView(t),this.$(".js-map-wrapper").toggleClass("CDB-Dashboard-mapWrapper--withMenu",e).append(t.render().el),t=new l({widgets:this._widgets,model:this.model}),this.addView(t),this.$el.append(t.render().el),this},getInitialMapState:function(){return{bounds:this.model.get("initialPosition").bounds}},_onWindowResize:function(){this._widgets.each(function(t){t.forceResize()})},clean:function(){n(window).unbind("resize",this._onWindowResize),r.core.View.prototype.clean.call(this)}})},661:function(t,e){t.exports={analyses:{unknown:"Unknown",source:"Source","connect-with-lines":{"short-title":"Connect with lines"},georeference:{"short-title":"Georeference"},"data-observatory-measure":{"short-title":"Data observatory"},"data-observatory-multiple-measures":{"short-title":"Data observatory"},merge:{"short-title":"Join columns"},"filter-by-node-column":{"short-title":"Filter by layer"},centroid:{"short-title":"Centroid"},"group-points":{"short-title":"Group points"},"convex-hull":{"short-title":"Convex Hull"},"concave-hull":{"short-title":"Concave Hull"},"bounding-box":{"short-title":"Bounding Box"},"bounding-circle":{"short-title":"Bounding Circle"},"area-of-influence":{"short-title":"AOI"},"filter-intersection":{"short-title":"Filter points in polygons"},"aggregate-intersection":{"short-title":"Aggregate intersection"},filter:{"short-title":"Filter"},sampling:{"short-title":"Sampling"},kmeans:{"short-title":"Clusters"},"moran-cluster":{"short-title":"Outliers & clusters"},"spatial-markov-trend":{"short-title":"Trends"},routing:{"short-title":"Routing"},"deprecated-sql-function":{"short-title":"SQL Function"},"find-nearest":{"short-title":"Find nearest"}}}},662:function(t,e,i){t.exports={en:i(661)}},663:function(t,e,i){var n=i(0),r={generic:{level:"error",refresh:!0},limit:{level:"error",error:"Timeout",message:"The server is taking too long to respond, due to poor conectivity or a temporary error with our servers. Please try again soon.",refresh:!0},no_data_available:{level:"alert",error:"No data available",message:"There are no results for the combination of filters applied to your data. Try tweaking your filters, or zoom and pan the map to adjust the Map View.",refresh:!1},too_many_bins:{level:"error",error:"Too many bins returned",message:"There are too many bins returned. Try selecting a less granular aggregation or filtering the data source.",refresh:!1}};t.exports=function(t){var e=t&&t.type||"generic";return n.extend({},t,r[e])}},664:function(t,e,i){var n=i(4),r=i(0),o={};o.substractOneUnit=function(t,e){if(!r.isNumber(t))return t;var i=n.unix(t).utc();return e&&"week"===e?i.subtract(1,"day"):i.subtract(1,e),i.unix()},t.exports=o},665:function(t,e,i){var n=i(0),r=i(78),o=i(670),s=i(683),a=i(685),l={auto_style_allowed:"autoStyleEnabled"},h=function(t){return n.reduce(l,function(e,i,n){if(void 0!==t[n])return e[i]=t[n],e},{})},c=function(t,e){n.each(e,function(e){if(void 0===t[e])throw new Error(e+" is required")})},d=function(t,e,i){return n.extend(t,e,{hasInitialState:i})},u=function(t){if(!(t.source instanceof Object&&t.source.cid))throw new Error("Source must be defined and be an instance of AnalysisModel.")},p=function(t,e){this._widgetsCollection=t,this._dataviews=e};p.prototype.getCollection=function(){return this._widgetsCollection},p.prototype.get=function(t){return this._widgetsCollection.get(t)},p.prototype.getList=function(){return this._widgetsCollection.models},p.prototype.createCategoryModel=function(t,e,i){c(t,["title"]);var r=d(t,i,this._widgetsCollection.hasInitialState());u(r);var s=this._dataviews.createCategoryModel(r),a=["id","title","order","collapsed","prefix","suffix","show_stats","show_source","style","hasInitialState"],l=n.pick(r,a),p=h(r);l.attrsNames=a;var f=new o(l,{dataviewModel:s,layerModel:e},p);return f.setInitialState(i),this._widgetsCollection.add(f),f},p.prototype.createHistogramModel=function(t,e,i,r){c(t,["title"]);var o=d(t,i,this._widgetsCollection.hasInitialState());u(o);var a=this._dataviews.createHistogramModel(o);a.has("bins")||a.set("bins",10,{silent:!0});var l=["id","title","order","collapsed","bins","show_stats","show_source","normalized","style","hasInitialState"],p=n.pick(o,l),f=h(o);p.type="histogram",p.attrsNames=l;var g=new s(p,{dataviewModel:a,layerModel:e},f);return g.setInitialState(i),this._widgetsCollection.add(g),g},p.prototype.createFormulaModel=function(t,e,i){c(t,["title"]);var o=d(t,i,this._widgetsCollection.hasInitialState());u(o);var s=this._dataviews.createFormulaModel(o),a=["id","title","order","collapsed","prefix","suffix","show_stats","show_source","description","hasInitialState"],l=n.pick(o,a);l.type="formula",l.attrsNames=a;var h=new r(l,{dataviewModel:s,layerModel:e});return h.setInitialState(i),this._widgetsCollection.add(h),h},p.prototype.createTimeSeriesModel=function(t,e,i,r){t.column_type=t.column_type||"date",u(t);var o=this._dataviews.createHistogramModel(t),s=["id","style","title","normalized","animated","timezone"],l=n.pick(t,s);l.type="time-series",l.attrsNames=s;var h=new a(l,{dataviewModel:o,layerModel:e},r);return h.setInitialState(i),this._widgetsCollection.add(h),h},p.prototype.setWidgetsState=function(t){this._widgetsCollection.setStates(t)},t.exports=p},666:function(t,e,i){function n(t){return t&&t.definition&&t.definition.color&&t.definition.color.range||s}function r(t){this.updateColors(t)}var o=i(0),s=["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74"];r.prototype.updateColors=function(t){var e=n(t);this.colors={},o.each(e,function(t){this.colors[t]=null},this)},r.prototype.updateData=function(t){o.each(this.colors,function(e,i){o.contains(t,e)?t=o.without(t,e):this.colors[i]=null},this),o.each(t,function(t){var e=this.getNextAvailableColor();e&&(this.colors[e]=t)},this)},r.prototype.getNextAvailableColor=function(){for(var t in this.colors)if(null===this.colors[t])return t;return null},r.prototype.getColorByCategory=function(t){for(var e in this.colors)if(this.colors[e]===t)return e;return"#A5AA99"},r.prototype.getCategoryByColor=function(t){return this.colors[t]},t.exports=r},667:function(t,e,i){var n=i(0),r=i(298);t.exports=r.extend({updateStyle:function(t){this.styles=t.auto_style,this.colors.updateColors(t.auto_style),this.colors.updateData(n.pluck(this.dataviewModel.get("data"),"name"))},_getRange:function(){return n.map(this.dataviewModel.get("data"),function(t){return this.colors.getColorByCategory(t.name)},this)},getDef:function(){var t=this.dataviewModel,e=t.get("data"),i=this._getRange(),o={};return r.FILL_SELECTORS.forEach(function(r){var s={},a=r.substring(0,r.indexOf("-"));s={color:{domain:n.pluck(e,"name"),range:i,attribute:t.get("column")}},o["marker"===a?"point":a]=s}),o},_getFillColor:function(){var t=this.dataviewModel,e=t.get("data"),i=t.get("column");return this._getCategoryRamp(e,i)},_getCategoryRamp:function(t,e){for(var i="ramp(["+e+"], ",n="",r="",o=0;o<t.length;o++){var s=t[o],a=o!==t.length-1?'", ':'"';n+='"'+this.colors.getColorByCategory(s.name)+a,s.agg?'"'===a&&(r=r.substring(0,r.length-2)):r+='"'+s.name.replace(/"/g,'\\"')+a}return i+"("+n+"), ("+r+"))"}})},668:function(t,e,i){var n={category:i(667),histogram:i(669)};t.exports={get:function(t,e,i){var r=n[t.get("type")];if(r)return new r(t,e,i);throw new Error("dataview type not supported")}}},669:function(t,e,i){var n=i(0),r=i(30),o=i(298),s=i(299),a=o.extend({updateStyle:function(t){this.styles=t.auto_style},_getFillColor:function(t){var e=this._getColor(),i=e||{};if(!e){var n=this.dataviewModel.getDistributionType(this.dataviewModel.getUnfilteredDataModel().get("data"));i=a.SCALES_MAP[t][n]}return"ramp(["+this.dataviewModel.get("column")+"], "+(e?"('"+i.range.join("', '")+"'), ":"cartocolor("+i.palette+", "+this.dataviewModel.get("bins")+"), ")+i.quantification+")"},getDef:function(t){var e={},i=this.dataviewModel.getDistributionType(this.dataviewModel.getUnfilteredDataModel().get("data")),l=this.dataviewModel.get("bins"),h=this.dataviewModel.get("column"),c=this.styles,d=this.styles&&this.styles.custom||!1;return o.FILL_SELECTORS.forEach(function(o){if(s.isPropertyIncluded(t,o)){var u=a.SCALES_MAP[o][i],p=o.substring(0,o.indexOf("-")),f={};u&&(f=!0===d?n.extend(f,c.definition):{color:{range:r[u.palette][l]||r[u.palette][Object.keys(r[u.palette]).length],quantification:u.quantification,attribute:h}}),e["marker"===p?"point":p]=f}}),e}});a.SCALES_MAP={"polygon-fill":{F:{palette:"PinkYl",quantification:"equal"},L:{palette:"Emrld",quantification:"headtails"},J:{palette:"Emrld",quantification:"headtails"},A:{palette:"Geyser",quantification:"quantiles"},C:{palette:"Sunset",quantification:"jenks"},U:{palette:"Sunset",quantification:"jenks"}},"line-color":{F:{palette:"PinkYl",quantification:"equal"},L:{palette:"Emrld",quantification:"headtails"},J:{palette:"Emrld",quantification:"headtails"},A:{palette:"Geyser",quantification:"quantiles"},C:{palette:"Sunset",quantification:"jenks"},U:{palette:"Sunset",quantification:"jenks"}},"marker-fill":{F:{palette:"RedOr",quantification:"equal"},L:{palette:"BluYl",quantification:"headtails"},J:{palette:"BluYl",quantification:"headtails"},A:{palette:"Geyser",quantification:"quantiles"},C:{palette:"SunsetDark",quantification:"jenks"},U:{palette:"SunsetDark",quantification:"jenks"}}},t.exports=a},670:function(t,e,i){var n=i(0),r=i(78),o=i(675);t.exports=r.extend({defaults:n.extend({type:"category",search:!1,locked:!1},r.prototype.defaults),defaultState:n.extend({acceptedCategories:[],locked:!1,autoStyle:!1},r.prototype.defaultState),initialize:function(){r.prototype.initialize.apply(this,arguments),this.lockedCategories=new o,this.listenTo(this.dataviewModel,"change:allCategoryNames",this._onDataviewAllCategoryNamesChange),this.on("change:locked",this._onLockedChange,this),this.on("change:collapsed",this._onCollapsedChange,this),this.isAutoStyleEnabled()&&this.on("change:style",this._updateAutoStyle,this),this.dataviewModel.filter.on("change",function(){this.set("acceptedCategories",this._acceptedCategories().pluck("name"))},this),this.dataviewModel.once("change:allCategoryNames",function(){this.get("autoStyle")&&this.autoStyle()},this)},setupSearch:function(){this.dataviewModel.setupSearch(),this.lockedCategories.addItems(this._acceptedCategories().toJSON()),this.toggleSearch()},toggleSearch:function(){this.set("search",!this.get("search"))},enableSearch:function(){this.set("search",!0)},disableSearch:function(){this.set("search",!1)},isSearchEnabled:function(){return this.get("search")},cleanSearch:function(){this.dataviewModel.cleanSearch(),this.lockedCategories.reset([])},autoStyle:function(){this.autoStyler.colors.updateData(this.dataviewModel.get("allCategoryNames")),r.prototype.autoStyle.call(this)},isLocked:function(){return this.get("locked")},canBeLocked:function(){return this.isLocked()||this._acceptedCategories().size()>0},canApplyLocked:function(){return this._acceptedCategories().size()!==this.lockedCategories.size()||this._acceptedCategories().any(function(t){return!this.lockedCategories.isItemLocked(t.get("name"))},this)},applyLocked:function(){var t=this.lockedCategories.getItemsName();if(!t.length)return this.unlockCategories(),!1;this.set("locked",!0);var e=this.dataviewModel.filter;e.cleanFilter(!1),e.accept(t),e.applyFilter(),this.cleanSearch()},lockCategories:function(){this.set("locked",!0),this.dataviewModel.fetch()},unlockCategories:function(){this.set("locked",!1),this.dataviewModel.filter.acceptAll()},_onDataviewAllCategoryNamesChange:function(t,e){this.isAutoStyleEnabled()&&(this.isAutoStyle()||this.autoStyler.colors.updateData(e))},_onLockedChange:function(t,e){e?this.dataviewModel.enableFilter():this.dataviewModel.disableFilter()},_acceptedCategories:function(){return this.dataviewModel.filter.acceptedCategories},_onCollapsedChange:function(t,e){this.dataviewModel.set("enabled",!e)}})},671:function(t,e,i){var n=i(6),r=i(679),o=i(676),s=i(300),a=i(678),l=i(301),h=i(674),c=i(677),d=i(922);t.exports=n.core.View.extend({className:"CDB-Widget-body",_ITEMS_PER_PAGE:6,initialize:function(){this._dataviewModel=this.model.dataviewModel,this._layerModel=this.model.layerModel,this._initBinds()},render:function(){return this.clearSubViews(),this.$el.html(d()),this._initViews(),this},_initBinds:function(){!0===this.model.get("hasInitialState")?this._onInitialState():this.model.bind("change:hasInitialState",this._onInitialState,this),this.model.bind("change:collapsed",function(t,e){this.$el.toggleClass("is-collapsed",!!e)},this)},_onInitialState:function(){this.render(),!0===this.model.get("autoStyle")&&this.model.autoStyle()},_initViews:function(){var t=new r({widgetModel:this.model,dataviewModel:this._dataviewModel,layerModel:this._layerModel});this.$(".js-header").append(t.render().el),this.addView(t);var e=new a({widgetModel:this.model,dataviewModel:this._dataviewModel});this.$(".js-header").append(e.render().el),this.addView(e);var i=new o({widgetModel:this.model,dataviewModel:this._dataviewModel});this.$(".js-content").html(i.render().el),this.addView(i);var n=new s({widgetModel:this.model,dataviewModel:this._dataviewModel,itemsPerPage:this._ITEMS_PER_PAGE});this.$(".js-content").append(n.render().el),this.addView(n);var d=new l({$target:n.$el,widgetModel:this.model,dataviewModel:this._dataviewModel,itemsPerPage:this._ITEMS_PER_PAGE});this.$(".js-footer").append(d.render().el),this.addView(d);var u=new h({widgetModel:this.model,dataviewModel:this._dataviewModel,itemsPerPage:this._ITEMS_PER_PAGE,paginator:!0});this.$(".js-content").append(u.render().el),this.addView(u);var p=new c({$target:u.$el,widgetModel:this.model,dataviewModel:this._dataviewModel,itemsPerPage:this._ITEMS_PER_PAGE,paginator:!0});this.$(".js-footer").append(p.render().el),this.addView(p)}})},672:function(t,e,i){var n=i(6),r=i(21),o=i(0),s=i(923),a=i(924);t.exports=n.core.View.extend({tagName:"li",className:"CDB-Widget-listItem",events:{"click .js-button":"_onItemClick"},initialize:function(t){this.widgetModel=this.options.widgetModel,this.dataviewModel=this.options.dataviewModel,this._initBinds()},render:function(){var t=this.model.get("name"),e=this.model.get("value"),i=this.model.get("agg")||this.widgetModel.isLocked()?a:s,n=this.dataviewModel.filter.getAcceptedCategoryNames(),l=o.contains(n,t);return this.$el.html(i({isAggregated:this.model.get("agg"),name:t,value:e,formattedValue:r.formatNumber(e),percentage:e/this.dataviewModel.get("max")*100,color:this.widgetModel.getColor(t),isDisabled:this.model.get("selected")?"":"is-disabled",isAccepted:l,prefix:this.widgetModel.get("prefix"),suffix:this.widgetModel.get("suffix")})),this},_initBinds:function(){this.model.bind("change",this.render,this),this.widgetModel.bind("change:search change:prefix change:suffix change:autoStyle",this.render,this),this.add_related_model(this.widgetModel)},_onItemClick:function(){this.trigger("itemClicked",this.model,this)}})},673:function(t,e,i){var n=i(6),r=i(21),o=i(925);t.exports=n.core.View.extend({tagName:"li",className:"CDB-Widget-listItem",events:{"click .js-button":"_onItemClick"},initialize:function(t){this.dataviewModel=this.options.dataviewModel,this.widgetModel=this.options.widgetModel,this._initBinds()},render:function(){var t=this.model.get("value");return this.$el.html(o({name:this.model.get("name"),value:t,formattedValue:r.formatNumber(t),percentage:t/this.dataviewModel.get("max")*100,isDisabled:!this.model.get("selected"),prefix:this.widgetModel.get("prefix"),suffix:this.widgetModel.get("suffix")})),this},_initBinds:function(){this.model.bind("change:selected",this.render,this),this.widgetModel.bind("change:prefix change:suffix",this.render,this),this.add_related_model(this.widgetModel)},_onItemClick:function(){this.model.set("selected",!this.model.get("selected"))}})},674:function(t,e,i){var n=i(3),r=i(300),o=i(673),s=i(926);t.exports=r.extend({className:"CDB-Widget-list is-hidden CDB-Widget-list--wrapped js-list",render:function(){this.clearSubViews(),this.$el.empty();var t=this._searchResultsCollection;return t.isEmpty()||0===t.size()?this._renderPlaceholder():this._renderList(),this},_initBinds:function(){r.prototype._initBinds.apply(this,arguments),this._searchResultsCollection=this.dataviewModel.getSearchResult(),this._searchResultsCollection.on("change:selected",this._onSelectedItemChange,this),this._searchResultsCollection.on("reset",this.render,this),this.add_related_model(this._searchResultsCollection)},_renderList:function(){this.$el.removeClass("CDB-Widget-list--withBorders CDB-Widget-list--noresults"),this.$el.addClass("CDB-Widget-list--wrapped");var t;this._searchResultsCollection.each(function(e,i){i%this.options.itemsPerPage==0&&(t=n("<div>").addClass("CDB-Widget-listGroup"),this.$el.append(t)),this._addItem(e,t)},this)},_renderPlaceholder:function(){this.$el.addClass("CDB-Widget-list--noresults").removeClass("CDB-Widget-list--wrapped"),this.$el.html(s({q:this.dataviewModel.getSearchQuery()}))},_addItem:function(t,e){var i=new o({model:t,widgetModel:this.widgetModel,dataviewModel:this.dataviewModel});this.addView(i),e.append(i.render().el)},toggle:function(){this[this.widgetModel.isSearchEnabled()?"show":"hide"]()},_onSelectedItemChange:function(t,e){this.widgetModel.lockedCategories[e?"addItem":"removeItem"](t)}})},675:function(t,e,i){var n=i(0),r=i(1);t.exports=r.Collection.extend({addItem:function(t){this.isItemLocked(t.get("name"))||this.add(t)},addItems:function(t){n.each(t,function(t){this.isItemLocked(t.name)||this.add(t)},this)},resetItems:function(t){this.reset(t)},removeItem:function(t){var e=this.isItemLocked(t.get("name"));e&&this.remove(e)},removeItems:function(){this.reset([])},isItemLocked:function(t){return this.find(function(e){return e.get("name")===t})},getItemsName:function(){return this.pluck("name")}})},676:function(t,e,i){var n=i(6),r=i(927);t.exports=n.core.View.extend({className:"CDB-Widget-filter CDB-Widget-contentSpaced CDB-Widget-contentSpaced--sideMargins",events:{"click .js-all":"_onSelectAll","click .js-lock":"_lockCategories","click .js-unlock":"_unlockCategories"},initialize:function(){this.dataviewModel=this.options.dataviewModel,this.widgetModel=this.options.widgetModel,this._initBinds()},render:function(){var t=this.dataviewModel.filter.acceptedCategories.size(),e=this.dataviewModel.filter.rejectedCategories.size(),i=this.dataviewModel.filter.areAllRejected(),n=this.dataviewModel.getData().size(),o=this.widgetModel.isLocked();return this.$el.html(r({isSearchEnabled:this.widgetModel.isSearchEnabled(),isSearchApplied:this.dataviewModel.isSearchApplied(),isLocked:o,canBeLocked:this.widgetModel.canBeLocked(),allSelected:0===e&&0===t&&!i,canSelectAll:!o&&(e>0||t>0||i),noneSelected:i||!n&&!t,acceptedCats:t,totalLocked:this.widgetModel.lockedCategories.size(),totalCats:n})),this},_initBinds:function(){this.widgetModel.bind("change:search change:locked",this.render,this),this.widgetModel.lockedCategories.bind("change add remove",this.render,this),this.add_related_model(this.widgetModel),this.add_related_model(this.widgetModel.lockedCategories),this.dataviewModel.bind("change:data",this.render,this),this.add_related_model(this.dataviewModel);var t=this.dataviewModel.filter;t.acceptedCategories.bind("add remove reset",this.render,this),t.rejectedCategories.bind("add remove reset",this.render,this),this.add_related_model(t.rejectedCategories),this.add_related_model(t.acceptedCategories)},_lockCategories:function(){this.widgetModel.lockCategories()},_unlockCategories:function(){this.widgetModel.unlockCategories()},_onSelectAll:function(){this.dataviewModel.filter.acceptAll()}})},677:function(t,e,i){var n=i(301),r=i(929);t.exports=n.extend({className:"CDB-Widget-nav is-hidden CDB-Widget-contentSpaced",render:function(){this.clearSubViews(),this.$el.empty();var t=Math.ceil(this.dataviewModel.getSearchCount()/this.options.itemsPerPage);return this.$el.html(r({showPaginator:t>1,currentPage:this.model.get("page"),pages:t})),this._scrollToPage(),this},_setPage:function(){var t=this.dataviewModel.getSearchCount(),e=Math.ceil(t/this._ITEMS_PER_PAGE);this.model.get("page")>e-1&&this.model.set({page:0},{silent:!0})},toggle:function(){this[this.widgetModel.isSearchEnabled()?"show":"hide"]()},_onSearchClicked:function(){this.widgetModel.cleanSearch(),this.widgetModel.toggleSearch()}})},678:function(t,e,i){var n=i(0),r=i(6),o=i(21),s=i(931),a=i(930),l=i(77);t.exports=r.core.View.extend({className:"CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace",tagName:"dl",initialize:function(){this.widgetModel=this.options.widgetModel,this.dataviewModel=this.options.dataviewModel,this._initBinds()},render:function(){return this.$el.html(s({isSearchEnabled:this.widgetModel.isSearchEnabled(),isSearchApplied:this.dataviewModel.isSearchApplied(),isLocked:this.widgetModel.isLocked(),isOtherAvailable:this.dataviewModel.isOtherAvailable(),resultsCount:this.dataviewModel.getSearchCount(),totalCats:this._getCategoriesSize(),nullsPer:this._getNullPercentage(),catsPer:this._getCurrentCategoriesPercentage()})),new l({el:this.$el}).animateFromValues(this._getPreviousCategoriesPercentage(),this._getCurrentCategoriesPercentage(),".js-cats",a,{defaultValue:"-",animationSpeed:700,formatter:o.formatValue}),this._checkVisibility(),this},_initBinds:function(){this.dataviewModel.bind("change:data change:totalCount",this.render,this),this.widgetModel.bind("change:search change:locked",this.render,this),this.widgetModel.bind("change:show_stats",this._checkVisibility,this),this.add_related_model(this.dataviewModel),this.add_related_model(this.widgetModel)},_getNullPercentage:function(){var t=this.dataviewModel.get("nulls"),e=this.dataviewModel.get("totalCount")||0;return t?(t/e*100).toFixed(2):0},_getPreviousCategoriesPercentage:function(){var t=this.dataviewModel.previous("totalCount")||0,e=this.dataviewModel.getPreviousData();return this._getCategoriesPercentage(e,t)},_getCurrentCategoriesPercentage:function(){var t=this.dataviewModel.get("totalCount")||0,e=this.dataviewModel.getData().toJSON();return this._getCategoriesPercentage(e,t)},_getCategoriesPercentage:function(t,e){if(!e)return 0;var i=t.reduce(function(t,e){return e.agg?t:t+parseFloat(e.value)},0);return i?(i/e*100).toFixed(2):0},_getCategoriesSize:function(){return n.pluck(this.dataviewModel.getData().reject(function(t){return t.get("agg")}),"name").length},_checkVisibility:function(){this.$el.toggle(!!this.widgetModel.get("show_stats"))}})},679:function(t,e,i){var n=i(0),r=i(3),o=i(6),s=i(60),a=i(40),l=i(932),h=i(59),c=i(57),d=i(58);t.exports=o.core.View.extend({events:{"keyup .js-textInput":"_onKeyupInput","submit .js-form":"_onSubmitForm","click .js-applyLocked":"_applyLocked","click .js-autoStyle":"_autoStyle","click .js-cancelAutoStyle":"_cancelAutoStyle"},initialize:function(){if(!this.options.widgetModel)throw new Error("widgetModel is required");if(!this.options.dataviewModel)throw new Error("dataviewModel is required");if(!this.options.layerModel)throw new Error("layerModel is required");this.model=this.options.widgetModel,this.dataviewModel=this.options.dataviewModel,this.layerModel=this.options.layerModel,this._initBinds()},render:function(){this.clearSubViews();var t=this.dataviewModel.get("source").id,e=h.letter(t),i=h.getColorForLetter(e),n=this.dataviewModel.getSourceType()||"",r=this.layerModel.get("layer_name")||"";return this.$el.html(l({isCollapsed:this.model.get("collapsed"),isAutoStyleEnabled:this._isAutoStyleButtonVisible(),isAutoStyle:this.model.isAutoStyle(),title:this.model.get("title"),sourceId:t,sourceType:c.title(n),showSource:this.model.get("show_source")&&""!==e,sourceColor:i,layerName:d(r),columnName:this.dataviewModel.get("column"),q:this.dataviewModel.getSearchQuery(),isLocked:this.model.isLocked(),canBeLocked:this.model.canBeLocked(),isSearchEnabled:this.model.isSearchEnabled(),canShowApply:this.model.canApplyLocked()})),this._initViews(),this},_initBinds:function(){this.model.bind("change:search",this._onSearchToggled,this),this.model.bind("change:title change:collapsed change:autoStyle change:style",this.render,this),this.model.lockedCategories.bind("change add remove",this.render,this),this.add_related_model(this.model.lockedCategories),this.dataviewModel.bind("change:data",this.render,this),this.add_related_model(this.dataviewModel),this.dataviewModel.filter.bind("change",this.render,this),this.add_related_model(this.dataviewModel.filter),this.layerModel.bind("change:visible change:cartocss",this.render,this),this.layerModel.bind("change:layer_name",this.render,this),this.add_related_model(this.layerModel)},_initViews:function(){var t=new s({model:this.model,target:".js-actions",container:this.$el});this.addView(t);var e=new a({context:this.$el,target:".js-colors"});r("body").append(e.render().el),this.addView(e);var i=new a({context:this.$el,target:".js-actions"});r("body").append(i.render().el),this.addView(i)},_isAutoStyleButtonVisible:function(){return this.model.isAutoStyleEnabled()&&this.layerModel.get("visible")&&this.model.hasColorsAutoStyle()},_onSearchToggled:function(){var t=this.model.isSearchEnabled();this[t?"_bindESC":"_unbindESC"](),this.render(),t&&this._focusOnInput()},_onSubmitForm:function(t){t&&t.preventDefault();var e=this.$(".js-textInput").val();this.dataviewModel.getSearchQuery()!==e&&(this.dataviewModel.setSearchQuery(e),this.dataviewModel.isSearchValid()&&this.dataviewModel.applySearch())},_focusOnInput:function(){var t=this;setTimeout(function(){t.$(".js-textInput").focus()},0)},_onKeyupInput:n.debounce(function(t){var e=this.$(".js-textInput").val();13!==t.keyCode&&27!==t.keyCode&&""!==e&&this._onSubmitForm()},250),_bindESC:function(){r(document).bind("keyup."+this.cid,n.bind(this._onKeyUp,this))},_unbindESC:function(){r(document).unbind("keyup."+this.cid)},_onKeyUp:function(t){if(27===t.keyCode)return this._cancelSearch(),!1},_applyLocked:function(){this.model.toggleSearch(),this.model.applyLocked()},_autoStyle:function(){this.model.autoStyle()},_cancelAutoStyle:function(){this.model.cancelAutoStyle()},_cancelSearch:function(){this.model.cleanSearch(),this.model.disableSearch()},clean:function(){this._unbindESC(),o.core.View.prototype.clean.call(this)}})},680:function(t,e,i){var n=i(0),r=i(35),o=i(3),s=i(6),a=i(21),l=i(936),h=i(60),c=i(934),d=i(77),u=i(59),p=i(57),f=i(58),g=i(40);t.exports=s.core.View.extend({className:"CDB-Widget-body",initialize:function(){this._dataviewModel=this.model.dataviewModel,this._layerModel=this.model.layerModel,!0===this.model.get("hasInitialState")?this._initBinds():this.model.once("change:hasInitialState",this._onInitialState,this)},_onInitialState:function(){this._initBinds(),this.render()},render:function(){this.clearSubViews();var t=this._dataviewModel.get("data"),e=function(t){var e=r.format("0,000");return n.isNumber(t)?e(t.toFixed(2)):0},i=!n.isUndefined(this._dataviewModel.get("nulls"))&&a.formatNumber(this._dataviewModel.get("nulls"))||"-",o=this.model.get("collapsed"),s=this.model.get("prefix"),h=this.model.get("suffix"),g=this._dataviewModel.get("source").id,_=u.letter(g),m=u.getColorForLetter(_),v=this._dataviewModel.getSourceType()||"",w=this._layerModel.get("layer_name")||"";return this.$el.html(l({title:this.model.get("title"),sourceId:g,sourceType:p.title(v),showStats:this.model.get("show_stats"),showSource:this.model.get("show_source")&&""!==_,operation:this._dataviewModel.get("operation"),value:t,formatedValue:e(t),description:this.model.get("description"),nulls:i,prefix:s,suffix:h,isCollapsed:o,sourceColor:m,layerName:f(w)})),new d({el:this.$el}).animateValue(this._dataviewModel,"data",".js-value",c,{animationSpeed:700,formatter:e,templateData:{prefix:s,suffix:h}}),this.$el.toggleClass("is-collapsed",!!o),this._initViews(),this},_initBinds:function(){this.model.bind("change:title change:description change:collapsed change:prefix change:suffix",this.render,this),this._dataviewModel.bind("change:data",this.render,this),this.add_related_model(this._dataviewModel),this._layerModel.bind("change:layer_name",this.render,this),this.add_related_model(this._layerModel)},_initViews:function(){var t=new h({model:this.model,target:".js-actions",container:this.$(".js-header")});this.addView(t);var e=new g({context:this.$el,target:".js-actions"});o("body").append(e.render().el),this.addView(e)}})},681:function(t,e,i){var n=i(0),r=i(3),o=i(6),s=i(21),a=i(682),l=i(302),h=i(342),c=i(938),d=i(60),u=i(40),p=i(77),f=i(937),g=i(59),_=i(57),m=i(58);t.exports=o.core.View.extend({className:"CDB-Widget-body",defaults:{chartHeight:72},events:{"click .js-clear":"_resetWidget","click .js-zoom":"_zoom"},initialize:function(){this._dataviewModel=this.model.dataviewModel,this._layerModel=this.model.layerModel,this._originalData=this._dataviewModel.getUnfilteredDataModel(),this.filter=this._dataviewModel.filter,this.lockedByUser=!1,this._numberOfFilters=0,this._initStateApplied=!1;var t=this._initBinds.bind(this);this._originalData.once("change:data",function(){this._dataviewModel.fetch({complete:t})},this)},_initViews:function(){this._initTitleView(),this._initDropdownView(),this._renderMiniChart(),this._renderMainChart(),this._renderAllValues(),this._initTooltipView()},_initDropdownView:function(){var t=new d({model:this.model,target:".js-actions",container:this.$(".js-header"),flags:{normalizeHistogram:!0}});this.addView(t)},_initTooltipView:function(){var t=new u({context:this.histogramChartView,event:"hover"});r("body").append(t.render().el),this.addView(t)},_clearTooltip:function(){this.histogramChartView.trigger("hover",{target:null})},_initTitleView:function(){var t=new a({widgetModel:this.model,dataviewModel:this._dataviewModel,layerModel:this._layerModel});this.$(".js-title").append(t.render().el),this.addView(t)},_initBinds:function(){this.model.bind("change:normalized",function(){var t=this.model.get("normalized");this.histogramChartView.setNormalized(t),this.miniHistogramChartView.setNormalized(t)},this),this.model.bind("change:collapsed",this.render,this),!0===this.model.get("hasInitialState")?this._setInitialState():this.model.bind("change:hasInitialState",this._setInitialState,this),this._layerModel.bind("change:layer_name",this.render,this),this.add_related_model(this._layerModel)},_setInitialState:function(){0===this._dataviewModel.getData().length?this._dataviewModel.once("change:data",this._onInitialState,this):this._onInitialState()},_onInitialState:function(){this.add_related_model(this._dataviewModel),this.render(),!0===this.model.get("autoStyle")&&this.model.autoStyle(),this._hasRange()&&(this._numberOfFilters=1),this._isZoomed()&&(this._numberOfFilters=2),0!==this._numberOfFilters?this._setInitialRange():this._completeInitialState()},_setupRange:function(t,e,i,r){var o,s,a=0,l=t.length;n.isNumber(e)&&(o=n.findWhere(t,{start:e}),a=o?o.bin:0),n.isNumber(i)&&(s=n.findWhere(t,{end:i}),l=s?s.bin+1:t.length),(a&&0!==a||l&&l!==t.length)&&(this.filter.setRange(t[a].start,t[l-1].end),this._onChangeFilterEnabled(),this.histogramChartView.selectRange(a,l)),r&&r(a,l)},_setInitialRange:function(){var t=this._dataviewModel.getData(),e=this.model.get("min"),i=this.model.get("max"),n=void 0!==e||void 0!==i;this._setupRange(t,e,i,function(t,e){this.model.set({filter_enabled:n,lo_index:t,hi_index:e}),this._dataviewModel.bind("change:data",this._onHistogramDataChanged,this),this._initStateApplied=!0,this._isZoomed()?(this._onChangeZoomEnabled(),this._onZoomIn()):this._updateStats()}.bind(this))},_completeInitialState:function(){this._dataviewModel.bind("change:data",this._onHistogramDataChanged,this),this._initStateApplied=!0,this._updateStats()},_isZoomed:function(){return this.model.get("zoomed")},_hasRange:function(){var t=this.model.get("min"),e=this.model.get("max");return null!=t||null!=e},_onHistogramDataChanged:function(){this._dataviewModel.changed.url&&this._isZoomed()||(this.lockedByUser?this.lockedByUser=!1:(this._isZoomed()?this._filteredData=this._dataviewModel.getData():(this.histogramChartView.showShadowBars(),this.miniHistogramChartView.replaceData(this._dataviewModel.getData())),this.histogramChartView.replaceData(this._dataviewModel.getData())),this.unsettingRange&&this._unsetRange(),this._updateStats())},render:function(){this.clearSubViews(),this._unbinds();var t=this._dataviewModel.getData(),e=this._dataviewModel.hasNulls(),i=this._originalData.getData(),r=!n.size(t)&&!n.size(i),o=this._dataviewModel.get("source").id,s=g.letter(o),a=g.getColorForLetter(s),l=this._dataviewModel.getSourceType()||"",h=this._layerModel.get("layer_name")||"";return this.$el.html(c({title:this.model.get("title"),sourceId:o,sourceType:_.title(l),showStats:this.model.get("show_stats"),showNulls:e,showSource:this.model.get("show_source")&&""!==s,itemsCount:r?"-":t.length,isCollapsed:!!this.model.get("collapsed"),sourceColor:a,layerName:m(h)})),r?(this._addPlaceholder(),this._initTitleView()):(this._setupBindings(),this._initViews()),this},_unsetRange:function(){this.unsettingRange=!1,this.histogramChartView.replaceData(this._dataviewModel.getData()),this.model.set({lo_index:null,hi_index:null}),this._isZoomed()||this.histogramChartView.showShadowBars()},_addPlaceholder:function(){this.$(".js-content").append(h())},_renderMainChart:function(){this.histogramChartView=new l({type:"histogram",margin:{top:4,right:4,bottom:4,left:4},hasHandles:!0,hasAxisTip:!0,chartBarColor:this.model.getColor()||"#9DE0AD",width:this.canvasWidth,height:this.defaults.chartHeight,data:this._dataviewModel.getData(),dataviewModel:this._dataviewModel,layerModel:this._layerModel,originalData:this._originalData,displayShadowBars:!this.model.get("normalized"),normalized:this.model.get("normalized"),widgetModel:this.model}),this.$(".js-chart").append(this.histogramChartView.el),this.addView(this.histogramChartView),this.histogramChartView.bind("on_brush_end",this._onBrushEnd,this),this.histogramChartView.render().show(),this._updateStats()},_renderMiniChart:function(){this.miniHistogramChartView=new l({type:"histogram",className:"CDB-Chart--mini",mini:!0,margin:{top:0,right:4,bottom:4,left:4},height:40,showOnWidthChange:!1,dataviewModel:this._dataviewModel,layerModel:this._layerModel,data:this._dataviewModel.getData(),normalized:this.model.get("normalized"),chartBarColor:this.model.getColor()||"#9DE0AD",originalData:this._originalData,widgetModel:this.model}),this.addView(this.miniHistogramChartView),this.$(".js-mini-chart").append(this.miniHistogramChartView.el),this.miniHistogramChartView.bind("on_brush_end",this._onMiniRangeUpdated,this),this.miniHistogramChartView.render()},_setupBindings:function(){this._dataviewModel.bind("change:bins",this._onChangeBins,this),this.model.bind("change:zoomed",this._onChangeZoomed,this),this.model.bind("change:zoom_enabled",this._onChangeZoomEnabled,this),this.model.bind("change:filter_enabled",this._onChangeFilterEnabled,this),this.model.bind("change:total",this._onChangeTotal,this),this.model.bind("change:nulls",this._onChangeNulls,this),this.model.bind("change:max",this._onChangeMax,this),this.model.bind("change:min",this._onChangeMin,this),this.model.bind("change:avg",this._onChangeAvg,this)},_unbinds:function(){this._dataviewModel.off("change:bins",this._onChangeBins,this),this.model.off("change:zoomed",this._onChangeZoomed,this),this.model.off("change:zoom_enabled",this._onChangeZoomEnabled,this),this.model.off("change:filter_enabled",this._onChangeFilterEnabled,this),this.model.off("change:total",this._onChangeTotal,this),this.model.off("change:nulls",this._onChangeNulls,this),this.model.off("change:max",this._onChangeMax,this),this.model.off("change:min",this._onChangeMin,this),this.model.off("change:avg",this._onChangeAvg,this)},_onMiniRangeUpdated:function(t,e){this.lockedByUser=!1,this._clearTooltip(),this.histogramChartView.removeSelection();var i=this._originalData.getData();this.model.set({lo_index:t,hi_index:e,zlo_index:null,zhi_index:null}),this._applyBrushFilter(i,t,e)},_onBrushEnd:function(t,e){this._isZoomed()?this._onBrushEndFiltered(t,e):this._onBrushEndUnfiltered(t,e)},_onBrushEndFiltered:function(t,e){var i=this._filteredData;i&&i.length&&(this.model.get("zlo_index")!==t||this.model.get("zhi_index")!==e)&&(this._numberOfFilters=2,this.lockedByUser=!0,this.model.set({filter_enabled:!0,zlo_index:t,zhi_index:e}),this._applyBrushFilter(i,t,e))},_onBrushEndUnfiltered:function(t,e){var i=this._dataviewModel.getData();i&&i.length&&(this.model.get("lo_index")!==t||this.model.get("hi_index")!==e)&&(this._numberOfFilters=1,this.model.set({filter_enabled:!0,zoom_enabled:!0,lo_index:t,hi_index:e}),this._applyBrushFilter(i,t,e))},_applyBrushFilter:function(t,e,i){e!==i&&e>=0&&e<t.length&&i-1>=0&&i-1<t.length?(this.filter.setRange(t[e].start,t[i-1].end),this._updateStats()):console.error("Error accessing array bounds",e,i,t)},_onChangeFilterEnabled:function(){this.$(".js-filter").toggleClass("is-hidden",!this.model.get("filter_enabled"))},_onChangeBins:function(t,e){this._resetWidget()},_onChangeZoomEnabled:function(){this.$(".js-zoom").toggleClass("is-hidden",!this.model.get("zoom_enabled"))},_renderAllValues:function(){this._changeHeaderValue(".js-nulls","nulls",""),this._changeHeaderValue(".js-val","total","SELECTED"),this._changeHeaderValue(".js-max","max",""),this._changeHeaderValue(".js-min","min",""),this._changeHeaderValue(".js-avg","avg","")},_changeHeaderValue:function(t,e,i){if(null==this.model.get(e))return void this.$(t).text("0 "+i);this._addTitleForValue(t,e,i),new p({el:this.$el}).animateValue(this.model,e,t,f,{formatter:s.formatNumber,templateData:{suffix:" "+i}})},_onChangeNulls:function(){this._changeHeaderValue(".js-nulls","nulls","")},_onChangeTotal:function(){this._changeHeaderValue(".js-val","total","SELECTED")},_onChangeMax:function(){this._changeHeaderValue(".js-max","max","")},_onChangeMin:function(){this._changeHeaderValue(".js-min","min","")},_onChangeAvg:function(){this._changeHeaderValue(".js-avg","avg","")},_addTitleForValue:function(t,e,i){this.$(t).attr("title",this._formatNumberWithCommas(this.model.get(e).toFixed(2))+" "+i)},_formatNumberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},_calculateBars:function(t){var e,i,r,o,s,a;return this._isZoomed()&&2===this._numberOfFilters?(e=this.model.get("zmin"),i=this.model.get("zmax"),r=this.model.get("zlo_index"),o=this.model.get("zhi_index")):1===this._numberOfFilters&&(e=this.model.get("min"),i=this.model.get("max"),r=this.model.get("lo_index"),o=this.model.get("hi_index")),t.length>0?(n.isNumber(e)||n.isNumber(r)?n.isNumber(e)&&!n.isNumber(r)&&(s=n.findWhere(t,{start:e}),r=s&&s.bin||0):r=0,n.isNumber(i)||n.isNumber(o)?n.isNumber(i)&&!n.isNumber(o)&&(a=n.findWhere(t,{end:i}),o=a&&a.bin+1||t.length):o=t.length):(r=0,o=t.length),{loBarIndex:r,hiBarIndex:o}},_updateStats:function(){if(this._initStateApplied){var t;if(null!=(t=!this._isZoomed()||this._isZoomed()&&2===this._numberOfFilters?this.histogramChartView.model.get("data"):this.miniHistogramChartView.model.get("data"))){var e,i,r,o,s,a=this._dataviewModel.get("nulls"),l=this._calculateBars(t),h=l.loBarIndex,c=l.hiBarIndex;t&&t.length&&(e=this._calcSum(t,h,c),i=this._calcAvg(t,h,c),h>=0&&h<t.length&&(r=t[h].start),c>=0&&c-1<t.length&&(o=t[Math.max(0,c-1)].end),this._isZoomed()&&2===this._numberOfFilters?s={zmin:r,zmax:o,zlo_index:h,zhi_index:c}:this._isZoomed()||1!==this._numberOfFilters||(s={min:r,max:o,lo_index:h,hi_index:c}),s=n.extend({total:e,nulls:a,avg:i},s),this.model.set(s))}}},_calcAvg:function(t,e,i){var r=t.slice(e,i),o=this._calcSum(t,e,i);return o?n.reduce(r,function(t,e){return e.avg&&e.freq?e.avg*e.freq+t:t},0)/o:0},_calcSum:function(t,e,i){return n.reduce(t.slice(e,i),function(t,e){return e.freq+t},0)},_onChangeZoomed:function(){this.model.get("zoomed")?this._onZoomIn():(this._resetWidget(),this._dataviewModel.fetch())},_showMiniRange:function(){var t=this.model.get("lo_index"),e=this.model.get("hi_index");this.miniHistogramChartView.selectRange(t,e),this.miniHistogramChartView.show()},_zoom:function(){this.model.set({zoomed:!0,zoom_enabled:!1}),this.histogramChartView.removeSelection()},_onZoomIn:function(){this.lockedByUser=!1,this._showMiniRange(),this.histogramChartView.setBounds(),this._dataviewModel.enableFilter(),this._dataviewModel.fetch()},_resetWidget:function(){this._numberOfFilters=0,this.model.set({zoomed:!1,zoom_enabled:!1,filter_enabled:!1,lo_index:null,hi_index:null,min:null,max:null,zlo_index:null,zhi_index:null,zmin:null,zmax:null}),this.filter.unsetRange(),this._dataviewModel.disableFilter(),this.histogramChartView.unsetBounds(),this.miniHistogramChartView.hide(),this._clearTooltip(),this._updateStats()}})},682:function(t,e,i){var n=i(3),r=i(6),o=i(40),s=i(939);t.exports=r.core.View.extend({className:"CDB-Widget-title CDB-Widget-contentSpaced",events:{"click .js-autoStyle":"_autoStyle","click .js-cancelAutoStyle":"_cancelAutoStyle"},initialize:function(t){if(!t.widgetModel)throw new Error("widgetModel is required");if(!t.dataviewModel)throw new Error("dataviewModel is required");if(!t.layerModel)throw new Error("layerModel is required");this.widgetModel=t.widgetModel,this.dataviewModel=t.dataviewModel,this._layerModel=t.layerModel,this._initBinds()},render:function(){return this.clearSubViews(),this.$el.html(s({title:this.widgetModel.get("title"),isAutoStyleEnabled:this._isAutoStyleButtonVisible(),isAutoStyle:this.widgetModel.get("autoStyle"),isCollapsed:this.widgetModel.get("collapsed")})),this._initViews(),this},_initBinds:function(){this.widgetModel.bind("change:title change:collapsed change:autoStyle change:style",this.render,this),this.add_related_model(this.widgetModel),this._layerModel.bind("change:visible change:cartocss",this.render,this),this.add_related_model(this._layerModel)},_initViews:function(){var t=new o({context:this.$el,target:".js-sizes"});n("body").append(t.render().el),this.addView(t);var e=new o({context:this.$el,target:".js-actions"});n("body").append(e.render().el),this.addView(e)},_isAutoStyleButtonVisible:function(){var t=this._layerModel.get("meta"),e=this._layerModel.get("cartocss")||t&&t.cartocss,i=e&&this.widgetModel.hasColorsAutoStyle();return this.widgetModel.isAutoStyleEnabled()&&this._layerModel.get("visible")&&i},_autoStyle:function(){this.widgetModel.autoStyle()},_cancelAutoStyle:function(){this.widgetModel.cancelAutoStyle()}})},683:function(t,e,i){var n=i(0),r=i(78);t.exports=r.extend({defaults:{normalized:!0},defaultState:n.extend({autoStyle:!1,normalized:!1},r.prototype.defaultState),initialize:function(t,e){r.prototype.initialize.apply(this,arguments),this.on("change:collapsed",this._onCollapsedChange,this),this.on("change:style",this._updateAutoStyle,this),this.dataviewModel.once("change",function(){this.get("autoStyle")&&this.autoStyle()},this)},_onCollapsedChange:function(t,e){this.dataviewModel.set("enabled",!e)},getState:function(){var t=r.prototype.getState.call(this),e=this.dataviewModel.get("start"),i=this.dataviewModel.get("end"),o=this.get("min"),s=this.get("max"),a=function(t,r){return!!(n.isNumber(t)&&n.isNumber(r)&&t!==r&&Math.abs(t-r)>.01*Math.abs(e-i))};return a(e,o)?t.min=o:delete t.min,a(i,s)?t.max=s:delete t.max,!0===this.get("zoomed")&&(t.zoomed=!0),t}})},684:function(t,e,i){var n=i(0),r=i(6),o=i(343),s=i(941),a=i(303),l=i(304),h=i(60),c=i(59),d=i(57),u=i(58);t.exports=r.core.View.extend({className:"CDB-Widget-body CDB-Widget-body--timeSeries",initialize:function(){if(!this.model.dataviewModel)throw new Error("dataviewModel is required");if(!this.model.layerModel)throw new Error("layerModel is required");this._dataviewModel=this.model.dataviewModel,this._layerModel=this.model.layerModel,this._selectedAmount=0,this._initBinds()},render:function(){this.clearSubViews(),this.$el.empty();var t=this._dataviewModel.get("source").id,e=c.letter(t),i=c.getColorForLetter(e),n=this._dataviewModel.getSourceType()||"",r=this._layerModel.get("layer_name")||"";return this._isDataEmpty()||this._hasError()?this.$el.append(o({hasTorqueLayer:!1})):(this.$el.append(s({sourceId:t,sourceType:d.title(n),showSource:this.model.get("show_source")&&""!==e,sourceColor:i,layerName:u(r)})),this._createHistogramView(),this._createHeaderView(),this._createDropdownView(),this._updateRange()),this},_initBinds:function(){this._dataviewModel.once("error",function(){console.log("the tiler does not support non-torque layers just yet…")}),this.listenTo(this._dataviewModel,"change:data",this.render),this.listenToOnce(this.model,"change:hasInitialState",this.render),this.listenTo(this._layerModel,"change:layer_name",this.render),this.add_related_model(this._layerModel)},_createHistogramView:function(){this._histogramView&&this._histogramView.remove(),this._histogramView=new a({timeSeriesModel:this.model,dataviewModel:this._dataviewModel,layerModel:this._layerModel,rangeFilter:this._dataviewModel.filter,displayShadowBars:!this.model.get("normalized"),normalized:!!this.model.get("normalized")}),this.addView(this._histogramView),this.$(".js-content").append(this._histogramView.render().el)},_createHeaderView:function(){if(this._headerView&&this._headerView.remove(),this._headerView=new l({dataviewModel:this._dataviewModel,layerModel:this._layerModel,rangeFilter:this._dataviewModel.filter,timeSeriesModel:this.model,showClearButton:!0,selectedAmount:this._selectedAmount}),!this._histogramView)throw new Error("Histogram view must be instantiated before the header view");this._headerView.bind("resetFilter",this._histogramView.resetFilter,this._histogramView),this.addView(this._headerView),this.$(".js-title").append(this._headerView.render().el)},_createDropdownView:function(){this._dropdownView&&this._dropdownView.remove(),this._dropdownView=new h({model:this.model,target:".js-actions",container:this.$(".js-header"),flags:{localTimezone:"date"===this._dataviewModel.getColumnType(),normalizeHistogram:!0,canCollapse:!1}}),this.addView(this._dropdownView)},_updateRange:function(){var t=this._calculateBars(),e=this._dataviewModel.get("bins"),i=Math.max(t.loBarIndex,0),n=Math.min(t.hiBarIndex,e);(i>0||n<e)&&this._histogramView.selectRange(i,n)},_calculateBars:function(){var t,e,i=this._dataviewModel.getData(),r=this.model.get("min"),o=this.model.get("max"),s=this.model.get("lo_index"),a=this.model.get("hi_index");return i.length>0?(n.isNumber(r)||n.isNumber(s)?n.isNumber(r)&&!n.isNumber(s)&&(t=n.findWhere(i,{start:r}),s=t&&t.bin||0):s=0,n.isNumber(o)||n.isNumber(a)?n.isNumber(o)&&!n.isNumber(a)&&(e=n.findWhere(i,{end:o}),a=e&&e.bin+1||i.length):a=i.length):(s=0,a=i.length),{loBarIndex:s,hiBarIndex:a}},_appendView:function(t){this.addView(t),this.$el.append(t.render().el)},_isDataEmpty:function(){var t=this._dataviewModel.getUnfilteredData();return n.isEmpty(t)||0===n.size(t)},_hasError:function(){return this._dataviewModel.has("error")}})},685:function(t,e,i){var n=i(78),r=i(0);t.exports=n.extend({defaults:{normalized:!0,animated:!1},defaultState:r.extend({normalized:!1},n.prototype.defaultState),getState:function(){var t,e,i=n.prototype.getState.call(this),o=this.dataviewModel.get("start"),s=this.dataviewModel.get("end"),a=this.dataviewModel.get("data"),l=this.get("lo_index"),h=this.get("hi_index"),c=function(t,e){return!!(r.isNumber(t)&&r.isNumber(e)&&t!==e&&Math.abs(t-e)>.01*Math.abs(o-s))};return r.isNumber(l)&&r.isNumber(h)&&l<a.length&&h-1<a.length?(t=a[l].start,e=a[h-1].end):(t=o,e=s),c(o,t)&&(i.min=t),c(s,e)&&(i.max=e),i}})},686:function(t,e,i){var n=i(0),r=i(6),o=i(945),s=i(343),a=i(689),l=i(688),h=i(60),c=i(59),d=i(57),u=i(58);t.exports=r.core.View.extend({className:"CDB-Widget-body CDB-Widget-body--timeSeries",initialize:function(){if(!this.model.dataviewModel)throw new Error("dataviewModel is required");if(!this.model.layerModel)throw new Error("layerModel is required");this._dataviewModel=this.model.dataviewModel,this._layerModel=this.model.layerModel,this._originalData=this._dataviewModel.getUnfilteredDataModel(),this._selectedAmount=0,this._initBinds()},render:function(){this.clearSubViews();var t=this._dataviewModel.get("source").id,e=c.letter(t),i=c.getColorForLetter(e),n=this._dataviewModel.getSourceType()||"",r=this._layerModel.get("layer_name")||"";return this._isDataEmpty()?this.$el.html(s({hasTorqueLayer:!0})):(this.$el.html(o({sourceId:t,sourceType:d.title(n),showSource:this.model.get("show_source")&&""!==e,sourceColor:i,layerName:u(r)})),this._createHeaderView(),this._createTorqueHistogramView(),this._createDropdownView()),this},_createHeaderView:function(){this._headerView&&this._headerView.remove(),this._headerView=new l({el:this.$(".js-torque-header"),dataviewModel:this._dataviewModel,torqueLayerModel:this._layerModel,timeSeriesModel:this.model,selectedAmount:this._selectedAmount}),this.addView(this._headerView),this._headerView.render()},_createTorqueHistogramView:function(){this._histogramView&&this._histogramView.remove(),this._histogramView=new a({timeSeriesModel:this.model,dataviewModel:this._dataviewModel,rangeFilter:this._dataviewModel.filter,torqueLayerModel:this._layerModel,layerModel:this._layerModel,displayShadowBars:!this.model.get("normalized"),normalized:!!this.model.get("normalized")}),this.addView(this._histogramView),this.$el.append(this._histogramView.render().el)},_createDropdownView:function(){this._dropdownView&&this._dropdownView.remove(),this._dropdownView=new h({model:this.model,target:".js-actions",container:this.$(".js-header"),flags:{localTimezone:"date"===this._dataviewModel.getColumnType(),normalizeHistogram:!!this.model.get("normalized"),canCollapse:!1}}),this.addView(this._dropdownView)},_initBinds:function(){this.listenTo(this._originalData,"change:data",this._onOriginalDataChange),this.listenTo(this._dataviewModel,"change:data",this.render),this.listenTo(this._dataviewModel,"change:bins",this._onChangeBins),this.listenTo(this._layerModel,"change:layer_name",this.render),this.add_related_model(this._layerModel)},_isDataEmpty:function(){var t=this._dataviewModel.getData();return n.isEmpty(t)||0===n.size(t)},_onOriginalDataChange:function(){this._dataviewModel.fetch()},_onChangeBins:function(t,e){this._originalData.setBins(e)}})},687:function(t,e,i){var n=i(6),r=i(943);t.exports=n.core.View.extend({events:{"click .CDB-Widget-controlButton":"_onClick"},initialize:function(){this._torqueLayerModel=this.options.torqueLayerModel,this._rangeFilter=this.options.rangeFilter,this.listenTo(this._torqueLayerModel,"change:isRunning",this.render),this.listenTo(this._torqueLayerModel,"change:start change.end",this.render)},render:function(){return this.$el.html(r({running:this._torqueLayerModel.get("isRunning"),disabled:!this._rangeFilter.isEmpty()})),this},_onClick:function(){this._torqueLayerModel.get("isRunning")?this._torqueLayerModel.pause():this._torqueLayerModel.play()}})},688:function(t,e,i){var n=i(6),r=i(690),o=i(304),s=i(944);t.exports=n.core.View.extend({className:"CDB-Widget-contentSpaced",initialize:function(){this._dataviewModel=this.options.dataviewModel,this._torqueLayerModel=this.options.torqueLayerModel,this._rangeFilter=this._dataviewModel.filter,this._selectedAmount=this.options.selectedAmount,this._timeSeriesModel=this.options.timeSeriesModel,this.listenTo(this._rangeFilter,"change",this.render)},render:function(){var t=!0;return this.clearSubViews(),this.$el.addClass(this.className),this.$el.html(s()),this._rangeFilter.isEmpty()&&(this._appendView(".js-torque-controls",new r({dataviewModel:this._dataviewModel,torqueLayerModel:this._torqueLayerModel,timeSeriesModel:this._timeSeriesModel})),t=!1),this._createTimeSeriesHeaderView(t),this},_createTimeSeriesHeaderView:function(t){var e=new o({dataviewModel:this._dataviewModel,layerModel:this._torqueLayerModel,rangeFilter:this._dataviewModel.filter,showClearButton:t,timeSeriesModel:this._timeSeriesModel,selectedAmount:this._selectedAmount});this._appendView(".js-time-series-header",e),e.on("resetFilter",this._resetFilter,this)},_resetFilter:function(){this._torqueLayerModel.set({step:0}),this._torqueLayerModel.resetRenderRange()},_appendView:function(t,e){this.addView(e),this.$(t).append(e.render().el)}})},689:function(t,e,i){var n=i(0),r=i(303),o=i(691),s=i(687);t.exports=r.extend({defaults:n.extend({},r.prototype.defaults,{offsetLeft:34}),className:function(){return r.prototype.className+" CDB-Widget-content CDB-Widget-content--torqueTimeSeries u-flex"},initialize:function(){if(!this.options.torqueLayerModel)throw new Error("torqeLayerModel is required");if(!this.options.rangeFilter)throw new Error("rangeFilter is required");if(!this.options.dataviewModel)throw new Error("dataviewModel is required");if(!this.options.timeSeriesModel)throw new Error("timeSeriesModel is required");this._torqueLayerModel=this.options.torqueLayerModel,this._dataviewModel=this.options.dataviewModel,this._timeSeriesModel=this.options.timeSeriesModel,r.prototype.initialize.call(this)},_initBinds:function(){r.prototype._initBinds.call(this),this.listenTo(this._torqueLayerModel,"change:renderRange",this._onRenderRangeChanged),this.listenTo(this._torqueLayerModel,"change:steps change:start change:end",this._reSelectRange),this.listenTo(this._torqueLayerModel,"change:cartocss",this._onUpdateCartocss)},_createHistogramView:function(){this._chartType="date"===this._torqueLayerModel.get("column_type")?"time":"number",r.prototype._createHistogramView.call(this),this._torqueControls=new s({torqueLayerModel:this._torqueLayerModel,rangeFilter:this._rangeFilter}),this.addView(this._torqueControls),this.$el.prepend(this._torqueControls.render().el),this._chartView.setAnimated(),this._chartView.bind("on_brush_click",this._onBrushClick,this),this._timeSliderView=new o({dataviewModel:this._dataviewModel,chartView:this._chartView,torqueLayerModel:this._torqueLayerModel,timeSeriesModel:this._timeSeriesModel,rangeFilter:this._rangeFilter}),this.addView(this._timeSliderView),this._timeSliderView.render()},_onChangeData:function(){r.prototype._onChangeData.call(this),this._chartView&&this._reSelectRange()},_onRenderRangeChanged:function(t,e){void 0===e.start&&void 0===e.end&&(this._chartView.removeSelection(),this._rangeFilter.unsetRange())},_onBrushClick:function(t){var e=this._torqueLayerModel.get("steps"),i=Math.round(e*t);i===e&&(i-=1),r.prototype.resetFilter.apply(this),this._torqueLayerModel.set({step:i})},_onBrushEnd:function(){r.prototype._onBrushEnd.apply(this,arguments),this._reSelectRange()},_timeToStep:function(t){var e=this._torqueLayerModel.get("steps"),i=this._torqueLayerModel.get("start");return e*(1e3*t-i)/(this._torqueLayerModel.get("end")-i)},_reSelectRange:function(){if(this._rangeFilter.isEmpty())this._torqueLayerModel.play(),this._updateDuration(1);else{this._torqueLayerModel.pause();var t=this._rangeFilter.get("min"),e=this._rangeFilter.get("max"),i=this._timeToStep(t),r=this._timeToStep(e),o=this._dataviewModel.get("data"),s=n.findWhere(o,{start:t}),a=n.findWhere(o,{end:e});if(!s||!a)return this._torqueLayerModel.resetRenderRange();var l=this._torqueLayerModel.get("steps"),h=this._chartView.getSelectionExtent()/100;this._updateDuration(h),this._torqueLayerModel.renderRange(this._clampRangeVal(0,l,i),this._clampRangeVal(0,l,r))}},_updateDuration:function(t,e){if(this._torqueLayerModel.getAnimationDuration){var i=this._torqueLayerModel.getAnimationDuration(e||this._torqueLayerModel.get("cartocss"));this._torqueLayerModel.set("customDuration",Math.round(i*t))}},_onUpdateCartocss:function(t,e){var i;if(this._rangeFilter.isEmpty())i=1;else{var n=this._timeToStep(this._rangeFilter.get("min"));i=(this._timeToStep(this._rangeFilter.get("max"))-n)/this._torqueLayerModel.get("steps")}this._updateDuration(i,e,{silent:!0})},_clampRangeVal:function(t,e,i){return Math.max(t,Math.min(e,i))},_getMarginLeft:function(){return 16}})},690:function(t,e,i){var n=i(35),r=i(6),o=i(4),s=i(21),a=i(946);t.exports=r.core.View.extend({className:"CDB-Widget-timeSeriesTimeInfo",initialize:function(t){if(!t.torqueLayerModel)throw new Error("torqueLayerModel is required");if(!t.dataviewModel)throw new Error("dataviewModel is required");if(!t.timeSeriesModel)throw new Error("timeSeriesModel is required");this._torqueLayerModel=this.options.torqueLayerModel,this._dataviewModel=this.options.dataviewModel,this._timeSeriesModel=this.options.timeSeriesModel,this._initBinds()},render:function(){var t=this._torqueLayerModel.get("time"),e=this._torqueLayerModel.get("column_type"),i=n.scale.linear().domain([0,this._dataviewModel.get("data").length]).range([this._dataviewModel.get("start"),this._dataviewModel.get("end")]),r="",l=s.formatNumber;return"number"===e?r=a({time:l(i(this._torqueLayerModel.get("step")))}):"date"!==e||isNaN(t&&t.getTime())||(l=s.timestampFactory(this._dataviewModel.get("aggregation"),this._dataviewModel.getCurrentOffset()),r=a({time:l(o(t).unix())})),this.$el.html(r),this},_initBinds:function(){this.listenTo(this._torqueLayerModel,"change:step",this.render)}})},691:function(t,e,i){var n=i(35),r=i(6),o=i(4),s=i(21),a=i(114);t.exports=r.core.View.extend({defaults:{width:6,height:8},initialize:function(){if(!this.options.chartView)throw new Error("chartView is required");if(!this.options.torqueLayerModel)throw new Error("torqeLayerModel is required");if(!this.options.timeSeriesModel)throw new Error("timeSeriesModel is required");this.model=new r.core.Model,this._dataviewModel=this.options.dataviewModel,this._chartView=this.options.chartView,this._torqueLayerModel=this.options.torqueLayerModel,this._timeSeriesModel=this.options.timeSeriesModel,this._chartMargins=this._chartView.model.get("margin"),this._initBinds(),this._updateXScale(),this._createFormatter()},render:function(){if(!this.timeSlider){var t=n.behavior.drag().on("dragstart",this._onDragStart.bind(this)).on("drag",this._onDrag.bind(this)).on("dragend",this._onDragEnd.bind(this)),e=this._chartView.canvas.append("rect");this.timeSlider=e.attr("class","CDB-TimeSlider").attr("width",this.defaults.width).attr("height",this._calcHeight()).attr("rx",3).attr("ry",3).data([{x:0,y:0}]).attr("transform",this._translateXY).call(t),this.setElement(e.node())}return this._isTabletViewport()&&this._generateTimeSliderTip(),this},_isTabletViewport:function(){return a.isTabletViewport()},_generateTimeSliderTip:function(){var t=this._calcHeight()/2+3+2;t=Math.floor(t),this.timeSliderTip=this._chartView.canvas.select(".CDB-WidgetCanvas").append("g").attr("class","CDB-Chart-timeSliderTip").data([{x:16,y:t}]).attr("transform",this._translateXY),this.timeSliderTip.append("rect").attr("class","CDB-Chart-timeSliderTipRect").attr("rx","2").attr("ry","2").attr("height",17),this.timeSliderTip.append("text").attr("class","CDB-Text CDB-Size-small CDB-Chart-timeSliderTipText").attr("dy","11").attr("dx","0")},_onLocalTimezoneChanged:function(){this._createFormatter(),this._updateTimeSliderTip()},_updateTimeSliderTip:function(){var t=this,e=this._isDateTimeSeries()?this._torqueLayerModel.get("time"):this._torqueLayerModel.get("step");if(void 0!==e){var i=this._chartView.canvas,r=i.select(".CDB-Chart-timeSliderTipText"),s=n.scale.linear().domain([0,this._dataviewModel.get("data").length]).range([this._dataviewModel.get("start"),this._dataviewModel.get("end")]);if(r.data([e]).text(function(e){return t._isDateTimeSeries()?this.formatter(o(e).unix()):this.formatter(s(e))}.bind(this)),r.node()){var a=i.select(".CDB-Chart-timeSliderTipRect"),l=r.node().getBBox(),h=l.width,c=h+6,d=this._chartView.chartWidth()+16;a.attr("width",c),r.attr("dx",3),r.attr("dy",l.height-Math.abs((l.height-17)/2));var u=this._xScale(this._torqueLayerModel.get("step")),p=u+this.defaults.width-c/2,f=this._calcHeight()/2+3+2;f=Math.floor(f);var g=this.timeSliderTip.data();g[0].y=f;var _=p;p<16?_=16:p+c>=d&&(_=d-c),isNaN(_)||(g[0].x=_,this.timeSliderTip.data(g).transition().ease("linear").attr("transform",this._translateXY))}}},_initBinds:function(){this.listenTo(this._torqueLayerModel,"change:start change:end",this._updateChartandTimeslider),this.listenTo(this._torqueLayerModel,"change:step",this._onChangeStep),this.listenTo(this._torqueLayerModel,"change:time",this._onChangeTime),this.listenTo(this._torqueLayerModel,"change:steps",this._updateChartandTimeslider),this.listenTo(this._chartView.model,"change:width",this._updateChartandTimeslider),this.listenTo(this._chartView.model,"change:height",this._onChangeChartHeight),this.listenTo(this._dataviewModel,"change:bins",this._updateChartandTimeslider),this.listenTo(this._dataviewModel,"change:column_type",this._createFormatter),this.listenTo(this._dataviewModel.filter,"change:min change:max",this._onFilterMinMaxChange),this.listenTo(this._timeSeriesModel,"change:local_timezone",this._onLocalTimezoneChanged),this.listenTo(this._dataviewModel,"change:start change:end",this._updateChartandTimeslider)},clean:function(){this.timeSlider&&this.timeSlider.remove(),r.core.View.prototype.clean.call(this)},_onFilterMinMaxChange:function(t,e){this.$el.toggle(!e)},_onDragStart:function(){var t=this._torqueLayerModel.get("isRunning");t&&this._torqueLayerModel.pause(),this.model.set({isDragging:!0,wasRunning:t})},_onDrag:function(t,e){var i=t.x+n.event.dx;if(this._isWithinRange(i)){t.x=i,this.timeSlider.attr("transform",this._translateXY);var r=Math.round(this._xScale.invert(t.x));this._torqueLayerModel.setStep(r)}},_onDragEnd:function(){this.model.set("isDragging",!1),this.model.get("wasRunning")&&this._torqueLayerModel.play()},_translateXY:function(t){return"translate("+[t.x,t.y]+")"},_isWithinRange:function(t){return t>=this._chartMargins.left&&t<=this._width()-this._chartMargins.right},_onChangeStep:function(){if(this.timeSlider&&!this.model.get("isDragging")){var t=this.timeSlider.data(),e=this._xScale(this._torqueLayerModel.get("step"));isNaN(e)||(t[0].x=e,this.timeSlider.data(t).transition().ease("linear").attr("transform",this._translateXY))}},_onChangeChartHeight:function(){var t=this._isTabletViewport()?this._calcHeight()/2+3:this._calcHeight();this.timeSlider.attr("height",t)},_onChangeTime:function(){this._dataviewModel.filter.isEmpty()&&this._isTabletViewport()?(this._chartView.canvas.select(".CDB-Chart-timeSliderTip").node()||this._generateTimeSliderTip(),this._updateTimeSliderTip()):this._removeTimeSliderTip()},_removeTimeSliderTip:function(){var t=this._chartView.canvas.select(".CDB-Chart-timeSliderTip");t.node()&&t.remove()},_updateChartandTimeslider:function(){this._updateXScale(),this._onChangeStep()},_calcHeight:function(){return this._chartView.chartHeight()+this.defaults.height},_createFormatter:function(){this.formatter=s.formatNumber,this._isDateTimeSeries()&&(this.formatter=s.timestampFactory(this._dataviewModel.get("aggregation"),this._dataviewModel.getCurrentOffset()))},_isDateTimeSeries:function(){return"date"===this._dataviewModel.getColumnType()},_updateXScale:function(){var t=1e3*(this._dataviewModel.get("end")-this._dataviewModel.get("start")),e=(this._torqueLayerModel.get("start")-1e3*this._dataviewModel.get("start"))/t,i=(this._torqueLayerModel.get("end")-1e3*this._dataviewModel.get("start"))/t,r=e*this._width()+this._chartMargins.left,o=i*this._width()-this._chartMargins.right;r=r<0?this._chartMargins.left:r,o=o>this._width()?this._width()-this._chartMargins.right:o,this._xScale=n.scale.linear().domain([0,this._torqueLayerModel.get("steps")]).range([r,o])},_width:function(){return this._chartView.model.get("width")}})},692:function(t,e,i){var n=i(6),r=i(0),o=i(947),s=i(948);t.exports=n.core.View.extend({className:"CDB-Widget-body is-hidden",events:{"click .js-refresh":"_onRefreshClick"},initialize:function(t){this._title=t.title,this._errorModel=t.errorModel,this.listenTo(this._errorModel,"change",this._onErrorModelChanged)},render:function(){var t=this._errorModel.get("error");if(t){var e=this._errorModel.get("placeholder"),i=r.isFunction(e)?e():"";this.$el.addClass("CDB-Widget--"+t.level);var n=t.type?s({placeholder:i,error:t.error,title:this._title,message:t.message,refresh:t.refresh}):o({placeholder:i});this.$el.html(n)}return this},_onErrorModelChanged:function(){this._reset(),r.isEmpty(this._errorModel.get("error"))?this.$el.addClass("is-hidden"):this.$el.removeClass("is-hidden"),this.render()},_onRefreshClick:function(){this._errorModel.get("model").refresh()},_reset:function(){this.$el.removeClass("CDB-Widget--alert CDB-Widget--error"),this.$el.html("")}})},693:function(t,e,i){var n=i(6);t.exports=n.core.View.extend({className:"CDB-Widget-loader",initialize:function(){this._initBinds()},render:function(){return this.$el.append('<div class="CDB-Loader js-loader"></div>'),this},show:function(){this.$(".js-loader").addClass("is-visible"),clearTimeout(this._timeout)},hide:function(){var t=this;this._timeout=setTimeout(function(){t.$(".js-loader").removeClass("is-visible")},500)},_initBinds:function(){this.model.bind("loading",this.show,this),this.model.bind("error",function(t,e){(!e||e&&"abort"!==e.statusText)&&this.hide()},this),this.model.bind("loaded",this.hide,this)}})},694:function(t,e,i){var n=i(1),r=i(0),o=i(6),s=i(693),a=i(692),l=i(663),h=i(297),c={category:i(341),formula:i(935),histogram:i(342)};t.exports=o.core.View.extend({className:"CDB-Widget CDB-Widget--light",options:{columns_title:[]},initialize:function(){this.errorModel=new n.Model({});var t=this.model.dataviewModel;this.listenTo(this.model,"destroy",this.clean),this.listenTo(this.model,"error",this._onError),this.listenTo(t,"statusError",this._onError),this.listenTo(t,"sync change:data",this._onDataChanged)},render:function(){return this.clearSubViews(),this.$el.empty(),this._appendView(new s({model:this.model.dataviewModel})),this._appendView(new a({title:this.model.get("title"),errorModel:this.errorModel})),this._appendView(this.options.contentView),this},_onDataChanged:function(t){return this._noDataAvailable()?(this.options.contentView.$el.addClass("is-hidden"),this.errorModel.set({model:t,error:l({type:"no_data_available"}),placeholder:this._getPlaceholder()})):this._dataHasTooManyBins()?(this.options.contentView.$el.addClass("is-hidden"),this.errorModel.set({model:t,error:l({type:"too_many_bins"}),placeholder:this._getPlaceholder()})):void(r.isEmpty(this.errorModel.get("error"))||(this.errorModel.clear(),this.options.contentView.render(),this.options.contentView.$el.removeClass("is-hidden")))},_onError:function(t,e){if("abort"!==e.statusText){var i=this._extractError(e),n=l(i);this.options.contentView.$el.addClass("is-hidden"),this.errorModel.set({model:t,error:n,placeholder:this._getPlaceholder()})}},_appendView:function(t){this.$el.append(t.render().el),this.addView(t)},_noDataAvailable:function(){var t=this._isHistogram()?"totalAmount":"data",e=this.model.dataviewModel.get(t);return!e||r.isArray(e)&&r.isEmpty(e)},_dataHasTooManyBins:function(){if(this._isHistogram()){var t=this.model.dataviewModel.getUnfilteredData&&this.model.dataviewModel.getUnfilteredData();return!r.isEmpty(t)&&r.size(t)>367}return!1},_isHistogram:function(){return"histogram"===this.model.dataviewModel.get("type")},_extractError:function(t){var e=h(t,"responseJSON.errors_with_context",[]);return e.length>0?e[0]:t&&t.message?(t.type=t.type||"generic",t):{}},_getPlaceholder:function(){var t=this.model.dataviewModel.get("type");return c[t]}})},695:function(t,e,i){var n=i(0),r=i(1);t.exports=r.Collection.extend({comparator:"order",initialize:function(){this._allDataviewsFetched=!1,this._initBinds()},_initBinds:function(){this.bind("change:order",n.debounce(this._onChangeOrder.bind(this),10),this),this.bind("change:autoStyle",function(t,e){e&&this.each(function(e){e.layerModel&&e!==t&&e.layerModel.get("layer_name")===t.layerModel.get("layer_name")&&e.get("autoStyle")&&e.set("autoStyle",!1)})},this)},_onChangeOrder:function(){this.sort(),this.trigger("orderChanged",this)},getStates:function(){var t={};return this.each(function(e){var i=e.getState();n.isEmpty(i)||(t[e.get("id")]=i)}),t},setStates:function(t){for(var e in t)this.at(e).setState(t[e])},hasInitialState:function(){return this._allDataviewsFetched},initialState:function(){this._allDataviewsFetched=!0}})},696:function(t,e,i){"use strict";(function(e){var i=e.argv,n=i.indexOf("--"),r=function(t){t="--"+t;var e=i.indexOf(t);return-1!==e&&(-1===n||e<n)};t.exports=function(){return"FORCE_COLOR"in e.env||!(r("no-color")||r("no-colors")||r("color=false"))&&(!!(r("color")||r("colors")||r("color=true")||r("color=always"))||!(e.stdout&&!e.stdout.isTTY)&&("win32"===e.platform||"COLORTERM"in e.env||"dumb"!==e.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(e.env.TERM)))}()}).call(e,i(97))},700:function(t,e,i){"use strict";function n(t){if(t instanceof o)return new o(t.h,t.s,t.l,t.opacity);t instanceof a.a||(t=i.i(a.b)(t));var e=t.r/255,n=t.g/255,r=t.b/255,s=(_*r+f*e-g*n)/(_+f-g),h=r-s,c=(p*(n-s)-d*h)/u,m=Math.sqrt(c*c+h*h)/(p*s*(1-s)),v=m?Math.atan2(c,h)*l.a-120:NaN;return new o(v<0?v+360:v,m,s,t.opacity)}function r(t,e,i,r){return 1===arguments.length?n(t):new o(t,e,i,null==r?1:r)}function o(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}var s=i(117),a=i(116),l=i(308);e.a=r;var h=-.14861,c=1.78277,d=-.29227,u=-.90649,p=1.97294,f=p*u,g=p*c,_=c*d-u*h;i.i(s.a)(o,r,i.i(s.b)(a.c,{brighter:function(t){return t=null==t?a.d:Math.pow(a.d,t),new o(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a.e:Math.pow(a.e,t),new o(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*l.b,e=+this.l,i=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),r=Math.sin(t);return new a.a(255*(e+i*(h*n+c*r)),255*(e+i*(d*n+u*r)),255*(e+i*(p*n)),this.opacity)}}))},701:function(t,e,i){"use strict";function n(t){if(t instanceof o)return new o(t.l,t.a,t.b,t.opacity);if(t instanceof u){var e=t.h*g.b;return new o(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof f.a||(t=i.i(f.b)(t));var n=h(t.r),r=h(t.g),a=h(t.b),l=s((.4124564*n+.3575761*r+.1804375*a)/_),c=s((.2126729*n+.7151522*r+.072175*a)/m);return new o(116*c-16,500*(l-c),200*(c-s((.0193339*n+.119192*r+.9503041*a)/v)),t.opacity)}function r(t,e,i,r){return 1===arguments.length?n(t):new o(t,e,i,null==r?1:r)}function o(t,e,i,n){this.l=+t,this.a=+e,this.b=+i,this.opacity=+n}function s(t){return t>C?Math.pow(t,1/3):t/y+w}function a(t){return t>b?t*t*t:y*(t-w)}function l(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function h(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function c(t){if(t instanceof u)return new u(t.h,t.c,t.l,t.opacity);t instanceof o||(t=n(t));var e=Math.atan2(t.b,t.a)*g.a;return new u(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function d(t,e,i,n){return 1===arguments.length?c(t):new u(t,e,i,null==n?1:n)}function u(t,e,i,n){this.h=+t,this.c=+e,this.l=+i,this.opacity=+n}var p=i(117),f=i(116),g=i(308);e.b=r,e.a=d;var _=.95047,m=1,v=1.08883,w=4/29,b=6/29,y=3*b*b,C=b*b*b;i.i(p.a)(o,r,i.i(p.b)(f.c,{brighter:function(t){return new o(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new o(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return t=m*a(t),e=_*a(e),i=v*a(i),new f.a(l(3.2404542*e-1.5371385*t-.4985314*i),l(-.969266*e+1.8760108*t+.041556*i),l(.0556434*e-.2040259*t+1.0572252*i),this.opacity)}})),i.i(p.a)(u,d,i.i(p.b)(f.c,{brighter:function(t){return new u(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new u(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return n(this).rgb()}}))},703:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(119);i.d(e,"interpolate",function(){return n.a});var r=i(309);i.d(e,"interpolateArray",function(){return r.a});var o=i(118);i.d(e,"interpolateBasis",function(){return o.a});var s=i(310);i.d(e,"interpolateBasisClosed",function(){return s.a});var a=i(312);i.d(e,"interpolateDate",function(){return a.a});var l=i(79);i.d(e,"interpolateNumber",function(){return l.a});var h=i(313);i.d(e,"interpolateObject",function(){return h.a});var c=i(709);i.d(e,"interpolateRound",function(){return c.a});var d=i(315);i.d(e,"interpolateString",function(){return d.a});var u=i(711);i.d(e,"interpolateTransformCss",function(){return u.a}),i.d(e,"interpolateTransformSvg",function(){return u.b});var p=i(713);i.d(e,"interpolateZoom",function(){return p.a});var f=i(314);i.d(e,"interpolateRgb",function(){return f.a}),i.d(e,"interpolateRgbBasis",function(){return f.b}),i.d(e,"interpolateRgbBasisClosed",function(){return f.c});var g=i(706);i.d(e,"interpolateHsl",function(){return g.a}),i.d(e,"interpolateHslLong",function(){return g.b});var _=i(707);i.d(e,"interpolateLab",function(){return _.a});var m=i(705);i.d(e,"interpolateHcl",function(){return m.a}),i.d(e,"interpolateHclLong",function(){return m.b});var v=i(704);i.d(e,"interpolateCubehelix",function(){return v.a}),i.d(e,"interpolateCubehelixLong",function(){return v.b});var w=i(708);i.d(e,"quantize",function(){return w.a})},704:function(t,e,i){"use strict";function n(t){return function e(n){function s(e,s){var a=t((e=i.i(r.a)(e)).h,(s=i.i(r.a)(s)).h),l=i.i(o.a)(e.s,s.s),h=i.i(o.a)(e.l,s.l),c=i.i(o.a)(e.opacity,s.opacity);return function(t){return e.h=a(t),e.s=l(t),e.l=h(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,s.gamma=e,s}(1)}var r=i(41),o=i(61);i.d(e,"b",function(){return s}),e.a=n(o.b);var s=n(o.a)},705:function(t,e,i){"use strict";function n(t){return function(e,n){var s=t((e=i.i(r.b)(e)).h,(n=i.i(r.b)(n)).h),a=i.i(o.a)(e.c,n.c),l=i.i(o.a)(e.l,n.l),h=i.i(o.a)(e.opacity,n.opacity);return function(t){return e.h=s(t),e.c=a(t),e.l=l(t),e.opacity=h(t),e+""}}}var r=i(41),o=i(61);i.d(e,"b",function(){return s}),e.a=n(o.b);var s=n(o.a)},706:function(t,e,i){"use strict";function n(t){return function(e,n){var s=t((e=i.i(r.d)(e)).h,(n=i.i(r.d)(n)).h),a=i.i(o.a)(e.s,n.s),l=i.i(o.a)(e.l,n.l),h=i.i(o.a)(e.opacity,n.opacity);return function(t){return e.h=s(t),e.s=a(t),e.l=l(t),e.opacity=h(t),e+""}}}var r=i(41),o=i(61);i.d(e,"b",function(){return s}),e.a=n(o.b);var s=n(o.a)},707:function(t,e,i){"use strict";function n(t,e){var n=i.i(o.a)((t=i.i(r.c)(t)).l,(e=i.i(r.c)(e)).l),s=i.i(o.a)(t.a,e.a),a=i.i(o.a)(t.b,e.b),l=i.i(o.a)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=s(e),t.b=a(e),t.opacity=l(e),t+""}}var r=i(41),o=i(61);e.a=n},708:function(t,e,i){"use strict";e.a=function(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t(n/(e-1));return i}},709:function(t,e,i){"use strict";e.a=function(t,e){return t=+t,e-=t,function(i){return Math.round(t+e*i)}}},710:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=180/Math.PI,r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.b=function(t,e,i,r,o,s){var a,l,h;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(h=t*i+e*r)&&(i-=t*h,r-=e*h),(l=Math.sqrt(i*i+r*r))&&(i/=l,r/=l,h/=l),t*r<e*i&&(t=-t,e=-e,h=-h,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,t)*n,skewX:Math.atan(h)*n,scaleX:a,scaleY:l}}},711:function(t,e,i){"use strict";function n(t,e,n,o){function s(t){return t.length?t.pop()+" ":""}function a(t,o,s,a,l,h){if(t!==s||o!==a){var c=l.push("translate(",null,e,null,n);h.push({i:c-4,x:i.i(r.a)(t,s)},{i:c-2,x:i.i(r.a)(o,a)})}else(s||a)&&l.push("translate("+s+e+a+n)}function l(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(s(n)+"rotate(",null,o)-2,x:i.i(r.a)(t,e)})):e&&n.push(s(n)+"rotate("+e+o)}function h(t,e,n,a){t!==e?a.push({i:n.push(s(n)+"skewX(",null,o)-2,x:i.i(r.a)(t,e)}):e&&n.push(s(n)+"skewX("+e+o)}function c(t,e,n,o,a,l){if(t!==n||e!==o){var h=a.push(s(a)+"scale(",null,",",null,")");l.push({i:h-4,x:i.i(r.a)(t,n)},{i:h-2,x:i.i(r.a)(e,o)})}else 1===n&&1===o||a.push(s(a)+"scale("+n+","+o+")")}return function(e,i){var n=[],r=[];return e=t(e),i=t(i),a(e.translateX,e.translateY,i.translateX,i.translateY,n,r),l(e.rotate,i.rotate,n,r),h(e.skewX,i.skewX,n,r),c(e.scaleX,e.scaleY,i.scaleX,i.scaleY,n,r),e=i=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}}var r=i(79),o=i(712);i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a});var s=n(o.a,"px, ","px)","deg)"),a=n(o.b,", ",")",")")},712:function(t,e,i){"use strict";function n(t){return"none"===t?o.a:(s||(s=document.createElement("DIV"),a=document.documentElement,l=document.defaultView),s.style.transform=t,t=l.getComputedStyle(a.appendChild(s),null).getPropertyValue("transform"),a.removeChild(s),t=t.slice(7,-1).split(","),i.i(o.b)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function r(t){return null==t?o.a:(h||(h=document.createElementNS("http://www.w3.org/2000/svg","g")),h.setAttribute("transform",t),(t=h.transform.baseVal.consolidate())?(t=t.matrix,i.i(o.b)(t.a,t.b,t.c,t.d,t.e,t.f)):o.a)}var o=i(710);e.a=n,e.b=r;var s,a,l,h},713:function(t,e,i){"use strict";function n(t){return((t=Math.exp(t))+1/t)/2}function r(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}var s=Math.SQRT2;e.a=function(t,e){var i,a,l=t[0],h=t[1],c=t[2],d=e[0],u=e[1],p=e[2],f=d-l,g=u-h,_=f*f+g*g;if(_<1e-12)a=Math.log(p/c)/s,i=function(t){return[l+t*f,h+t*g,c*Math.exp(s*t*a)]};else{var m=Math.sqrt(_),v=(p*p-c*c+4*_)/(2*c*2*m),w=(p*p-c*c-4*_)/(2*p*2*m),b=Math.log(Math.sqrt(v*v+1)-v),y=Math.log(Math.sqrt(w*w+1)-w);a=(y-b)/s,i=function(t){var e=t*a,i=n(b),d=c/(2*m)*(i*o(s*e+b)-r(b));return[l+d*f,h+d*g,c*i/n(s*e+b)]}}return i.duration=1e3*a,i}},715:function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=Array.prototype.slice,s=i(716),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),h=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},u={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!u["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),f=function(t){if("undefined"==typeof window||!p)return d(t);try{return d(t)}catch(t){return!1}},g=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===r.call(t),o=s(t),a=e&&"[object String]"===r.call(t),d=[];if(!e&&!i&&!o)throw new TypeError("Object.keys called on a non-object");var u=h&&i;if(a&&t.length>0&&!n.call(t,0))for(var p=0;p<t.length;++p)d.push(String(p));if(o&&t.length>0)for(var g=0;g<t.length;++g)d.push(String(g));else for(var _ in t)u&&"prototype"===_||!n.call(t,_)||d.push(String(_));if(l)for(var m=f(t),v=0;v<c.length;++v)m&&"constructor"===c[v]||!n.call(t,c[v])||d.push(c[v]);return d};g.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(s(e)?o.call(e):e)}}}else Object.keys=g;return Object.keys||g},t.exports=g},716:function(t,e,i){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),i="[object Arguments]"===e;return i||(i="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),i}},719:function(t,e,i){"use strict";var n=i(721),r=i(720),o=i(723),s=i(722),a=i(318),l=i(724),h=i(317),c={ToPrimitive:l,ToBoolean:function(t){return!!t},ToNumber:function(t){return Number(t)},ToInteger:function(t){var e=this.ToNumber(t);return n(e)?0:0!==e&&r(e)?o(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(n(e)||0===e||!r(e))return 0;var i=o(e)*Math.floor(Math.abs(e));return s(i,65536)},ToString:function(t){return String(t)},ToObject:function(t){return this.CheckObjectCoercible(t),Object(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new TypeError(e||"Cannot call method on "+t);return t},IsCallable:a,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:n(t)&&n(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in t)if(h(t,i)&&!e[i])return!1;var n=h(t,"[[Value]]"),r=h(t,"[[Get]]")||h(t,"[[Set]]");if(n&&r)throw new TypeError("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");return!(!h(t,"[[Get]]")&&!h(t,"[[Set]]"))},IsDataDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");return!(!h(t,"[[Value]]")&&!h(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new TypeError("ToPropertyDescriptor requires an object");var e={};if(h(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),h(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),h(t,"value")&&(e["[[Value]]"]=t.value),h(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),h(t,"get")){var i=t.get;if(void 0!==i&&!this.IsCallable(i))throw new TypeError("getter must be a function");e["[[Get]]"]=i}if(h(t,"set")){var n=t.set;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("setter must be a function");e["[[Set]]"]=n}if((h(e,"[[Get]]")||h(e,"[[Set]]"))&&(h(e,"[[Value]]")||h(e,"[[Writable]]")))throw new TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=c},720:function(t,e){var i=Number.isNaN||function(t){return t!==t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!i(t)&&t!==1/0&&t!==-1/0}},721:function(t,e){t.exports=Number.isNaN||function(t){return t!==t}},722:function(t,e){t.exports=function(t,e){var i=t%e;return Math.floor(i>=0?i:i+e)}},723:function(t,e){t.exports=function(t){return t>=0?1:-1}},724:function(t,e,i){"use strict";var n=Object.prototype.toString,r=i(725),o=i(318),s={"[[DefaultValue]]":function(t,e){var i=e||("[object Date]"===n.call(t)?String:Number);if(i===String||i===Number){var s,a,l=i===String?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<l.length;++a)if(o(t[l[a]])&&(s=t[l[a]](),r(s)))return s;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};t.exports=function(t,e){return r(t)?t:s["[[DefaultValue]]"](t,e)}},725:function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},726:function(t,e,i){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(n,"\\$&")}},727:function(t,e,i){function n(t,e,i){if(!a(e))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),"[object Array]"===l.call(t)?r(t,e,i):"string"==typeof t?o(t,e,i):s(t,e,i)}function r(t,e,i){for(var n=0,r=t.length;n<r;n++)h.call(t,n)&&e.call(i,t[n],n,t)}function o(t,e,i){for(var n=0,r=t.length;n<r;n++)e.call(i,t.charAt(n),n,t)}function s(t,e,i){for(var n in t)h.call(t,n)&&e.call(i,t[n],n,t)}var a=i(733);t.exports=n;var l=Object.prototype.toString,h=Object.prototype.hasOwnProperty},728:function(t,e){var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,e,r){if("[object Function]"!==n.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var s=0;s<o;s++)e.call(r,t[s],s,t);else for(var a in t)i.call(t,a)&&e.call(r,t[a],a,t)}},729:function(t,e,i){"use strict";var n=Array.prototype.slice,r=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==r.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var i,o=n.call(arguments,1),s=function(){if(this instanceof i){var r=e.apply(this,o.concat(n.call(arguments)));return Object(r)===r?r:this}return e.apply(t,o.concat(n.call(arguments)))},a=Math.max(0,e.length-o.length),l=[],h=0;h<a;h++)l.push("$"+h);if(i=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var c=function(){};c.prototype=e.prototype,i.prototype=new c,c.prototype=null}return i}},732:function(t,e,i){"use strict";var n=i(296),r=new RegExp(n().source);t.exports=r.test.bind(r)},733:function(t,e){function i(t){var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=i;var n=Object.prototype.toString},736:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(82),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="decl",o.isNested=!0,o.nodes||(o.nodes=[]),o}return o(e,t),e}(a.default);e.default=l,t.exports=e.default},737:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var i=new s.default(t,e),n=new l.default(i);return n.tokenize(),n.loop(),n.root}e.__esModule=!0,e.default=r;var o=i(124),s=n(o),a=i(738),l=n(a);t.exports=e.default},738:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(123),l=n(a),h=i(324),c=n(h),d=i(736),u=n(d),p=i(742),f=n(p),g=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.tokenize=function(){this.tokens=(0,f.default)(this.input)},e.prototype.rule=function(e){for(var i=!1,n=0,r="",o=e,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var h=l;if(i)"comment"!==h[0]&&"{"!==h[0]&&(r+=h[1]);else{if("space"===h[0]&&-1!==h[1].indexOf("\n"))break;"("===h[0]?n+=1:")"===h[0]?n-=1:0===n&&":"===h[0]&&(i=!0)}}if(!i||""===r.trim()||/^[a-zA-Z-:#]/.test(r))t.prototype.rule.call(this,e);else{e.pop();var c=new u.default;this.init(c);var d=e[e.length-1];for(d[4]?c.source.end={line:d[4],column:d[5]}:c.source.end={line:d[2],column:d[3]};"word"!==e[0][0];)c.raws.before+=e.shift()[1];for(c.source.start={line:e[0][2],column:e[0][3]},c.prop="";e.length;){var p=e[0][0];if(":"===p||"space"===p||"comment"===p)break;c.prop+=e.shift()[1]}c.raws.between="";for(var f=void 0;e.length;){if(f=e.shift(),":"===f[0]){c.raws.between+=f[1];break}c.raws.between+=f[1]}"_"!==c.prop[0]&&"*"!==c.prop[0]||(c.raws.before+=c.prop[0],c.prop=c.prop.slice(1)),c.raws.between+=this.spacesFromStart(e),this.precheckMissedSemicolon(e);for(var g=e.length-1;g>0;g--){if(f=e[g],"!important"===f[1]){c.important=!0;var _=this.stringFrom(e,g);" !important"!==(_=this.spacesFromEnd(e)+_)&&(c.raws.important=_);break}if("important"===f[1]){for(var m=e.slice(0),v="",w=g;w>0;w--){var b=m[w][0];if(0===v.trim().indexOf("!")&&"space"!==b)break;v=m.pop()[1]+v}0===v.trim().indexOf("!")&&(c.important=!0,c.raws.important=v,e=m)}if("space"!==f[0]&&"comment"!==f[0])break}this.raw(c,"value",e),-1!==c.value.indexOf(":")&&this.checkMissedSemicolon(e),this.current=c}},e.prototype.comment=function(e){if("inline"===e[6]){var i=new l.default;this.init(i,e[2],e[3]),i.raws.inline=!0,i.source.end={line:e[4],column:e[5]};var n=e[1].slice(2);if(/^\s*$/.test(n))i.text="",i.raws.left=n,i.raws.right="";else{var r=n.match(/^(\s*)([^]*[^\s])(\s*)$/),o=r[2].replace(/(\*\/|\/\*)/g,"*//*");i.text=o,i.raws.left=r[1],i.raws.right=r[3],i.raws.text=r[2]}}else t.prototype.comment.call(this,e)},e}(c.default);e.default=g,t.exports=e.default},739:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(127),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.comment=function(t){var e=this.raw(t,"left","commentLeft"),i=this.raw(t,"right","commentRight");if(t.raws.inline){var n=t.raws.text||t.text;this.builder("//"+e+n+i,t)}else this.builder("/*"+e+t.text+i+"*/",t)},e.prototype.decl=function(e,i){if(e.isNested){var n=this.raw(e,"between","colon"),r=e.prop+n+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),this.builder(r+"{",e,"start");var o=void 0;e.nodes&&e.nodes.length?(this.body(e),o=this.raw(e,"after")):o=this.raw(e,"after","emptyBody"),o&&this.builder(o),this.builder("}",e,"end")}else t.prototype.decl.call(this,e,i)},e}(a.default);e.default=l,t.exports=e.default},740:function(t,e,i){"use strict";function n(t,e){new o.default(e).stringify(t)}e.__esModule=!0,e.default=n;var r=i(739),o=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=e.default},741:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(740),o=n(r),s=i(737),a=n(s);e.default={parse:a.default,stringify:o.default},t.exports=e.default},742:function(t,e,i){"use strict";function n(t){function e(e){throw t.error("Unclosed "+e,Q,Y-U)}for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],T=t.css.valueOf(),j=i.ignoreErrors,A=void 0,z=void 0,E=void 0,F=void 0,V=void 0,L=void 0,W=void 0,I=void 0,R=void 0,q=void 0,N=void 0,O=void 0,P=void 0,$=void 0,H=T.length,U=-1,Q=1,Y=0;Y<H;){switch(A=T.charCodeAt(Y),(A===l||A===c||A===u&&T.charCodeAt(Y+1)!==l)&&(U=Y,Q+=1),A){case l:case h:case d:case u:case c:z=Y;do{z+=1,(A=T.charCodeAt(z))===l&&(U=z,Q+=1)}while(A===h||A===l||A===d||A===u||A===c);n.push(["space",T.slice(Y,z)]),Y=z-1;break;case p:n.push(["[","[",Q,Y-U]);break;case f:n.push(["]","]",Q,Y-U]);break;case m:n.push(["{","{",Q,Y-U]);break;case v:n.push(["}","}",Q,Y-U]);break;case x:n.push(["word",",",Q,Y-U,Q,Y-U+1]);break;case y:n.push([":",":",Q,Y-U]);break;case w:n.push([";",";",Q,Y-U]);break;case g:if(O=n.length?n[n.length-1][1]:"",P=T.charCodeAt(Y+1),"url"===O&&P!==r&&P!==o&&P!==h&&P!==l&&P!==d&&P!==c&&P!==u){for($=1,q=!1,z=Y+1;z<=T.length-1;){if((P=T.charCodeAt(z))===s)q=!q;else if(P===g)$+=1;else if(P===_&&0==($-=1))break;z+=1}n.push(["brackets",T.slice(Y,z+1),Q,Y-U,Q,z-U]),Y=z}else z=T.indexOf(")",Y+1),L=T.slice(Y,z+1),-1===z||D.test(L)?n.push(["(","(",Q,Y-U]):(n.push(["brackets",L,Q,Y-U,Q,z-U]),Y=z);break;case _:n.push([")",")",Q,Y-U]);break;case r:case o:E=A===r?"'":'"',z=Y;do{if(q=!1,-1===(z=T.indexOf(E,z+1))){if(j){z=Y+1;break}e("quote")}for(N=z;T.charCodeAt(N-1)===s;)N-=1,q=!q}while(q);L=T.slice(Y,z+1),F=L.split("\n"),V=F.length-1,V>0?(I=Q+V,R=z-F[V].length):(I=Q,R=U),n.push(["string",T.slice(Y,z+1),Q,Y-U,I,z-R]),U=R,Q=I,Y=z;break;case C:M.lastIndex=Y+1,M.test(T),z=0===M.lastIndex?T.length-1:M.lastIndex-2,n.push(["at-word",T.slice(Y,z+1),Q,Y-U,Q,z-U]),Y=z;break;case s:for(z=Y,W=!0;T.charCodeAt(z+1)===s;)z+=1,W=!W;A=T.charCodeAt(z+1),W&&A!==a&&A!==h&&A!==l&&A!==d&&A!==u&&A!==c&&(z+=1),n.push(["word",T.slice(Y,z+1),Q,Y-U,Q,z-U]),Y=z;break;default:if(P=T.charCodeAt(Y+1),A===S&&P===m){var Z=1;for(z=Y;Z>0;)z+=1,T.length<=z&&e("interpolation"),A=T.charCodeAt(z),P=T.charCodeAt(z+1),A===v?Z-=1:A===S&&P===m&&(Z+=1);L=T.slice(Y,z+1),F=L.split("\n"),V=F.length-1,V>0?(I=Q+V,R=z-F[V].length):(I=Q,R=U),n.push(["word",L,Q,Y-U,I,z-R]),U=R,Q=I,Y=z}else A===a&&P===b?(z=T.indexOf("*/",Y+2)+1,0===z&&(j?z=T.length:e("comment")),L=T.slice(Y,z+1),F=L.split("\n"),V=F.length-1,V>0?(I=Q+V,R=z-F[V].length):(I=Q,R=U),n.push(["comment",L,Q,Y-U,I,z-R]),U=R,Q=I,Y=z):A===a&&P===a?(k.lastIndex=Y+1,k.test(T),z=0===k.lastIndex?T.length-1:k.lastIndex-2,L=T.slice(Y,z+1),n.push(["comment",L,Q,Y-U,Q,z-U,"inline"]),Y=z):(B.lastIndex=Y+1,B.test(T),z=0===B.lastIndex?T.length-1:B.lastIndex-2,n.push(["word",T.slice(Y,z+1),Q,Y-U,Q,z-U]),Y=z)}Y++}return n}e.__esModule=!0,e.default=n;var r=39,o=34,s=92,a=47,l=10,h=32,c=12,d=9,u=13,p=91,f=93,g=40,_=41,m=123,v=125,w=59,b=42,y=58,C=64,x=44,S=35,M=/[ \n\t\r\f\{\(\)'"\\;\/\[\]#]/g,B=/[ \n\t\r\f\(\)\{\}:;@!'"\\\]\[#]|\/(?=\*)/g,D=/.[\\\/\("'\n]/,k=/[\r\f\n]/g;t.exports=e.default},743:function(t,e,i){"use strict";e.__esModule=!0;var n={split:function(t,e,i){for(var n=[],r="",o=!1,s=0,a=!1,l=!1,h=0;h<t.length;h++){var c=t[h];a?l?l=!1:"\\"===c?l=!0:c===a&&(a=!1):'"'===c||"'"===c?a=c:"("===c?s+=1:")"===c?s>0&&(s-=1):0===s&&-1!==e.indexOf(c)&&(o=!0),o?(""!==r&&n.push(r.trim()),r="",o=!1):r+=c}return(i||""!==r)&&n.push(r.trim()),n},space:function(t){var e=[" ","\n","\t"];return n.split(t,e)},comma:function(t){return n.split(t,[","],!0)}};e.default=n,t.exports=e.default},744:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(141),s=i(262),a=n(s),l=i(49),h=n(l),c=function(){function t(e,i,n){r(this,t),this.stringify=e,this.mapOpts=n.map||{},this.root=i,this.opts=n}return t.prototype.isMap=function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0},t.prototype.previous=function(){var t=this;return this.previousMaps||(this.previousMaps=[],this.root.walk(function(e){if(e.source&&e.source.input.map){var i=e.source.input.map;-1===t.previousMaps.indexOf(i)&&t.previousMaps.push(i)}})),this.previousMaps},t.prototype.isInline=function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var t=this.mapOpts.annotation;return(void 0===t||!0===t)&&(!this.previous().length||this.previous().some(function(t){return t.inline}))},t.prototype.isSourcesContent=function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(t){return t.withContent()})},t.prototype.clearAnnotation=function(){if(!1!==this.mapOpts.annotation)for(var t=void 0,e=this.root.nodes.length-1;e>=0;e--)t=this.root.nodes[e],"comment"===t.type&&0===t.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(e)},t.prototype.setSourcesContent=function(){var t=this,e={};this.root.walk(function(i){if(i.source){var n=i.source.input.from;if(n&&!e[n]){e[n]=!0;var r=t.relative(n);t.map.setSourceContent(r,i.source.input.css)}}})},t.prototype.applyPrevMaps=function(){for(var t=this.previous(),e=Array.isArray(t),i=0,t=e?t:t[Symbol.iterator]();;){var n;if(e){if(i>=t.length)break;n=t[i++]}else{if(i=t.next(),i.done)break;n=i.value}var r=n,o=this.relative(r.file),s=r.root||h.default.dirname(r.file),l=void 0;!1===this.mapOpts.sourcesContent?(l=new a.default.SourceMapConsumer(r.text),l.sourcesContent&&(l.sourcesContent=l.sourcesContent.map(function(){return null}))):l=r.consumer(),this.map.applySourceMap(l,o,this.relative(s))}},t.prototype.isAnnotation=function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(t){return t.annotation}))},t.prototype.addAnnotation=function(){var t=void 0;t=this.isInline()?"data:application/json;base64,"+o.Base64.encode(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:this.outputFile()+".map";var e="\n";-1!==this.css.indexOf("\r\n")&&(e="\r\n"),this.css+=e+"/*# sourceMappingURL="+t+" */"},t.prototype.outputFile=function(){return this.opts.to?this.relative(this.opts.to):this.opts.from?this.relative(this.opts.from):"to.css"},t.prototype.generateMap=function(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},t.prototype.relative=function(t){if(0===t.indexOf("<"))return t;if(/^\w+:\/\//.test(t))return t;var e=this.opts.to?h.default.dirname(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(e=h.default.dirname(h.default.resolve(e,this.mapOpts.annotation))),t=h.default.relative(e,t),"\\"===h.default.sep?t.replace(/\\/g,"/"):t},t.prototype.sourcePath=function(t){return this.mapOpts.from?this.mapOpts.from:this.relative(t.source.input.from)},t.prototype.generateString=function(){var t=this;this.css="",this.map=new a.default.SourceMapGenerator({file:this.outputFile()});var e=1,i=1,n=void 0,r=void 0;this.stringify(this.root,function(o,s,a){t.css+=o,s&&"end"!==a&&(s.source&&s.source.start?t.map.addMapping({source:t.sourcePath(s),generated:{line:e,column:i-1},original:{line:s.source.start.line,column:s.source.start.column-1}}):t.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:e,column:i-1}})),n=o.match(/\n/g),n?(e+=n.length,r=o.lastIndexOf("\n"),i=o.length-r):i+=o.length,s&&"start"!==a&&(s.source&&s.source.end?t.map.addMapping({source:t.sourcePath(s),generated:{line:e,column:i-1},original:{line:s.source.end.line,column:s.source.end.column}}):t.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:e,column:i-1}}))})},t.prototype.generate=function(){if(this.clearAnnotation(),this.isMap())return this.generateMap();var t="";return this.stringify(this.root,function(e){t+=e}),[t]},t}();e.default=c,t.exports=e.default},745:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i(141),a=i(262),l=n(a),h=i(49),c=n(h),d=i(959),u=n(d),p=function(){function t(e,i){r(this,t),this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var n=i.map?i.map.prev:void 0,o=this.loadMap(i.from,n);o&&(this.text=o)}return t.prototype.consumer=function(){return this.consumerCache||(this.consumerCache=new l.default.SourceMapConsumer(this.text)),this.consumerCache},t.prototype.withContent=function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},t.prototype.startWith=function(t,e){return!!t&&t.substr(0,e.length)===e},t.prototype.loadAnnotation=function(t){var e=t.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//);e&&(this.annotation=e[1].trim())},t.prototype.decodeInline=function(t){var e="data:application/json;charset=utf-8;base64,",i="data:application/json;charset=utf8;base64,",n="data:application/json;base64,",r="data:application/json,";if(this.startWith(t,r))return decodeURIComponent(t.substr(r.length));if(this.startWith(t,n))return s.Base64.decode(t.substr(n.length));if(this.startWith(t,i))return s.Base64.decode(t.substr(i.length));if(this.startWith(t,e))return s.Base64.decode(t.substr(e.length));var o=t.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)},t.prototype.loadMap=function(t,e){if(!1===e)return!1;if(e){if("string"==typeof e)return e;if("function"==typeof e){var i=e(t);if(i&&u.default.existsSync&&u.default.existsSync(i))return u.default.readFileSync(i,"utf-8").toString().trim();throw new Error("Unable to load previous source map: "+i.toString())}if(e instanceof l.default.SourceMapConsumer)return l.default.SourceMapGenerator.fromSourceMap(e).toString();if(e instanceof l.default.SourceMapGenerator)return e.toString();if(this.isMap(e))return JSON.stringify(e);throw new Error("Unsupported previous source map format: "+e.toString())}if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var n=this.annotation;return t&&(n=c.default.join(c.default.dirname(t),n)),this.root=c.default.dirname(n),!(!u.default.existsSync||!u.default.existsSync(n))&&u.default.readFileSync(n,"utf-8").toString().trim()}},t.prototype.isMap=function(t){return"object"===(void 0===t?"undefined":o(t))&&("string"==typeof t.mappings||"string"==typeof t._mappings)},t}();e.default=p,t.exports=e.default},746:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=i(322),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,t),this.version="5.2.18",this.plugins=this.normalize(e)}return t.prototype.use=function(t){return this.plugins=this.plugins.concat(this.normalize([t])),this},t.prototype.process=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new s.default(this,t,e)},t.prototype.normalize=function(t){for(var e=[],i=t,n=Array.isArray(i),o=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var a=s;if(a.postcss&&(a=a.postcss),"object"===(void 0===a?"undefined":r(a))&&Array.isArray(a.plugins))e=e.concat(a.plugins);else{if("function"!=typeof a)throw"object"===(void 0===a?"undefined":r(a))&&(a.parse||a.stringify)?new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation."):new Error(a+" is not a PostCSS plugin");e.push(a)}}return e},t}();e.default=a,t.exports=e.default},747:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(749),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e,i,r){n(this,t),this.processor=e,this.messages=[],this.root=i,this.opts=r,this.css=void 0,this.map=void 0}return t.prototype.toString=function(){return this.css},t.prototype.warn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(e.plugin=this.lastPlugin.postcssPlugin);var i=new s.default(t,e);return this.messages.push(i),i},t.prototype.warnings=function(){return this.messages.filter(function(t){return"warning"===t.type})},r(t,[{key:"content",get:function(){return this.css}}]),t}();e.default=a,t.exports=e.default},748:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=t[0],r=t[1];if("word"===n){if("."===r[0])return"class";if("#"===r[0])return"hash"}var o=i[e+1];return!o||"brackets"!==o[0]&&"("!==o[0]?n:"call"}function o(t){var e=(0,h.default)(new d.default(t),{ignoreErrors:!0});return e.map(function(t,i){var n=p[r(t,i,e)];return n?t[1].split(/\r?\n/).map(function(t){return n(t)}).join("\n"):t[1]}).join("")}e.__esModule=!0;var s=i(306),a=n(s),l=i(327),h=n(l),c=i(124),d=n(c),u=new a.default.constructor({enabled:!0}),p={brackets:u.cyan,"at-word":u.cyan,call:u.cyan,comment:u.gray,string:u.green,class:u.yellow,hash:u.magenta,"(":u.cyan,")":u.cyan,"{":u.yellow,"}":u.yellow,"[":u.yellow,"]":u.yellow,":":u.yellow,";":u.yellow};e.default=o,t.exports=e.default},749:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,t),this.type="warning",this.text=e,i.node&&i.node.source){var r=i.node.positionBy(i);this.line=r.line,this.column=r.column}for(var o in i)this[o]=i[o]}return t.prototype.toString=function(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},t}();e.default=r,t.exports=e.default},750:function(t,e,i){"use strict";e.__esModule=!0;var n=i(96),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=r.default.plugin("postcss-strip-inline-comments",function(){return function(t){t.walkComments(function(t){t.raws.inline&&t.remove()})}}),t.exports=e.default},77:function(t,e,i){var n=i(0),r=i(35),o=i(6);t.exports=o.core.View.extend({animateFromValues:function(t,e,i,o,s){var a=this.$(i),l=s||{},h=l.formatter||r.format("0,000"),c=l.templateData||{},d=l.debounceWait||500,u=e%1==0,p=function(t){t=u?Math.round(t):t;var e=n.isNaN(t)||void 0===t?l.defaultValue||0:h(t),i=n.extend({value:e},c);a.text(o(i))};if(0===l.animationSpeed)return void p(e);p(t),n.debounce(function(){a.prop("counter",t).stop().animate({counter:e},{duration:l.animationSpeed||500,easing:l.easingMethod||"swing",step:p})},d)()},animateFromCurrentValue:function(t,e,i,o){var s=this.$(e),a=o||{},l=a.debounceWait||500,h=t,c=+this.$(e).text(),d=a.formatter||r.format("0,000"),u=a.templateData||{},p=h%1==0,f=function(e){e=p?Math.round(e):e,t=n.isNaN(e)||void 0===e?a.defaultValue||0:d(e);var r=n.extend({value:t},u);s.text(i(r))};if(0===a.animationSpeed)return void f(h);f(c),n.debounce(function(){s.prop("counter",c).stop().animate({counter:h},{duration:a.animationSpeed||500,easing:a.easingMethod||"swing",step:f})},l)()},animateValue:function(t,e,i,o,s){var a=this.$(i),l=s||{},h=l.debounceWait||500,c=t.get(e),d=t.previous(e)||0,u=l.formatter||r.format("0,000"),p=l.templateData||{},f=c%1==0,g=function(t){t=f?Math.round(t):t;var e=n.isNaN(t)||void 0===t?l.defaultValue||0:u(t),i=n.extend({value:e},p);a.text(o(i))};if(0===l.animationSpeed)return void g(c);g(d),n.debounce(function(){a.prop("counter",d).stop().animate({counter:c},{duration:l.animationSpeed||500,easing:l.easingMethod||"swing",step:g})},h)()}})},78:function(t,e,i){var n=i(0),r=i(6),o=i(668);t.exports=r.core.Model.extend({defaults:{attrsNames:[],show_stats:!1,show_source:!1},defaultState:{collapsed:!1},initialize:function(t,e,i){if(i=i||{},!e.dataviewModel)throw new Error("dataviewModel is required.");if(!e.layerModel)throw new Error("layerModel is required.");this.dataviewModel=e.dataviewModel,this.layerModel=e.layerModel,this._autoStyleEnabledWhenCreated=void 0===i.autoStyleEnabled||i.autoStyleEnabled,this.activeAutoStyler(),this.listenTo(this,"change:style",this.activeAutoStyler)},activeAutoStyler:function(){this.isAutoStyleEnabled()&&!this.autoStyler&&(this.autoStyler=o.get(this.dataviewModel,this.layerModel,this.get("style")))},update:function(t){var e=n.pick(t,this.get("attrsNames"));return this.set(e),this.dataviewModel.update(t),this._triggerChangesInAutoStyle(),!(!this.changedAttributes()&&!this.dataviewModel.changedAttributes())},_triggerChangesInAutoStyle:function(){var t=this.changed&&this.changed.style&&this.changed.style.auto_style&&this.changed.style.auto_style.definition,e=this.previousAttributes(),i=e.style&&e.style.auto_style&&e.style.auto_style.definition;n.isEqual(t,i)||this.trigger("customAutoStyle",this)},remove:function(){this.dataviewModel.remove(),this.trigger("destroy",this),this.stopListening()},isAutoStyleEnabled:function(){var t=this.get("style");return("category"===this.get("type")||"histogram"===this.get("type"))&&(t&&t.auto_style?t&&t.auto_style&&t.auto_style.allowed:this._autoStyleEnabledWhenCreated)},getWidgetColor:function(){var t=this.get("style"),e=t&&t.widget_style,i=e&&e.definition&&e.definition.color&&e.definition.color.fixed;return(e&&e.widget_color_changed||e&&!e.widget_color_changed&&"#9DE0AD"!==i)&&i},hasColorsAutoStyle:function(){var t=this.getAutoStyle(),e=!1;return!(!t||n.isEmpty(t)||n.isEmpty(t.definition))&&(n.each(t.definition,function(t){t.color&&t.color.range&&t.color.range.length>0&&(e=!0)},this),e)},getColor:function(t){return this.isAutoStyleEnabled()&&this.isAutoStyle()&&"category"===this.get("type")?this.autoStyler.colors.getColorByCategory(t):this.getWidgetColor()},isAutoStyle:function(){return this.get("autoStyle")},autoStyle:function(){if(this.isAutoStyleEnabled()&&this.dataForAutoStyle()){var t=this.layerModel,e=t.get("cartocss");!e&&t.get("meta")&&(e=t.get("meta").cartocss),t.set("initialStyle",e);var i=this.autoStyler.getStyle();t.set("cartocss",i),this.set("autoStyle",!0)}},dataForAutoStyle:function(){return this.dataviewModel.get("data").length>0},reapplyAutoStyle:function(){var t=this.autoStyler.getStyle();this.layerModel.set("cartocss",t),this.set("autoStyle",!0)},cancelAutoStyle:function(t){t||this.layerModel.restoreCartoCSS(),this.set("autoStyle",!1)},getAutoStyle:function(){var t=this.get("style"),e=this.layerModel,i=e.get("cartocss")||e.get("meta")&&e.get("meta").cartocss;if(this.isAutoStyleEnabled()&&this.autoStyler){if(t&&t.auto_style&&t.auto_style.definition){var r=n.extend(t.auto_style,{cartocss:i});return n.extend({},r,{definition:this.autoStyler.getDef(i)})}return{definition:this.autoStyler.getDef(i),cartocss:i}}return{}},_updateAutoStyle:function(t,e){this.autoStyler&&this.autoStyler.updateStyle(e),this.isAutoStyle()&&this.reapplyAutoStyle()},setInitialState:function(t){this.initialState=t||{}},applyInitialState:function(){var t=n.extend(this.initialState,{hasInitialState:!0});this.setState(t)},setState:function(t){this.set(t)},getState:function(){var t={};for(var e in this.defaultState){var i=this.get(e),r=this.defaultState[e];void 0===r||void 0===i||n.isEqual(i,r)||(t[e]=i)}return t},forceResize:function(){var t=this.get("type");"time-series"!==t&&"histogram"!==t||this.trigger("forceResize")}})},784:function(t,e,i){"use strict";var n=i(120),r=i(316),o=i(333),s=i(334),a=i(785),l=n.call(Function.call,s());r(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},785:function(t,e,i){"use strict";var n=i(316),r=i(334);t.exports=function(){var t=r();return n(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},786:function(t,e,i){"use strict";var n=i(296)();t.exports=function(t){return"string"==typeof t?t.replace(n,""):t}},789:function(t,e,i){var n;!function(r){function o(t,e){if(t=t||"",e=e||{},t instanceof o)return t;if(!(this instanceof o))return new o(t,e);var i=s(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=$(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=$(this._r)),this._g<1&&(this._g=$(this._g)),this._b<1&&(this._b=$(this._b)),this._ok=i.ok,this._tc_id=P++}function s(t){var e={r:0,g:0,b:0},i=1,n=null,r=null,o=null,s=!1,l=!1;return"string"==typeof t&&(t=R(t)),"object"==typeof t&&(I(t.r)&&I(t.g)&&I(t.b)?(e=a(t.r,t.g,t.b),s=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):I(t.h)&&I(t.s)&&I(t.v)?(n=V(t.s),r=V(t.v),e=d(t.h,n,r),s=!0,l="hsv"):I(t.h)&&I(t.s)&&I(t.l)&&(n=V(t.s),o=V(t.l),e=h(t.h,n,o),s=!0,l="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=k(i),{ok:s,format:t.format||l,r:H(255,U(e.r,0)),g:H(255,U(e.g,0)),b:H(255,U(e.b,0)),a:i}}function a(t,e,i){return{r:255*T(t,255),g:255*T(e,255),b:255*T(i,255)}}function l(t,e,i){t=T(t,255),e=T(e,255),i=T(i,255);var n,r,o=U(t,e,i),s=H(t,e,i),a=(o+s)/2;if(o==s)n=r=0;else{var l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:a}}function h(t,e,i){function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var r,o,s;if(t=T(t,360),e=T(e,100),i=T(i,100),0===e)r=o=s=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;r=n(l,a,t+1/3),o=n(l,a,t),s=n(l,a,t-1/3)}return{r:255*r,g:255*o,b:255*s}}function c(t,e,i){t=T(t,255),e=T(e,255),i=T(i,255);var n,r,o=U(t,e,i),s=H(t,e,i),a=o,l=o-s;if(r=0===o?0:l/o,o==s)n=0;else{switch(o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,v:a}}function d(t,e,i){t=6*T(t,360),e=T(e,100),i=T(i,100);var n=r.floor(t),o=t-n,s=i*(1-e),a=i*(1-o*e),l=i*(1-(1-o)*e),h=n%6;return{r:255*[i,a,s,s,l,i][h],g:255*[l,i,i,a,s,s][h],b:255*[s,s,l,i,i,a][h]}}function u(t,e,i,n){var r=[F($(t).toString(16)),F($(e).toString(16)),F($(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function p(t,e,i,n,r){var o=[F($(t).toString(16)),F($(e).toString(16)),F($(i).toString(16)),F(L(n))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function f(t,e,i,n){return[F(L(n)),F($(t).toString(16)),F($(e).toString(16)),F($(i).toString(16))].join("")}function g(t,e){e=0===e?0:e||10;var i=o(t).toHsl();return i.s-=e/100,i.s=j(i.s),o(i)}function _(t,e){e=0===e?0:e||10;var i=o(t).toHsl();return i.s+=e/100,i.s=j(i.s),o(i)}function m(t){return o(t).desaturate(100)}function v(t,e){e=0===e?0:e||10;var i=o(t).toHsl();return i.l+=e/100,i.l=j(i.l),o(i)}function w(t,e){e=0===e?0:e||10;var i=o(t).toRgb();return i.r=U(0,H(255,i.r-$(-e/100*255))),i.g=U(0,H(255,i.g-$(-e/100*255))),i.b=U(0,H(255,i.b-$(-e/100*255))),o(i)}function b(t,e){e=0===e?0:e||10;var i=o(t).toHsl();return i.l-=e/100,i.l=j(i.l),o(i)}function y(t,e){var i=o(t).toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,o(i)}function C(t){var e=o(t).toHsl();return e.h=(e.h+180)%360,o(e)}function x(t){var e=o(t).toHsl(),i=e.h;return[o(t),o({h:(i+120)%360,s:e.s,l:e.l}),o({h:(i+240)%360,s:e.s,l:e.l})]}function S(t){var e=o(t).toHsl(),i=e.h;return[o(t),o({h:(i+90)%360,s:e.s,l:e.l}),o({h:(i+180)%360,s:e.s,l:e.l}),o({h:(i+270)%360,s:e.s,l:e.l})]}function M(t){var e=o(t).toHsl(),i=e.h;return[o(t),o({h:(i+72)%360,s:e.s,l:e.l}),o({h:(i+216)%360,s:e.s,l:e.l})]}function B(t,e,i){e=e||6,i=i||30;var n=o(t).toHsl(),r=360/i,s=[o(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(o(n));return s}function D(t,e){e=e||6;for(var i=o(t).toHsv(),n=i.h,r=i.s,s=i.v,a=[],l=1/e;e--;)a.push(o({h:n,s:r,v:s})),s=(s+l)%1;return a}function k(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function T(t,e){z(t)&&(t="100%");var i=E(t);return t=H(e,U(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function j(t){return H(1,U(0,t))}function A(t){return parseInt(t,16)}function z(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function E(t){return"string"==typeof t&&-1!=t.indexOf("%")}function F(t){return 1==t.length?"0"+t:""+t}function V(t){return t<=1&&(t=100*t+"%"),t}function L(t){return r.round(255*parseFloat(t)).toString(16)}function W(t){return A(t)/255}function I(t){return!!G.CSS_UNIT.exec(t)}function R(t){t=t.replace(N,"").replace(O,"").toLowerCase();var e=!1;if(Y[t])t=Y[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=G.rgb.exec(t))?{r:i[1],g:i[2],b:i[3]}:(i=G.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=G.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=G.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=G.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=G.hsva.exec(t))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=G.hex8.exec(t))?{r:A(i[1]),g:A(i[2]),b:A(i[3]),a:W(i[4]),format:e?"name":"hex8"}:(i=G.hex6.exec(t))?{r:A(i[1]),g:A(i[2]),b:A(i[3]),format:e?"name":"hex"}:(i=G.hex4.exec(t))?{r:A(i[1]+""+i[1]),g:A(i[2]+""+i[2]),b:A(i[3]+""+i[3]),a:W(i[4]+""+i[4]),format:e?"name":"hex8"}:!!(i=G.hex3.exec(t))&&{r:A(i[1]+""+i[1]),g:A(i[2]+""+i[2]),b:A(i[3]+""+i[3]),format:e?"name":"hex"}}function q(t){var e,i;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:e,size:i}}var N=/^\s+/,O=/\s+$/,P=0,$=r.round,H=r.min,U=r.max,Q=r.random;o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,i,n,o,s,a=this.toRgb();return t=a.r/255,e=a.g/255,i=a.b/255,n=t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4),o=e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4),s=i<=.03928?i/12.92:r.pow((i+.055)/1.055,2.4),.2126*n+.7152*o+.0722*s},setAlpha:function(t){return this._a=k(t),this._roundA=$(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=$(360*t.h),i=$(100*t.s),n=$(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=l(this._r,this._g,this._b),e=$(360*t.h),i=$(100*t.s),n=$(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return u(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return p(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:$(this._r),g:$(this._g),b:$(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+$(this._r)+", "+$(this._g)+", "+$(this._b)+")":"rgba("+$(this._r)+", "+$(this._g)+", "+$(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:$(100*T(this._r,255))+"%",g:$(100*T(this._g,255))+"%",b:$(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+$(100*T(this._r,255))+"%, "+$(100*T(this._g,255))+"%, "+$(100*T(this._b,255))+"%)":"rgba("+$(100*T(this._r,255))+"%, "+$(100*T(this._g,255))+"%, "+$(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Z[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var r=o(t);i="#"+f(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return o(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},o.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:V(t[n]));t=i}return o(t,e)},o.equals=function(t,e){return!(!t||!e)&&o(t).toRgbString()==o(e).toRgbString()},o.random=function(){return o.fromRatio({r:Q(),g:Q(),b:Q()})},o.mix=function(t,e,i){i=0===i?0:i||50;var n=o(t).toRgb(),r=o(e).toRgb(),s=i/100;return o({r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a})},o.readability=function(t,e){var i=o(t),n=o(e);return(r.max(i.getLuminance(),n.getLuminance())+.05)/(r.min(i.getLuminance(),n.getLuminance())+.05)},o.isReadable=function(t,e,i){var n,r,s=o.readability(t,e);switch(r=!1,n=q(i),n.level+n.size){case"AAsmall":case"AAAlarge":r=s>=4.5;break;case"AAlarge":r=s>=3;break;case"AAAsmall":r=s>=7}return r},o.mostReadable=function(t,e,i){var n,r,s,a,l=null,h=0;i=i||{},r=i.includeFallbackColors,s=i.level,a=i.size;for(var c=0;c<e.length;c++)(n=o.readability(t,e[c]))>h&&(h=n,l=o(e[c]));return o.isReadable(t,l,{level:s,size:a})||!r?l:(i.includeFallbackColors=!1,o.mostReadable(t,["#fff","#000"],i))};var Y=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=o.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(Y),G=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=o:void 0!==(n=function(){return o}.call(e,i,e,t))&&(t.exports=n)}(Math)},79:function(t,e,i){"use strict";e.a=function(t,e){return t=+t,e-=t,function(i){return t+e*i}}},82:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return t.map(function(t){return t.nodes&&(t.nodes=a(t.nodes)),delete t.source,t})}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(321),c=n(h),d=i(22),u=n(d),p=i(123),f=n(p),g=i(125),_=n(g),m=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.push=function(t){return t.parent=this,this.nodes.push(t),this},e.prototype.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;if(this.indexes[e]=0,this.nodes){for(var i=void 0,n=void 0;this.indexes[e]<this.nodes.length&&(i=this.indexes[e],!1!==(n=t(this.nodes[i],i)));)this.indexes[e]+=1;return delete this.indexes[e],n}},e.prototype.walk=function(t){return this.each(function(e,i){var n=t(e,i);return!1!==n&&e.walk&&(n=e.walk(t)),n})},e.prototype.walkDecls=function(t,e){return e?t instanceof RegExp?this.walk(function(i,n){if("decl"===i.type&&t.test(i.prop))return e(i,n)}):this.walk(function(i,n){if("decl"===i.type&&i.prop===t)return e(i,n)}):(e=t,this.walk(function(t,i){if("decl"===t.type)return e(t,i)}))},e.prototype.walkRules=function(t,e){return e?t instanceof RegExp?this.walk(function(i,n){if("rule"===i.type&&t.test(i.selector))return e(i,n)}):this.walk(function(i,n){if("rule"===i.type&&i.selector===t)return e(i,n)}):(e=t,this.walk(function(t,i){if("rule"===t.type)return e(t,i)}))},e.prototype.walkAtRules=function(t,e){return e?t instanceof RegExp?this.walk(function(i,n){if("atrule"===i.type&&t.test(i.name))return e(i,n)}):this.walk(function(i,n){if("atrule"===i.type&&i.name===t)return e(i,n)}):(e=t,this.walk(function(t,i){if("atrule"===t.type)return e(t,i)}))},e.prototype.walkComments=function(t){return this.walk(function(e,i){if("comment"===e.type)return t(e,i)})},e.prototype.append=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=e,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}for(var a=s,l=this.normalize(a,this.last),h=l,c=Array.isArray(h),d=0,h=c?h:h[Symbol.iterator]();;){var u;if(c){if(d>=h.length)break;u=h[d++]}else{if(d=h.next(),d.done)break;u=d.value}var p=u;this.nodes.push(p)}}return this},e.prototype.prepend=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];e=e.reverse();for(var n=e,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}for(var a=s,l=this.normalize(a,this.first,"prepend").reverse(),h=l,c=Array.isArray(h),d=0,h=c?h:h[Symbol.iterator]();;){var u;if(c){if(d>=h.length)break;u=h[d++]}else{if(d=h.next(),d.done)break;u=d.value}var p=u;this.nodes.unshift(p)}for(var f in this.indexes)this.indexes[f]=this.indexes[f]+l.length}return this},e.prototype.cleanRaws=function(e){if(t.prototype.cleanRaws.call(this,e),this.nodes)for(var i=this.nodes,n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(r>=i.length)break;o=i[r++]}else{if(r=i.next(),r.done)break;o=r.value}var s=o;s.cleanRaws(e)}},e.prototype.insertBefore=function(t,e){t=this.index(t);for(var i=0===t&&"prepend",n=this.normalize(e,this.nodes[t],i).reverse(),r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if(s=r.next(),s.done)break;a=s.value}var l=a;this.nodes.splice(t,0,l)}var h=void 0;for(var c in this.indexes)h=this.indexes[c],t<=h&&(this.indexes[c]=h+n.length);return this},e.prototype.insertAfter=function(t,e){t=this.index(t);for(var i=this.normalize(e,this.nodes[t]).reverse(),n=i,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=s;this.nodes.splice(t+1,0,a)}var l=void 0;for(var h in this.indexes)l=this.indexes[h],t<l&&(this.indexes[h]=l+i.length);return this},e.prototype.remove=function(e){return void 0!==e?((0,u.default)("Container#remove is deprecated. Use Container#removeChild"),this.removeChild(e)):t.prototype.remove.call(this),this},e.prototype.removeChild=function(t){t=this.index(t),this.nodes[t].parent=void 0,this.nodes.splice(t,1);var e=void 0;for(var i in this.indexes)(e=this.indexes[i])>=t&&(this.indexes[i]=e-1);return this},e.prototype.removeAll=function(){for(var t=this.nodes,e=Array.isArray(t),i=0,t=e?t:t[Symbol.iterator]();;){var n;if(e){if(i>=t.length)break;n=t[i++]}else{if(i=t.next(),i.done)break;n=i.value}n.parent=void 0}return this.nodes=[],this},e.prototype.replaceValues=function(t,e,i){return i||(i=e,e={}),this.walkDecls(function(n){e.props&&-1===e.props.indexOf(n.prop)||e.fast&&-1===n.value.indexOf(e.fast)||(n.value=n.value.replace(t,i))}),this},e.prototype.every=function(t){return this.nodes.every(t)},e.prototype.some=function(t){return this.nodes.some(t)},e.prototype.index=function(t){return"number"==typeof t?t:this.nodes.indexOf(t)},e.prototype.normalize=function(t,e){var n=this;if("string"==typeof t)t=a(i(323)(t).nodes);else if(!Array.isArray(t))if("root"===t.type)t=t.nodes;else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new c.default(t)]}else if(t.selector){var r=i(126);t=[new r(t)]}else if(t.name){var o=i(122);t=[new o(t)]}else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new f.default(t)]}return t.map(function(t){return void 0===t.raws&&(t=n.rebuild(t)),t.parent&&(t=t.clone()),void 0===t.raws.before&&e&&void 0!==e.raws.before&&(t.raws.before=e.raws.before.replace(/[^\s]/g,"")),t.parent=n,t})},e.prototype.rebuild=function(t,e){var n=this,r=void 0;if("root"===t.type){var o=i(325);r=new o}else if("atrule"===t.type){var s=i(122);r=new s}else if("rule"===t.type){var a=i(126);r=new a}else"decl"===t.type?r=new c.default:"comment"===t.type&&(r=new f.default);for(var l in t)"nodes"===l?r.nodes=t.nodes.map(function(t){return n.rebuild(t,r)}):"parent"===l&&e?r.parent=e:t.hasOwnProperty(l)&&(r[l]=t[l]);return r},e.prototype.eachInside=function(t){return(0,u.default)("Container#eachInside is deprecated. Use Container#walk instead."),this.walk(t)},e.prototype.eachDecl=function(t,e){return(0,u.default)("Container#eachDecl is deprecated. Use Container#walkDecls instead."),this.walkDecls(t,e)},e.prototype.eachRule=function(t,e){return(0,u.default)("Container#eachRule is deprecated. Use Container#walkRules instead."),this.walkRules(t,e)},e.prototype.eachAtRule=function(t,e){return(0,u.default)("Container#eachAtRule is deprecated. Use Container#walkAtRules instead."),this.walkAtRules(t,e)},e.prototype.eachComment=function(t){return(0,u.default)("Container#eachComment is deprecated. Use Container#walkComments instead."),this.walkComments(t)},l(e,[{key:"first",get:function(){if(this.nodes)return this.nodes[0]}},{key:"last",get:function(){if(this.nodes)return this.nodes[this.nodes.length-1]}},{key:"semicolon",get:function(){return(0,u.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"),this.raws.semicolon},set:function(t){(0,u.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"),this.raws.semicolon=t}},{key:"after",get:function(){return(0,u.default)("Node#after is deprecated. Use Node#raws.after"),this.raws.after},set:function(t){(0,u.default)("Node#after is deprecated. Use Node#raws.after"),this.raws.after=t}}]),e}(_.default);e.default=m,t.exports=e.default},919:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Dashboard-menuContainer">\n  <div class="CDB-Dashboard-menuInner">\n    <div class="CDB-Dashboard-menuHeader">\n      ',!0===showLogo&&(__p+='\n      <div class="CDB-Dashboard-menuLogo">\n        <a href="http://carto.com" target="_blank">\n          <svg viewBox="0 0 62 24" height="24" width="62">\n              <g class="CDB-EmbedLogo" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <path d="M3.94693333,15.9877346 C5.63066667,15.9877346 6.60373333,15.2552013 7.32533333,14.260268 L5.72906667,13.1232013 C5.26986667,13.6808013 4.79973333,14.0525346 4.0016,14.0525346 C2.93013333,14.0525346 2.17573333,13.1560013 2.17573333,12.0080013 L2.17573333,11.9861346 C2.17573333,10.8709346 2.93013333,9.95253464 4.0016,9.95253464 C4.73413333,9.95253464 5.23706667,10.3133346 5.6744,10.849068 L7.27066667,9.6136013 C6.5928,8.68426797 5.58693333,8.02826797 4.02346667,8.02826797 C1.7056,8.02826797 0,9.7776013 0,12.0080013 L0,12.029868 C0,14.3149346 1.76026667,15.9877346 3.94693333,15.9877346 L3.94693333,15.9877346 Z M10.93653,15.834668 L13.1559967,15.834668 L13.7026634,14.457068 L16.6655967,14.457068 L17.2122634,15.834668 L19.4863967,15.834668 L16.2282634,8.12666797 L14.18373,8.12666797 L10.93653,15.834668 Z M14.3258634,12.8061346 L15.1895967,10.6413346 L16.0423967,12.8061346 L14.3258634,12.8061346 Z M23.61653,15.834668 L25.7375966,15.834668 L25.7375966,13.5168013 L26.6778633,13.5168013 L28.2194633,15.834668 L30.6575966,15.834668 L28.83173,13.1669346 C29.78293,12.7624013 30.40613,11.9861346 30.40613,10.8053346 L30.40613,10.783468 C30.40613,10.029068 30.17653,9.4496013 29.7282633,9.00133464 C29.2143966,8.48746797 28.40533,8.18133464 27.2354633,8.18133464 L23.61653,8.18133464 L23.61653,15.834668 Z M25.7375966,11.8549346 L25.7375966,10.0072013 L27.1370633,10.0072013 C27.8367966,10.0072013 28.2850633,10.3133346 28.2850633,10.9256013 L28.2850633,10.947468 C28.2850633,11.505068 27.8586633,11.8549346 27.1479966,11.8549346 L25.7375966,11.8549346 Z M36.7338633,15.834668 L38.8549299,15.834668 L38.8549299,10.0400013 L41.1509299,10.0400013 L41.1509299,8.18133464 L34.4487966,8.18133464 L34.4487966,10.0400013 L36.7338633,10.0400013 L36.7338633,15.834668 Z" class="CDB-EmbedLogo-text" fill="#FFFFFF"></path>\n                  <g class="CDB-EmbedLogo-imago"\n                    ',hasTranslation&&(__p+='\n                      transform="translate(37.000000, 0.000000)"\n                    '),__p+='\n                  >\n                      <circle class="CDB-EmbedLogo-halo" fill="rgba(255, 255, 255, 0.20)"  cx="12.3333333" cy="12" r="12"></circle>\n                      <path d="M12.3333333,16.5 C14.8186147,16.5 16.8333333,14.4852814 16.8333333,12 C16.8333333,9.51471863 14.8186147,7.5 12.3333333,7.5 C9.84805196,7.5 7.83333333,9.51471863 7.83333333,12 C7.83333333,14.4852814 9.84805196,16.5 12.3333333,16.5 L12.3333333,16.5 Z" class="CDB-EmbedLogo-point" fill="#FFFFFF" ></path>\n                  </g>\n              </g>\n          </svg>\n        </a>\n      </div>\n      '),__p+='\n\n      <ul class="CDB-Dashboard-menuActions">\n        <li class="CDB-Dashboard-menuActionsItem">\n          <a href="https://twitter.com/share?url='+__e(urlWithoutParams)+"&text="+__e(shortTitle)+'" target="_blank" class="u-hintTextColor">\n            <i class="CDB-IconFont CDB-IconFont-twitter CDB-Size-large"></i>\n          </a>\n        </li>\n        <li class="CDB-Dashboard-menuActionsItem">\n          <a href="http://www.facebook.com/sharer.php?u='+__e(urlWithoutParams)+"&text="+__e(shortTitle)+'" target="_blank" class="u-hintTextColor">\n            <i class="CDB-IconFont CDB-IconFont-facebook CDB-Size-medium"></i>\n          </a>\n        </li>\n        ',inIframe&&(__p+='\n          <li class="CDB-Dashboard-menuActionsItem">\n            <a href="'+__e(url)+'" target="_blank" class="u-hintTextColor">\n              <i class="CDB-IconFont CDB-IconFont-anchor CDB-Size-medium"></i>\n            </a>\n          </li>\n        '),__p+='\n      </ul>\n\n\n      <div class="CDB-Dashboard-menuInfo">\n        <button class="js-toggle-view">\n          <i class="CDB-Text CDB-Size-medium CDB-IconFont CDB-IconFont-rArrowLight Size-large"></i>\n        </button>\n      </div>\n\n      <div class="CDB-Dashboard-menuTexts CDB-Dashboard-hideMobile">\n        <div class="CDB-Dashboard-menuTextInner js-content">\n          <button class="js-toggle-view u-actionTextColor CDB-Dashboard-menuTextActions">\n            <svg width="10px" height="7px" viewBox="12 13 10 7" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <path d="M12,13.5 C12,13.2238576 12.1908338,13 12.4169561,13 L21.5830439,13 C21.8133224,13 22,13.2319336 22,13.5 C22,13.7761424 21.8091662,14 21.5830439,14 L12.4169561,14 C12.1866776,14 12,13.7680664 12,13.5 L12,13.5 L12,13.5 Z M12,16.5 C12,16.2238576 12.1908338,16 12.4169561,16 L21.5830439,16 C21.8133224,16 22,16.2319336 22,16.5 C22,16.7761424 21.8091662,17 21.5830439,17 L12.4169561,17 C12.1866776,17 12,16.7680664 12,16.5 L12,16.5 L12,16.5 Z M12,19.5 C12,19.2238576 12.1908338,19 12.4169561,19 L21.5830439,19 C21.8133224,19 22,19.2319336 22,19.5 C22,19.7761424 21.8091662,20 21.5830439,20 L12.4169561,20 C12.1866776,20 12,19.7680664 12,19.5 L12,19.5 L12,19.5 Z" id="Combined-Shape" stroke="none" fill="#1785fB" fill-rule="evenodd"></path>\n            </svg>\n          </button>\n          <p class="CDB-Dashboard-menuTime CDB-Text CDB-Size-small u-upperCase u-altTextColor u-bSpace--m js-timeAgo">UPDATED '+__e(updatedAt)+'</p>\n          <div class="CDB-Dashboard-metadata">\n            <h1 class="CDB-Dashboard-menuTitle CDB-Dashboard-menuTitle--mobile CDB-Text CDB-Size-huge u-ellipsis js-title" title="'+__e(title)+'">'+__e(title)+'</h1>\n\n            <div class="CDB-Dashboard-scrollWrapper js-scroll-wrapper">\n              <div class="CDB-Dashboard-scrollContent js-scroll-content">\n                <h2 class="CDB-Dashboard-menuDescription CDB-Text CDB-Size-large is-light u-secondaryTextColor js-description">'+(null==(__t=cdb.core.sanitize.html(description))?"":__t)+'</h2>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="CDB-Dashboard-menuFooter">\n      <ul>\n        <li class="CDB-Dashboard-menuFooterItem ">\n          <div class="CDB-Dashboard-menuMedia CDB-Dashboard-menuAvatar">\n            <img src="'+__e(userAvatarURL)+'" alt="avatar" class="inline-block"/>\n          </div>\n          <p class="CDB-Text CDB-Size-medium CDB-Dashboard-menuFooterTxt">Map by <a href="'+__e(userProfileURL)+'" target="_blank">'+__e(userName)+'</a></p>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="CDB-Dashboard-bg js-toggle-view"></div>\n\n  <div class="CDB-Dashboard-menuHeaderMobile">\n    <div class="u-flex u-alignStart CDB-Dashboard-menuHeaderMobileInner">\n      <button class="js-toggle-view u-actionTextColor CDB-Dashboard-menuHeaderMobileActions">\n        <i class="CDB-Text CDB-Size-medium CDB-IconFont CDB-IconFont-rArrowLight Size-large"></i>\n      </button>\n      <div class="CDB-Dashboard-menuHeaderMobileText">\n        ',!0===showLogo&&(__p+='\n        <div class="CDB-Dashboard-menuLogo">\n          <a href="http://carto.com" target="_blank">\n          <svg width="62px" height="24px" viewBox="35 63 62 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <g class="CDB-EmbedLogo" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(35.000000, 63.000000)">\n                  <path d="M3.94693333,15.9877346 C5.63066667,15.9877346 6.60373333,15.2552013 7.32533333,14.260268 L5.72906667,13.1232013 C5.26986667,13.6808013 4.79973333,14.0525346 4.0016,14.0525346 C2.93013333,14.0525346 2.17573333,13.1560013 2.17573333,12.0080013 L2.17573333,11.9861346 C2.17573333,10.8709346 2.93013333,9.95253464 4.0016,9.95253464 C4.73413333,9.95253464 5.23706667,10.3133346 5.6744,10.849068 L7.27066667,9.6136013 C6.5928,8.68426797 5.58693333,8.02826797 4.02346667,8.02826797 C1.7056,8.02826797 0,9.7776013 0,12.0080013 L0,12.029868 C0,14.3149346 1.76026667,15.9877346 3.94693333,15.9877346 L3.94693333,15.9877346 Z M10.93653,15.834668 L13.1559967,15.834668 L13.7026634,14.457068 L16.6655967,14.457068 L17.2122634,15.834668 L19.4863967,15.834668 L16.2282634,8.12666797 L14.18373,8.12666797 L10.93653,15.834668 Z M14.3258634,12.8061346 L15.1895967,10.6413346 L16.0423967,12.8061346 L14.3258634,12.8061346 Z M23.61653,15.834668 L25.7375966,15.834668 L25.7375966,13.5168013 L26.6778633,13.5168013 L28.2194633,15.834668 L30.6575966,15.834668 L28.83173,13.1669346 C29.78293,12.7624013 30.40613,11.9861346 30.40613,10.8053346 L30.40613,10.783468 C30.40613,10.029068 30.17653,9.4496013 29.7282633,9.00133464 C29.2143966,8.48746797 28.40533,8.18133464 27.2354633,8.18133464 L23.61653,8.18133464 L23.61653,15.834668 Z M25.7375966,11.8549346 L25.7375966,10.0072013 L27.1370633,10.0072013 C27.8367966,10.0072013 28.2850633,10.3133346 28.2850633,10.9256013 L28.2850633,10.947468 C28.2850633,11.505068 27.8586633,11.8549346 27.1479966,11.8549346 L25.7375966,11.8549346 Z M36.7338633,15.834668 L38.8549299,15.834668 L38.8549299,10.0400013 L41.1509299,10.0400013 L41.1509299,8.18133464 L34.4487966,8.18133464 L34.4487966,10.0400013 L36.7338633,10.0400013 L36.7338633,15.834668 Z" class="CDB-EmbedLogo-text" fill="#FFFFFF"></path>\n                  <g class="CDB-EmbedLogo-imago" transform="translate(37.000000, 0.000000)">\n                      <circle class="CDB-EmbedLogo-halo" fill="rgba(255, 255, 255, 0.20)"  cx="12.3333333" cy="12" r="12"></circle>\n                      <path d="M12.3333333,16.5 C14.8186147,16.5 16.8333333,14.4852814 16.8333333,12 C16.8333333,9.51471863 14.8186147,7.5 12.3333333,7.5 C9.84805196,7.5 7.83333333,9.51471863 7.83333333,12 C7.83333333,14.4852814 9.84805196,16.5 12.3333333,16.5 L12.3333333,16.5 Z" class="CDB-EmbedLogo-point" fill="#FFFFFF" ></path>\n                  </g>\n              </g>\n          </svg>\n          </a>\n        </div>\n        '),__p+='\n        <p class="CDB-Dashboard-menuTime CDB-Text CDB-Size-small u-upperCase u-altTextColor u-bSpace--m js-timeAgo">UPDATED '+__e(updatedAt)+'</p>\n        <h1 class="CDB-Text CDB-Size-large u-ellipsis js-title u-bSpace--xl u-ellipsis">'+__e(title)+'</h1>\n        <h2 class="CDB-Text CDB-Size-medium u-secondaryTextColor js-description">'+(null==(__t=cdb.core.sanitize.html(description))?"":__t)+"</h2>\n      </div>\n    </div>\n  </div>\n</div>\n";return __p}},920:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="CDB-Widget-canvasInner js-container"></div>\n';return __p}},921:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="CDB-Dashboard-mapWrapper js-map-wrapper">\n  <div class="CDB-Map-canvas">\n    <div class="CDB-Map" id="map"></div>\n  </div>\n</div>\n';return __p}},922:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="CDB-Widget-header js-header"></div>\n<div class="CDB-Widget-content CDB-Widget-content--noSidesMargin">\n  <div class="CDB-Widget-listWrapper js-content"></div>\n</div>\n<div class="CDB-Widget-footer js-footer"></div>\n';return __p}},923:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<button type="button" class="CDB-Widget-listItemInner CDB-Widget-listButton js-button '+__e(isDisabled?"is-disabled":"")+'">\n  <div class="CDB-Widget-contentSpaced">\n    <p class="CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl" title="'+__e(name)+'">'+__e(name)+'</p>\n    <p class="CDB-Text CDB-Size-small u-secondaryTextColor" title="'+__e(value)+'">'+__e(prefix)+__e(formattedValue)+__e(suffix)+'</p>\n  </div>\n  <div class="CDB-Widget-progressBar">\n    <div class="CDB-Widget-progressState '+__e(isAggregated?"CDB-Widget-progressState--pattern":"")+" "+__e(isAccepted?"is-accepted":"")+'" style="width: '+__e(percentage)+"%; background-color: "+__e(color)+'"></div>\n  </div>\n</button>\n';return __p}},924:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="CDB-Widget-listItemInner '+__e(isDisabled?"is-disabled":"")+'">\n  <div class="CDB-Widget-contentSpaced">\n    <p class="CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl" title="'+__e(name)+'">'+__e(name)+'</p>\n    <p class="CDB-Text CDB-Size-small u-secondaryTextColor" title="'+__e(value)+'">'+__e(prefix)+__e(formattedValue)+__e(suffix)+'</p>\n  </div>\n  <div class="CDB-Widget-progressBar">\n    <div class="CDB-Widget-progressState CDB-Widget-progressState--pattern '+__e(isAggregated?"CDB-Widget-progressState--inactive":"")+'"\n      style="width: '+__e(percentage)+"%; background-color: "+__e(color)+'"></div>\n  </div>\n</div>\n';return __p}},925:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<button type="button" class="CDB-Widget-listItemInner CDB-Widget-listItemInner--fullSpace CDB-Widget-listButton js-button '+__e(isDisabled?"is-disabled":"")+'">\n  <span class="CDB-Widget-checkbox '+__e(isDisabled?"":"is-checked")+'"></span>\n  <div class="u-lSpace u-ellipsis">\n    <div class="CDB-Widget-contentSpaced">\n      <p class="CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl" title="'+__e(name)+'">'+__e(name)+'</p>\n      <p class="CDB-Text CDB-Size-small u-secondaryTextColor" title="'+__e(value)+'">'+__e(prefix)+__e(formattedValue)+__e(suffix)+'</p>\n    </div>\n    <div class="CDB-Widget-progressBar">\n      <div class="CDB-Widget-progressState is-accepted" style="width: '+__e(percentage)+'%"></div>\n    </div>\n  </div>\n</button>\n';return __p}},926:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li class="CDB-Widget-listItem">\n  <h4 class="CDB-Text CDB-Size-large">No results</h4>\n  <p class="CDB-Text CDB-Size-medium u-tSpace-xl u-altTextColor">Your search "'+__e(q)+'" didn\'t match<br/>with any value.</p>\n  <p class="CDB-Text CDB-Size-medium u-tSpace-xl u-altTextColor">Try searching again.</p>\n</li>\n';return __p}},927:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)isSearchEnabled?__p+='\n  <p class="CDB-Text is-semibold CDB-Size-small u-upperCase js-lockCategories">'+__e(totalLocked)+" selected</p>\n":(__p+='\n  <p class="CDB-Text is-semibold CDB-Size-small u-upperCase js-textInfo">\n    ',isLocked?__p+="\n      "+__e(totalCats)+' blocked <button class="CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link u-lSpace js-unlock">unlock</button>\n    ':(__p+="\n      ",noneSelected?__p+="\n        None selected\n      ":(__p+="\n        "+__e(allSelected?"All selected":acceptedCats+" selected")+"\n        ",canBeLocked&&(__p+='\n          <button class="CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link u-lSpace js-lock">lock</button>\n        '),__p+="\n      "),__p+="\n    "),__p+="\n  </p>\n  ",canSelectAll&&(__p+='\n    <div class="CDB-Widget-filterButtons">\n      <button class="CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link CDB-Widget-filterButton js-all">all</button>\n    </div>\n  '),__p+="\n"),__p+="\n";return __p}},928:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj){if(showSearch&&(__p+='\n<div class="CDB-Widget-contentFlex">\n  <button class="u-rSpace--m CDB-Text is-semibold u-upperCase CDB-Size-small js-searchToggle">\n    <div class="CDB-Shape u-iBlock">\n      <span class="CDB-Shape-magnify is-small is-blue"></span>\n    </div>\n    <span class="u-iBlock u-actionTextColor">\n      search in '+__e(categoriesCount)+" categor"+__e(1===categoriesCount?"y":"ies")+"\n    </span>\n  </button>\n</div>\n"),__p+="\n",showPaginator){__p+='\n  <div class="CDB-Widget-navDots js-dots">\n    ';for(var i=0,l=pages;i<l;i++)__p+='<button class="CDB-Shape-dot CDB-Widget-dot--navigation js-page ',currentPage===i&&(__p+="is-selected"),__p+='" data-page="'+__e(i)+'"></button>';__p+="\n  </div>\n"}__p+="\n"}return __p}},929:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj){if(__p+='<div class="CDB-Widget-contentFlex">\n  <button class="CDB-Text is-semibold u-upperCase CDB-Size-small u-rSpace--m js-searchToggle u-actionTextColor">cancel</button>\n</div>\n',showPaginator){__p+='\n  <div class="CDB-Widget-navDots js-dots u-tSpace--m">\n    ';for(var i=0,l=pages;i<l;i++)__p+='<button class="CDB-Shape-dot CDB-Widget-dot--navigation js-page ',currentPage===i&&(__p+="is-selected"),__p+='" data-page="'+__e(i)+'"></button>';__p+="\n  </div>\n"}__p+="\n"}return __p}},930:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=__e(value)+"\n";return __p}},931:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)isSearchEnabled?(__p+="\n    ",isSearchApplied?__p+='\n      <dt class="CDB-Widget-infoCount">'+__e(resultsCount)+'</dt><dd class="CDB-Widget-infoDescription">found</dd>\n    ':__p+="\n      &nbsp;\n    ",__p+="\n  </dt>\n"):__p+='\n  <dt class="CDB-Widget-infoCount">'+__e(nullsPer)+'%</dt><dd class="CDB-Widget-infoDescription"> null rows</dd>\n  <dt class="CDB-Widget-infoCount"><span class="js-cats">'+__e(catsPer)+'</span>%</dt><dd class="CDB-Widget-infoDescription">of total</dd>\n',__p+="\n";return __p}},932:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)isSearchEnabled?(__p+='\n  <form class="CDB-Widget-search js-form">\n    <div class="CDB-Shape CDB-Widget-searchLens u-iBlock u-rSpace js-searchIcon">\n      <span class="CDB-Shape-magnify is-small is-blue"></span>\n    </div>\n    <input type="text" class="CDB-Text CDB-Size-large CDB-Widget-textInput CDB-Widget-searchTextInput js-textInput" value="'+__e(q)+'" placeholder="Search by '+__e(columnName)+'"/>\n    ',canShowApply&&(__p+='\n      <button type="button" class="CDB-Text is-semibold u-upperCase CDB-Size-small CDB-Widget-searchApply js-applyLocked u-actionTextColor">apply</button>\n    '),__p+="\n  </form>\n"):(__p+='\n  <div class="CDB-Widget-title CDB-Widget-contentSpaced js-title">\n    <h3 class="CDB-Text CDB-Size-large u-ellipsis js-titleText" title="'+__e(title)+'">'+__e(title)+'</h3>\n    <div class="CDB-Widget-options CDB-Widget-contentSpaced">\n      ',isAutoStyleEnabled&&(__p+='\n        <button class="CDB-Widget-buttonIcon CDB-Widget-buttonIcon--circle js-colors\n          '+__e(isAutoStyle?"is-selected":"")+"\n          "+__e(isAutoStyle?"js-cancelAutoStyle":"js-autoStyle")+'\n          " data-tooltip="\n            '+__e(isAutoStyle?"Remove Auto style":"Apply Auto Style")+'\n          ">\n          <i class="CDB-IconFont CDB-IconFont-drop CDB-IconFont--small CDB-IconFont--top"></i>\n        </button>\n      '),__p+='\n      <button class="CDB-Shape CDB-Widget-actions js-actions u-lSpace" data-tooltip="More options">\n        <div class="CDB-Shape-threePoints is-blue is-small">\n          <div class="CDB-Shape-threePointsItem"></div>\n          <div class="CDB-Shape-threePointsItem"></div>\n          <div class="CDB-Shape-threePointsItem"></div>\n        </div>\n      </button>\n    </div>\n  </div>\n  ',showSource&&(__p+='\n    <dl class="CDB-Widget-info u-tSpace">\n      <div class="u-ellipsis u-flex">\n        <span class="CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase" style="background-color: '+(null==(__t=sourceColor)?"":__t)+';">'+(null==(__t=sourceId)?"":__t)+'</span>\n        <p class="CDB-Text CDB-Size-small u-mainTextColor u-ellipsis u-flex">\n          '+(null==(__t=sourceType)?"":__t)+' <span class="u-altTextColor u-lSpace u-ellipsis" title="'+(null==(__t=layerName)?"":__t)+'">'+(null==(__t=layerName)?"":__t)+"</span>\n        </p>\n      </div>\n    </dl>\n  "),__p+="\n"),__p+="\n";return __p}},933:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<ul class="CDB-Dropdown-list CDB-Text CDB-Size-medium">\n\n  ',flags.canCollapse&&(__p+='\n    <li class="CDB-Dropdown-item">\n      <button class="CDB-Dropdown-link js-toggleCollapsed">\n        Toggle widget\n          <div class="CDB-Dropdown-toggle">\n          ',collapsed?__p+='\n            <input class="CDB-Toggle js-inputCollapsed" checked="checked" type="checkbox" name="collapsed">\n          ':__p+='\n            <input class="CDB-Toggle js-inputCollapsed" type="checkbox" name="collapsed">\n          ',__p+='\n            <span class="u-iBlock CDB-ToggleFace"></span>\n          </div>\n      </button>\n    </li>\n  '),__p+="\n\n  ",flags.localTimezone&&(__p+='\n  <li class="CDB-Dropdown-item">\n    <button class="CDB-Dropdown-link js-toggleLocalTimezone">\n      Local Time Zone\n      <div class="CDB-Dropdown-toggle">\n        ',local_timezone?__p+='\n          <input class="CDB-Toggle u-iBlock js-localTimezone" checked="checked" type="checkbox" name="localtimezone">\n        ':__p+='\n          <input class="CDB-Toggle u-iBlock js-localTimezone" type="checkbox" name="localtimezone">\n        ',__p+='\n        <span class="u-iBlock CDB-ToggleFace"></span>\n      </div>\n    </button>\n  </li>\n  '),__p+="\n\n  ",flags.normalizeHistogram&&(__p+='\n  <li class="CDB-Dropdown-item">\n    <button class="CDB-Dropdown-link js-toggleNormalized">\n      Show totals\n      <div class="CDB-Dropdown-toggle">\n        ',normalized?__p+='\n          <input class="CDB-Toggle u-iBlock js-inputNormalized" type="checkbox" name="normalized">\n        ':__p+='\n          <input class="CDB-Toggle u-iBlock js-inputNormalized" checked="checked" type="checkbox" name="normalized">\n        ',__p+='\n        <span class="u-iBlock CDB-ToggleFace"></span>\n      </div>\n    </button>\n  </li>\n  '),__p+="\n\n  ",show_options&&(__p+='\n    <li class="CDB-Dropdown-item">\n      <button type="button" class="CDB-Dropdown-link u-ellipsis u-actionTextColor js-editWidget" title="Edit">Edit</button>\n    </li>\n    <li class="CDB-Dropdown-item">\n      <button type="button" class="CDB-Dropdown-link u-ellipsis u-errorTextColor js-removeWidget" title="Delete...">Delete...</button>\n    </li>\n  '),__p+="\n</ul>\n";return __p}},934:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=__e(prefix)+""+__e(value)+__e(suffix)+"\n";return __p}},935:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="CDB-Widget-listItem--fake"></div>\n';return __p}},936:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Widget-header js-header">\n  <div class="CDB-Widget-title CDB-Widget-contentSpaced">\n    <h3 class="CDB-Text CDB-Size-large u-ellipsis '+__e(isCollapsed?"js-value is-collapsed":"js-title")+'">',isCollapsed?__p+=__e(formatedValue):__p+=" "+__e(title),__p+='</h3>\n    <div class="CDB-Widget-options">\n      <button class="CDB-Shape CDB-Widget-actions js-actions" data-tooltip="More options">\n        <div class="CDB-Shape-threePoints is-blue is-small">\n          <div class="CDB-Shape-threePointsItem"></div>\n          <div class="CDB-Shape-threePointsItem"></div>\n          <div class="CDB-Shape-threePointsItem"></div>\n        </div>\n      </button>\n    </div>\n  </div>\n  ',showSource&&(__p+='\n    <dl class="CDB-Widget-info u-tSpace">\n      <div class="u-ellipsis u-flex">\n        <span class="CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase" style="background-color: '+(null==(__t=sourceColor)?"":__t)+';">'+(null==(__t=sourceId)?"":__t)+'</span>\n        <p class="CDB-Text CDB-Size-small u-mainTextColor u-ellipsis u-flex">\n          '+(null==(__t=sourceType)?"":__t)+' <span class="u-altTextColor u-lSpace u-ellipsis" title="'+(null==(__t=layerName)?"":__t)+'">'+(null==(__t=layerName)?"":__t)+"</span>\n        </p>\n      </div>\n    </dl>\n  "),__p+="\n  ",showStats&&(__p+='\n    <dl class="CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace">\n      <dt class="CDB-Widget-infoCount">'+__e(nulls)+'</dt><dd class="CDB-Widget-infoDescription">null rows</dd>\n    </dl>\n  '),__p+='\n</div>\n<div class="CDB-Widget-content CDB-Widget-content--formula">\n  ',_.isNumber(value)?(__p+='\n    <h4 class="CDB-Text CDB-Size-huge '+__e(isCollapsed?"":"js-value")+'" title="'+__e(value)+'">\n      '+__e(prefix)+__e(value)+__e(suffix)+"\n    </h4>\n    ",description&&(__p+='\n      <p class="CDB-Text CDB-Size-small u-tSpace js-description">'+__e(description)+"</p>\n    "),__p+="\n  "):__p+='\n    <div class="CDB-Widget-listItem--fake"></div>\n  ',__p+="\n</div>\n";return __p}},937:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=__e(value)+" "+__e(suffix)+"\n";return __p}},938:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Widget-header js-header">\n  <div class="js-title"></div>\n  ',isCollapsed||(__p+="\n    ",showSource&&(__p+='\n      <dl class="CDB-Widget-info u-tSpace">\n        <div class="u-ellipsis u-flex">\n          <span class="CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase" style="background-color: '+(null==(__t=sourceColor)?"":__t)+';">'+(null==(__t=sourceId)?"":__t)+'</span>\n          <p class="CDB-Text CDB-Size-small u-mainTextColor u-ellipsis u-flex">\n            '+(null==(__t=sourceType)?"":__t)+' <span class="u-altTextColor u-lSpace u-ellipsis" title="'+(null==(__t=layerName)?"":__t)+'">'+(null==(__t=layerName)?"":__t)+"</span>\n          </p>\n        </div>\n      </dl>\n    "),__p+="\n    ",showStats&&(__p+='\n      <dl class="CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace">\n        ',showNulls&&(__p+='\n        <dt class="CDB-Widget-infoCount js-nulls">0</dt><dd class="CDB-Widget-infoDescription">NULL ROWS</dd>\n        '),__p+='\n        <dt class="CDB-Widget-infoCount js-min">0</dt><dd class="CDB-Widget-infoDescription">MIN</dd>\n        <dt class="CDB-Widget-infoCount js-avg">0</dt><dd class="CDB-Widget-infoDescription">AVG</dd>\n        <dt class="CDB-Widget-infoCount js-max">0</dt><dd class="CDB-Widget-infoDescription">MAX</dd>\n      </dl>\n    '),__p+="\n  "),__p+="\n</div>\n",isCollapsed||(__p+='\n<div class="CDB-Widget-content CDB-Widget-content--histogram js-content">\n  <div class="CDB-Widget-filter CDB-Widget-contentSpaced ">\n    <p class="CDB-Text CDB-Size-small is-semibold u-upperCase js-val">…</p>\n    <div class="CDB-Widget-filterButtons js-filter is-hidden">\n      <button class="CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-zoom">zoom</button>\n      <button class="CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear">clear</button>\n    </div>\n  </div>\n  <div class="js-mini-chart"></div>\n  <div class="CDB-Chart--histogram js-chart"></div>\n</div>\n'),__p+="\n";return __p}},939:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Widget-title CDB-Widget-contentSpaced">\n  <h3 class="CDB-Text CDB-Size-large u-ellipsis" title="'+__e(title)+'">'+__e(title)+'</h3>\n  <div class="CDB-Widget-options CDB-Widget-contentSpaced">\n    ',isAutoStyleEnabled&&(__p+='\n      <button class="CDB-Widget-buttonIcon CDB-Widget-buttonIcon--circle js-sizes\n        '+__e(isAutoStyle?"is-selected":"")+"\n        "+__e(isAutoStyle?"js-cancelAutoStyle":"js-autoStyle")+'\n        " data-tooltip="'+__e(isAutoStyle?"Remove Auto style":"Apply Auto Style")+'">\n        <i class="CDB-IconFont CDB-IconFont-drop CDB-IconFont--small CDB-IconFont--top"></i>\n      </button>\n    '),__p+='\n    <button class="CDB-Shape CDB-Widget-actions js-actions u-lSpace" data-tooltip="More options">\n      <div class="CDB-Shape-threePoints is-blue is-small">\n        <div class="CDB-Shape-threePointsItem"></div>\n        <div class="CDB-Shape-threePointsItem"></div>\n        <div class="CDB-Shape-threePointsItem"></div>\n      </div>\n    </button>\n  </div>\n</div>\n';return __p}},940:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=__e(value)+" "+__e(suffix)+"\n";return __p}},941:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Widget-header js-header">\n  <div class="js-title"></div>\n\n  ',showSource&&(__p+='\n    <div class="CDB-Widget-contentSpaced CDB-Widget-contentFull">\n      <dl class="CDB-Widget-info u-tSpace">\n        <div class="u-ellipsis u-flex">\n          <span class="CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase" style="background-color: '+(null==(__t=sourceColor)?"":__t)+';">'+(null==(__t=sourceId)?"":__t)+'</span>\n          <p class="CDB-Text CDB-Size-small u-secondaryTextColor u-ellipsis u-flex">\n            '+(null==(__t=sourceType)?"":__t)+' <span class="u-altTextColor u-lSpace u-ellipsis" title="'+(null==(__t=layerName)?"":__t)+'">'+(null==(__t=layerName)?"":__t)+"</span>\n          </p>\n        </div>\n      </dl>\n    </div>\n  "),__p+='\n</div>\n\n<div class="CDB-Widget-content CDB-Widget-content--timeSeries js-content"></div>\n';return __p}},942:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<p class="CDB-Text CDB-Size-large js-widget-title u-iBlock u-ellipsis u-rSpace">'+__e(title)+'</p>\n<div class="CDB-Widget-contentSpaced--end">\n  <div class="CDB-Widget-options CDB-Widget-contentSpaced">\n    <p class="CDB-Text CDB-Size-small is-semibold u-upperCase u-rSpace--m js-val">…</p>\n\n    ',showSelection&&start&&end&&(__p+='\n      <div class="CDB-Chart-staticTips">\n        <div class="CDB-Chart-staticTip u-iBlock u-rSpace">\n          <p class="CDB-Text CDB-Size-small CDB-Chart-staticTipText">'+(null==(__t=start)?"":__t)+'</p>\n        </div>\n\n        <p class="CDB-Text CDB-Size-small is-semibold u-upperCase u-iBlock u-rSpace">to</p>\n\n        <div class="CDB-Chart-staticTip u-iBlock">\n          <p class="CDB-Text CDB-Size-small CDB-Chart-staticTipText">'+(null==(__t=end)?"":__t)+"</p>\n        </div>\n      </div>\n    "),__p+="\n\n    ",showClearButton&&(__p+='\n      <button class="CDB-Text CDB-Size-small is-semibold u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear">Clear</button>\n    '),__p+='\n    <button class="CDB-Shape CDB-Widget-actions js-actions u-lSpace" data-tooltip="More options">\n      <div class="CDB-Shape-threePoints is-blue is-small">\n        <div class="CDB-Shape-threePointsItem"></div>\n        <div class="CDB-Shape-threePointsItem"></div>\n        <div class="CDB-Shape-threePointsItem"></div>\n      </div>\n    </button>\n  </div>\n</div>\n';return __p}},943:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<button class="CDB-Widget-controlButton ',disabled&&(__p+="is-disabled "),__p+='" ',disabled&&(__p+=" disabled "),__p+='>\n    <div class="CDB-Widget-controlButtonContent">\n\n    ',running?__p+='\n        <svg width="6px" height="10px" viewBox="0 0 6 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g id="Time-series" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="Time-Series" transform="translate(-201.000000, -543.000000)" fill="#FFFFFF">\n                <g id="TS---01" transform="translate(168.000000, 432.000000)">\n                    <g id="Torque-bar" transform="translate(24.000000, 100.000000)">\n                        <g id="Button-Pause" transform="translate(0.000000, 4.000000)">\n                            <path d="M9,7 L10,7 L10,17 L9,17 L9,7 Z M14,7 L15,7 L15,17 L14,17 L14,7 Z" id="Combined-Shape"></path>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    ':__p+='\n        <svg width="9px" height="11px" viewBox="0 0 9 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g id="Time-series" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="Time-Series" transform="translate(-200.000000, -279.000000)" fill-rule="nonzero" fill="#FFFFFF">\n                <g id="TS---01" transform="translate(168.000000, 168.000000)">\n                    <g id="Torque-bar" transform="translate(24.000000, 72.000000)">\n                        <g id="Button-Play" transform="translate(0.000000, 32.000000)">\n                            <path d="M15.766443,12.044867 L9.20456553,8.10774058 C8.92171794,7.93803203 9,7.89347968 9,8.22734108 L9,16.2102807 C9,16.5418859 8.92367044,16.4984182 9.20456553,16.3298812 L15.766443,12.3927547 C16.0692969,12.2110424 16.0693051,12.2265843 15.766443,12.044867 Z M16.2809387,11.1873741 C17.23035,11.7570209 17.2319213,12.6796581 16.2809387,13.2502477 L9.71906129,17.1873741 C8.76964995,17.7570209 8,17.3168605 8,16.2102807 L8,8.22734108 C8,7.11806049 8.76807871,6.67965811 9.71906129,7.25024766 L16.2809387,11.1873741 Z" id="Triangle"></path>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    ',__p+="\n    </div>\n</button>\n";return __p}},944:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="CDB-Widget-contentSpaced CDB-Widget-contentSpaced--end js-torque-controls"></div>\n<div class="CDB-Widget-contentFull">\n  <div class="js-time-series-header"></div>\n</div>\n';return __p}},945:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Widget-header js-header">\n  <div class="js-torque-header"></div>\n\n  ',showSource&&(__p+='\n    <div class="CDB-Widget-contentSpaced CDB-Widget-contentFull">\n      <dl class="CDB-Widget-info u-tSpace">\n        <div class="u-ellipsis u-flex">\n          <span class="CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase" style="background-color: '+(null==(__t=sourceColor)?"":__t)+';">'+(null==(__t=sourceId)?"":__t)+'</span>\n          <p class="CDB-Text CDB-Size-small u-secondaryTextColor u-ellipsis u-flex">\n            '+(null==(__t=sourceType)?"":__t)+' <span class="u-altTextColor u-lSpace u-ellipsis" title="'+(null==(__t=layerName)?"":__t)+'">'+(null==(__t=layerName)?"":__t)+"</span>\n          </p>\n        </div>\n      </dl>\n    </div>\n  "),__p+="\n</div>\n";return __p}},946:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<p class="CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock">\n  '+__e(time)+"\n</p>\n";return __p}},947:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+=(null==(__t=placeholder)?"":__t)+'\n<button class="CDB-Button CDB-Button--secondary CDB-Button--medium CDB-Widget-errorButton js-refresh">\n  <span class="CDB-Button-Text CDB-Text is-semibold CDB-Size-medium">REFRESH</span>\n</button>\n\n';return __p}},948:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="CDB-Widget-title CDB-Widget-contentSpaced">\n  <h3 class="CDB-Text CDB-Size-large u-ellipsis" title="'+__e(title)+'">'+__e(title)+'</h3>\n</div>\n\n<h2 class="CDB-Text CDB-Size-small is-semibold u-upperCase u-tSpace">'+__e(error)+'</h2>\n\n<div class="CDB-Text CDB-Size-medium u-tSpace-xl">'+__e(message)+"</div>\n\n",refresh?__p+='\n  <button class="CDB-Button CDB-Button--secondary CDB-Button--medium u-tSpace-xl js-refresh">\n    <span class="CDB-Button-Text CDB-Text is-semibold CDB-Size-medium">REFRESH</span>\n  </button>\n':__p+="\n  "+(null==(__t=placeholder)?"":__t)+"\n",__p+="\n\n";return __p}},951:function(t,e,i){!function(e,i){"use strict";t.exports=function(t){"use strict";function e(t){var e=t.toLowerCase(),i=e.split(":"),n=i.length,r=8;""===i[0]&&""===i[1]&&""===i[2]?(i.shift(),i.shift()):""===i[0]&&""===i[1]?i.shift():""===i[n-1]&&""===i[n-2]&&i.pop(),n=i.length,-1!==i[n-1].indexOf(".")&&(r=7);var o;for(o=0;o<n&&""!==i[o];o++);if(o<r){for(i.splice(o,1,"0000");i.length<r;)i.splice(o,0,"0000");n=i.length}for(var s,a=0;a<r;a++){s=i[a].split("");for(var l=0;l<3&&"0"===s[0]&&s.length>1;l++)s.splice(0,1);i[a]=s.join("")}var h=-1,c=0,d=0,u=-1,p=!1;for(a=0;a<r;a++)p?"0"===i[a]?d+=1:(p=!1,d>c&&(h=u,c=d)):"0"===i[a]&&(p=!0,u=a,d=1);d>c&&(h=u,c=d),c>1&&i.splice(h,c,""),n=i.length;var f="";for(""===i[0]&&(f=":"),a=0;a<n&&(f+=i[a],a!==n-1);a++)f+=":";return""===i[n-1]&&(f+=":"),f}function i(){return t.IPv6===this&&(t.IPv6=n),this}var n=t&&t.IPv6;return{best:e,noConflict:i}}()}()},952:function(t,e,i){!function(e,i){"use strict";t.exports=function(t){"use strict";var e=t&&t.SecondLevelDomains,i={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return!1;var r=i.list[t.slice(e+1)];return!!r&&r.indexOf(" "+t.slice(n+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var n=i.list[t.slice(e+1)];return!!n&&n.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return null;var r=i.list[t.slice(e+1)];return r?r.indexOf(" "+t.slice(n+1,e)+" ")<0?null:t.slice(n+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return i}()}()},953:function(t,e,i){!function(e,n){"use strict";t.exports=function(t,e,i,n){"use strict";function r(t,e){var i=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof r))return i?n?new r(t,e):new r(t):new r;if(void 0===t){if(i)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}return this.href(t),void 0!==e?this.absoluteTo(e):this}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function l(t,e){var i,n,r={};if("RegExp"===s(e))r=null;else if(a(e))for(i=0,n=e.length;i<n;i++)r[e[i]]=!0;else r[e]=!0;for(i=0,n=t.length;i<n;i++)(r&&void 0!==r[t[i]]||!r&&e.test(t[i]))&&(t.splice(i,1),n--,i--);return t}function h(t,e){var i,n;if(a(e)){for(i=0,n=e.length;i<n;i++)if(!h(t,e[i]))return!1;return!0}var r=s(e);for(i=0,n=t.length;i<n;i++)if("RegExp"===r){if("string"==typeof t[i]&&t[i].match(e))return!0}else if(t[i]===e)return!0;return!1}function c(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function d(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function u(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,u).replace(/\*/g,"%2A")}function f(t){return function(e,i){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!i),this)}}function g(t,e){return function(i,n){return void 0===i?this._parts[t]||"":(null!==i&&(i+="",i.charAt(0)===e&&(i=i.substring(1))),this._parts[t]=i,this.build(!n),this)}}var _=n&&n.URI;r.version="1.17.1";var m=r.prototype,v=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return r.domAttributes[e]}},r.encode=p,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=p,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(t,e){var i=r.encode(t+"");return void 0===e&&(e=r.escapeQuerySpace),e?i.replace(/%20/g,"+"):i},r.decodeQuery=function(t,e){t+="",void 0===e&&(e=r.escapeQuerySpace);try{return r.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var w,b={encode:"encode",decode:"decode"},y=function(t,e){return function(i){try{return r[e](i+"").replace(r.characters[t][e].expression,function(i){return r.characters[t][e].map[i]})}catch(t){return i}}};for(w in b)r[w+"PathSegment"]=y("pathname",b[w]),r[w+"UrnPathSegment"]=y("urnpath",b[w]);var C=function(t,e,i){return function(n){var o;o=i?function(t){return r[e](r[i](t))}:r[e];for(var s=(n+"").split(t),a=0,l=s.length;a<l;a++)s[a]=o(s[a]);return s.join(t)}};r.decodePath=C("/","decodePathSegment"),r.decodeUrnPath=C(":","decodeUrnPathSegment"),r.recodePath=C("/","encodePathSegment","decode"),r.recodeUrnPath=C(":","encodeUrnPathSegment","decode"),r.encodeReserved=y("reserved","encode"),r.parse=function(t,e){var i;return e||(e={}),i=t.indexOf("#"),i>-1&&(e.fragment=t.substring(i+1)||null,t=t.substring(0,i)),i=t.indexOf("?"),i>-1&&(e.query=t.substring(i+1)||null,t=t.substring(0,i)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=r.parseAuthority(t,e)):(i=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,i)||null,e.protocol&&!e.protocol.match(r.protocol_expression)?e.protocol=void 0:"//"===t.substring(i+1,i+3)?(t=t.substring(i+3),t=r.parseAuthority(t,e)):(t=t.substring(i+1),e.urn=!0)),e.path=t,e},r.parseHost=function(t,e){t=t.replace(/\\/g,"/");var i,n,r=t.indexOf("/");if(-1===r&&(r=t.length),"["===t.charAt(0))i=t.indexOf("]"),e.hostname=t.substring(1,i)||null,e.port=t.substring(i+2,r)||null,"/"===e.port&&(e.port=null);else{var o=t.indexOf(":"),s=t.indexOf("/"),a=t.indexOf(":",o+1);-1!==a&&(-1===s||a<s)?(e.hostname=t.substring(0,r)||null,e.port=null):(n=t.substring(0,r).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(r).charAt(0)&&(r++,t="/"+t),t.substring(r)||"/"},r.parseAuthority=function(t,e){return t=r.parseUserinfo(t,e),r.parseHost(t,e)},r.parseUserinfo=function(t,e){var i,n=t.indexOf("/"),o=t.lastIndexOf("@",n>-1?n:t.length-1);return o>-1&&(-1===n||o<n)?(i=t.substring(0,o).split(":"),e.username=i[0]?r.decode(i[0]):null,i.shift(),e.password=i[0]?r.decode(i.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},r.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var i,n,o,s={},a=t.split("&"),l=a.length,h=0;h<l;h++)i=a[h].split("="),n=r.decodeQuery(i.shift(),e),o=i.length?r.decodeQuery(i.join("="),e):null,v.call(s,n)?("string"!=typeof s[n]&&null!==s[n]||(s[n]=[s[n]]),s[n].push(o)):s[n]=o;return s},r.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=r.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},r.buildHost=function(t){var e="";return t.hostname?(r.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},r.buildAuthority=function(t){return r.buildUserinfo(t)+r.buildHost(t)},r.buildUserinfo=function(t){var e="";return t.username&&(e+=r.encode(t.username),t.password&&(e+=":"+r.encode(t.password)),e+="@"),e},r.buildQuery=function(t,e,i){var n,o,s,l,h="";for(o in t)if(v.call(t,o)&&o)if(a(t[o]))for(n={},s=0,l=t[o].length;s<l;s++)void 0!==t[o][s]&&void 0===n[t[o][s]+""]&&(h+="&"+r.buildQueryParameter(o,t[o][s],i),!0!==e&&(n[t[o][s]+""]=!0));else void 0!==t[o]&&(h+="&"+r.buildQueryParameter(o,t[o],i));return h.substring(1)},r.buildQueryParameter=function(t,e,i){return r.encodeQuery(t,i)+(null!==e?"="+r.encodeQuery(e,i):"")},r.addQuery=function(t,e,i){if("object"==typeof e)for(var n in e)v.call(e,n)&&r.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=i);"string"==typeof t[e]&&(t[e]=[t[e]]),a(i)||(i=[i]),t[e]=(t[e]||[]).concat(i)}},r.removeQuery=function(t,e,i){var n,o,h;if(a(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===s(e))for(h in t)e.test(h)&&(t[h]=void 0);else if("object"==typeof e)for(h in e)v.call(e,h)&&r.removeQuery(t,h,e[h]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==i?"RegExp"===s(i)?!a(t[e])&&i.test(t[e])?t[e]=void 0:t[e]=l(t[e],i):t[e]!==String(i)||a(i)&&1!==i.length?a(t[e])&&(t[e]=l(t[e],i)):t[e]=void 0:t[e]=void 0}},r.hasQuery=function(t,e,i,n){switch(s(e)){case"String":break;case"RegExp":for(var o in t)if(v.call(t,o)&&e.test(o)&&(void 0===i||r.hasQuery(t,o,i)))return!0;return!1;case"Object":for(var l in e)if(v.call(e,l)&&!r.hasQuery(t,l,e[l]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(i)){case"Undefined":return e in t;case"Boolean":return i===Boolean(a(t[e])?t[e].length:t[e]);case"Function":return!!i(t[e],e,t);case"Array":return!!a(t[e])&&(n?h:c)(t[e],i);case"RegExp":return a(t[e])?!!n&&h(t[e],i):Boolean(t[e]&&t[e].match(i));case"Number":i=String(i);case"String":return a(t[e])?!!n&&h(t[e],i):t[e]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(t,e){var i,n=Math.min(t.length,e.length);for(i=0;i<n;i++)if(t.charAt(i)!==e.charAt(i)){i--;break}return i<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(i)&&"/"===e.charAt(i)||(i=t.substring(0,i).lastIndexOf("/")),t.substring(0,i+1))},r.withinString=function(t,e,i){i||(i={});var n=i.start||r.findUri.start,o=i.end||r.findUri.end,s=i.trim||r.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(t);if(!l)break;var h=l.index;if(i.ignoreHtml){var c=t.slice(Math.max(h-3,0),h);if(c&&a.test(c))continue}var d=h+t.slice(h).search(o),u=t.slice(h,d).replace(s,"");if(!i.ignore||!i.ignore.test(u)){d=h+u.length;var p=e(u,h,d,t);t=t.slice(0,h)+p+t.slice(d),n.lastIndex=h+p.length}}return n.lastIndex=0,t},r.ensureValidHostname=function(e){if(e.match(r.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},r.noConflict=function(t){if(t){var e={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(e.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(e.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=n.SecondLevelDomains.noConflict()),e}return n.URI===this&&(n.URI=_),this},m.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},m.clone=function(){return new r(this)},m.valueOf=m.toString=function(){return this.build(!1)._string},m.protocol=f("protocol"),m.username=f("username"),m.password=f("password"),m.hostname=f("hostname"),m.port=f("port"),m.query=g("query","?"),m.fragment=g("fragment","#"),m.search=function(t,e){var i=this.query(t,e);return"string"==typeof i&&i.length?"?"+i:i},m.hash=function(t,e){var i=this.fragment(t,e);return"string"==typeof i&&i.length?"#"+i:i},m.pathname=function(t,e){if(void 0===t||!0===t){var i=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?r.decodeUrnPath:r.decodePath)(i):i}return this._parts.urn?this._parts.path=t?r.recodeUrnPath(t):"":this._parts.path=t?r.recodePath(t):"/",this.build(!e),this},m.path=m.pathname,m.href=function(t,e){var i;if(void 0===t)return this.toString();this._string="",this._parts=r._parts();var n=t instanceof r,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[r.getDomAttribute(t)]||"",o=!1),!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=r.parse(String(t),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?t._parts:t;for(i in s)v.call(this._parts,i)&&(this._parts[i]=s[i])}return this.build(!e),this},m.is=function(t){var e=!1,n=!1,o=!1,s=!1,a=!1,l=!1,h=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),e=n||o,s=!e,a=s&&i&&i.has(this._parts.hostname),l=s&&r.idn_expression.test(this._parts.hostname),h=s&&r.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return h}return null};var x=m.protocol,S=m.port,M=m.hostname;m.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(r.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return x.call(this,t,e)},m.scheme=m.protocol,m.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return S.call(this,t,e)},m.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var i={};if("/"!==r.parseHost(t,i))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=i.hostname}return M.call(this,t,e)},m.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var i=this.protocol();return this.authority()?(i?i+"://":"")+this.authority():""}var n=r(t);return this.protocol(n.protocol()).authority(n.authority()).build(!e),this},m.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?r.buildHost(this._parts):"";if("/"!==r.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},m.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?r.buildAuthority(this._parts):"";if("/"!==r.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},m.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var i=r.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==t[t.length-1]&&(t+="@"),r.parseUserinfo(t,this._parts),this.build(!e),this},m.resource=function(t,e){var i;return void 0===t?this.path()+this.search()+this.hash():(i=r.parse(t),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!e),this)},m.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}var n=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,n),a=new RegExp("^"+o(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},m.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);if(i&&i.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(r.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var s=new RegExp(o(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},m.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(n+1);return!0!==e&&i&&i.list[r.toLowerCase()]?i.get(this._parts.hostname)||r:r}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},m.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return t?r.decodePath(n):n}var s=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,s),l=new RegExp("^"+o(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.recodePath(t),this._parts.path=this._parts.path.replace(l,t),this.build(!e),this},m.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var i=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(i+1);return t?r.decodePathSegment(n):n}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(o(this.filename())+"$");return t=r.recodePath(t),this._parts.path=this._parts.path.replace(a,t),s?this.normalizePath(e):this.build(!e),this},m.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var i,n,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(i=s.substring(a+1),n=/^[a-z0-9%]+$/i.test(i)?i:"",t?r.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var l,h=this.suffix();if(h)l=t?new RegExp(o(h)+"$"):new RegExp(o("."+h)+"$");else{if(!t)return this;this._parts.path+="."+r.recodePath(t)}return l&&(t=r.recodePath(t),this._parts.path=this._parts.path.replace(l,t)),this.build(!e),this},m.segment=function(t,e,i){var n=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),s=r.split(n);if(void 0!==t&&"number"!=typeof t&&(i=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var l=0,h=e.length;l<h;l++)(e[l].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(d(e[l])))}else(e||"string"==typeof e)&&(e=d(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=d(e):s.splice(t,1);return o&&s.unshift(""),this.path(s.join(n),i)},m.segmentCoded=function(t,e,i){var n,o,s;if("number"!=typeof t&&(i=e,e=t,t=void 0),void 0===e){if(n=this.segment(t,e,i),a(n))for(o=0,s=n.length;o<s;o++)n[o]=r.decode(n[o]);else n=void 0!==n?r.decode(n):void 0;return n}if(a(e))for(o=0,s=e.length;o<s;o++)e[o]=r.encode(e[o]);else e="string"==typeof e||e instanceof String?r.encode(e):e;return this.segment(t,e,i)};var B=m.query;return m.query=function(t,e){if(!0===t)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,i);return this._parts.query=r.buildQuery(n||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=r.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):B.call(this,t,e)},m.setQuery=function(t,e,i){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)v.call(t,o)&&(n[o]=t[o])}return this._parts.query=r.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(i=e),this.build(!i),this},m.addQuery=function(t,e,i){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(n,t,void 0===e?null:e),this._parts.query=r.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(i=e),this.build(!i),this},m.removeQuery=function(t,e,i){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(n,t,e),this._parts.query=r.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(i=e),this.build(!i),this},m.hasQuery=function(t,e,i){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(n,t,e,i)},m.setSearch=m.setQuery,m.addSearch=m.addQuery,m.removeSearch=m.removeQuery,m.hasSearch=m.hasQuery,m.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},m.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},m.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},m.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},m.normalizePath=function(t){var e=this._parts.path;if(!e)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;e=r.recodePath(e);var i,n,o,s="";for("/"!==e.charAt(0)&&(i=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),i&&(s=e.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(n=e.search(/\/\.\.(\/|$)/));)0!==n?(o=e.substring(0,n).lastIndexOf("/"),-1===o&&(o=n),e=e.substring(0,o)+e.substring(n+3)):e=e.substring(3);return i&&this.is("relative")&&(e=s+e.substring(1)),this._parts.path=e,this.build(!t),this},m.normalizePathname=m.normalizePath,m.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},m.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},m.normalizeSearch=m.normalizeQuery,m.normalizeHash=m.normalizeFragment,m.iso8859=function(){var t=r.encode,e=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},m.unicode=function(){var t=r.encode,e=r.decode;r.encode=p,r.decode=unescape;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},m.readable=function(){var e=this.clone();e.username("").password("").normalize();var i="";if(e._parts.protocol&&(i+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(i+=t.toUnicode(e._parts.hostname),e._parts.port&&(i+=":"+e._parts.port)):i+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(i+="/"),i+=e.path(!0),e._parts.query){for(var n="",o=0,s=e._parts.query.split("&"),a=s.length;o<a;o++){var l=(s[o]||"").split("=");n+="&"+r.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(n+="="+r.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}i+="?"+n.substring(1)}return i+=r.decodeQuery(e.hash(),!0)},m.absoluteTo=function(t){var e,i,n,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof r||(t=new r(t)),o._parts.protocol||(o._parts.protocol=t._parts.protocol),this._parts.hostname)return o;for(i=0;n=s[i];i++)o._parts[n]=t._parts[n];return o._parts.path?".."===o._parts.path.substring(-2)&&(o._parts.path+="/"):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),"/"!==o.path().charAt(0)&&(e=t.directory(),e=e||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath()),o.build(),o},m.relativeTo=function(t){var e,i,n,o,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new r(t).normalize(),e=a._parts,i=t._parts,o=a.path(),s=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===i.protocol&&(e.protocol=null),e.username!==i.username||e.password!==i.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==i.hostname||e.port!==i.port)return a.build();if(e.hostname=null,e.port=null,o===s)return e.path="",a.build();if(!(n=r.commonPath(o,s)))return a.build();var l=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=l+e.path.substring(n.length)||"./",a.build()},m.equals=function(t){var e,i,n,o=this.clone(),s=new r(t),l={},h={},d={};if(o.normalize(),s.normalize(),o.toString()===s.toString())return!0;if(e=o.query(),i=s.query(),o.query(""),s.query(""),o.toString()!==s.toString())return!1;if(e.length!==i.length)return!1;l=r.parseQuery(e,this._parts.escapeQuerySpace),h=r.parseQuery(i,this._parts.escapeQuerySpace);for(n in l)if(v.call(l,n)){if(a(l[n])){if(!c(l[n],h[n]))return!1}else if(l[n]!==h[n])return!1;d[n]=!0}for(n in h)if(v.call(h,n)&&!d[n])return!1;return!0},m.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},m.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},r}(i(954),i(951),i(952))}()},954:function(t,e,i){(function(t,n){var r;!function(n){function o(t){throw new RangeError(j[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function a(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(T,"."),n+s(t.split("."),e).join(".")}function l(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=E(t>>>10&1023|55296),t=56320|1023&t),e+=E(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function d(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function u(t,e,i){var n=0;for(t=i?z(t/x):t>>1,t+=z(t/e);t>A*y>>1;n+=w)t=z(t/A);return z(n+(A+1)*t/(t+C))}function p(t){var e,i,n,r,s,a,l,d,p,f,g=[],_=t.length,m=0,C=M,x=S;for(i=t.lastIndexOf(B),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&o("not-basic"),g.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<_;){for(s=m,a=1,l=w;r>=_&&o("invalid-input"),d=c(t.charCodeAt(r++)),(d>=w||d>z((v-m)/a))&&o("overflow"),m+=d*a,p=l<=x?b:l>=x+y?y:l-x,!(d<p);l+=w)f=w-p,a>z(v/f)&&o("overflow"),a*=f;e=g.length+1,x=u(m-s,e,0==s),z(m/e)>v-C&&o("overflow"),C+=z(m/e),m%=e,g.splice(m++,0,C)}return h(g)}function f(t){var e,i,n,r,s,a,h,c,p,f,g,_,m,C,x,D=[];for(t=l(t),_=t.length,e=M,i=0,s=S,a=0;a<_;++a)(g=t[a])<128&&D.push(E(g));for(n=r=D.length,r&&D.push(B);n<_;){for(h=v,a=0;a<_;++a)(g=t[a])>=e&&g<h&&(h=g);for(m=n+1,h-e>z((v-i)/m)&&o("overflow"),i+=(h-e)*m,e=h,a=0;a<_;++a)if(g=t[a],g<e&&++i>v&&o("overflow"),g==e){for(c=i,p=w;f=p<=s?b:p>=s+y?y:p-s,!(c<f);p+=w)x=c-f,C=w-f,D.push(E(d(f+x%C,0))),c=z(x/C);D.push(E(d(c,0))),s=u(i,m,n==r),i=0,++n}++i,++e}return D.join("")}function g(t){return a(t,function(t){return D.test(t)?p(t.slice(4).toLowerCase()):t})}function _(t){return a(t,function(t){return k.test(t)?"xn--"+f(t):t})}var m,v=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,2147483647),w=36,b=1,y=26,C=38,x=700,S=72,M=128,B="-",D=/^xn--/,k=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=w-b,z=Math.floor,E=String.fromCharCode;m={version:"1.3.2",ucs2:{decode:l,encode:h},decode:p,encode:f,toASCII:_,toUnicode:g},void 0!==(r=function(){return m}.call(e,i,e,t))&&(t.exports=r)}()}).call(e,i(132)(t),i(14))},955:function(t,e,i){"use strict";var n=function(){};t.exports=n}});
//# sourceMappingURL=builder_embed_vendor.js.map