function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();define("topBar/topBarComponent/topBarMapper",["lodash","core","stateManagement","experiment"],function(e,t,o,n){"use strict";return function(i){var a={openPanel:i.panelManager.openPanel,openPanels:i.getOpenPanels(),openPagesPanel:i.openPagesPanel,openHelpCenter:i.panelManager.openHelpCenter,topBarPagesFilter:i.topBarPagesFilter.get(),setTopBarPagesFilter:i.topBarPagesFilter.set,getPagesList:function(){return i.mainMenu.getMenuItemsFlattened()},currentPageTitle:i.pages.getCurrentUrlPageTitle()||"",currentPageId:e.invoke(i,"documentServices.pages.getFocusedPageId")||"",navigateTo:i.pages.navigateTo,closePagesPanel:i.panelHelpers.closePagesPanel,undo:i.history.undo,redo:i.history.redo,saveAndPublish:function(e){i.savePublish.isSavePublishLocked()||i.publishManager.saveAndPublish(e)},save:function(e){return i.saveManager.save({origin:e})},upgrade:i.account.upgrade,sendBi:function(e,t){return i.bi.event(e,t)},togglePreviewSimple:i.preview.togglePreview,toggleHideTools:function(){var e=i.toolsControl.toggleHideTools()?t.bi.events.editor.hide_tools.hide_controls:t.bi.events.editor.hide_tools.show_controls;i.bi.event(e,{origin:"handle"})},enterZoomMode:function(){i.panelManager.closeAllPanels(),i.toolsControl.toggleHideTools(!0,!0),window.setTimeout(function(){i.zoomMode.enterZoomMode(),i.bi.event(t.bi.events.topbar.top_bar_click,{category:"zoomout"}),i.bi.event(t.bi.events.preview.PREVIEW_CLICK,{origin:"topbar"})},400)},togglePreview:function(){i.savePublish.isSavePublishLocked()||(i.savePublish.lockSavePublish(),i.preview.togglePreview(),window.setTimeout(i.savePublish.unlockSavePublish,500))},isPopupOpen:i.isPreviewReady()&&i.documentServices.pages.popupPages.isPopupOpened(),areToolsHiddenAndStagePositionMaintained:i.toolsControl.areToolsHiddenAndStagePositionMaintained(),isMobileEditor:i.isMobileEditor(),setEditorMode:i.setEditorMode,isPreviewMode:i.preview.isInPreviewMode(),idePaneState:i.developerMode.ui.idePane.getState(),isPublishInProgress:i.savePublish.isPublishInProgress(),isSaveInProgress:i.savePublish.isSaveInProgress(),isFirstSave:e.invoke(i,"documentServices.generalInfo.isFirstSave")||!1,isSiteFromOnBoarding:e.invoke(i,"documentServices.generalInfo.isSiteFromOnBoarding")||!1,isSitePublished:e.invoke(i,"documentServices.generalInfo.isSitePublished")||!1,siteId:e.invoke(i,"documentServices.generalInfo.getSiteId"),metaSiteId:e.invoke(i,"documentServices.generalInfo.getMetaSiteId"),sitePublicUrl:i.site.getSitePublicUrl()||"",canUserPublish:i.savePublish.canUserPublish(),isMobileOptimized:i.isMobileOptimizedSite(),isSavedInCurrentSession:i.isSavedInCurrentSession,deviceType:i.getDeviceType(),isToolBarEnabled:Boolean(i.toolbar.isToolbarEnabled()),isRulersEnabled:Boolean(i.rulers.isRulersEnabled()),isGuidelinesEnabled:Boolean(i.grid.guidelines.isGuidelinesEnabled()),isSnapToEnabled:Boolean(i.grid.snapTo.isSnapToEnabled()),isDeveloperModeEnabled:Boolean(i.developerMode.isEnabled()),isDeveloperToolBarEnabled:Boolean(i.developerToolBar.isEnabled()),isDeveloperHiddenComponentsEnabled:Boolean(i.developerHiddenComponents.isEnabled()),toggleToolBar:i.toolbar.toggleToolbar,toggleRulers:i.rulers.toggleRulers,toggleGuidelines:i.grid.guidelines.toggleGuidelines,toggleSnapTo:i.grid.snapTo.toggleSnapTo,toggleDeveloperMode:i.developerMode.toggle,toggleDeveloperToolBar:i.developerToolBar.toggle,toggleDeveloperHiddenComponents:i.developerHiddenComponents.toggle,getEditorVersionsInfo:i.account.getEditorVersionsInfo,isWixSEOWizExperimentOpen:e.result(i,"account.isWixSEOWizExperimentOpen"),isTemplate:e.result(i,"documentServices.generalInfo.isTemplate"),isUserOwner:i.account.isUserOwner(),openWixSEOWiz:function(){return i.account.openWixSEOWiz("EDITOR_MENU")},openConnectDomain:i.account.openConnectDomain,manage:i.account.manage,openSettings:i.account.openSettings,openRevisions:i.account.openRevisions,exitEditor:i.exitEditor,accountUpgrade:i.account.upgrade,isActivePersonalSaleCampaign:i.campaigns.personalSale.isActiveCampaign(),personalSaleCampaignAssetPath:i.campaigns.personalSale.getAssetPath(),personalSaleCampaignDiscountValue:i.campaigns.personalSale.isActiveCampaign()?i.campaigns.personalSale.getDiscountValue():null,isSiteInWixStoreTestDrive:i.wixStores.isSiteInWixStoreTestDrive(),setMobileOptimizedSite:i.setMobileOptimizedSite,isPopupOpened:e.invoke(i,"documentServices.pages.popupPages.isPopupOpened"),developerModeFirstTime:o.userPreferences.selectors.getSiteUserPreferences(t.constants.USER_PREFS.DEVELOPER_MODE.FIRST_TIME)(i.store.getState())||!1,closeAllPanels:i.panelManager.closeAllPanels,closePopupPages:i.pages.popupPages.close,openDropPanel:i.topBarMenuBar.openDropDown,closeDropPanel:i.topBarMenuBar.closeDropDown,openedDropPanel:i.topBarMenuBar.getOpenedDropDown(),openMobileElementsPanel:i.panelHelpers.openMobileElementsPanel,languageCode:i.getLanguageCode(),waitForChangesApplied:i.documentServices?i.documentServices.waitForChangesApplied:null,collapseMobileMenu:function(){i.store.dispatch(o.leftBar.logic.actions.collapseMobileMenu())},shouldShowAutoSaveUI:i.autosaveManager.shouldShowAutosaveUI(),isModeSwitchAnimationInProgress:i.topBar.isModeSwitchAnimationInProgress(),getFeedbackNewCommentsCounter:function(){var e=i.feedback.getNewCommentsCounter();return e>99?"99+":e},forceOpenPagesQuickNavigationEventCounter:i.getForceOpenPagesQuickNavigationEventCounter()};return n.isOpen("se_multilingual")&&(e.isNil(i.documentServices)?(a.currentLanguageCode=null,a.isMultilingualSite=!1):(a.currentLanguageCode=i.documentServices.language.current.get(),a.isMultilingualSite=i.documentServices.language.multilingual.isEnabled())),a}}),define("topBar/topBarComponent/topBarData",["core","constants"],function(e,t){"use strict";var o,n,i=(o={},_defineProperty(o,e.constants.PROGRESS_STATUS.IDLE_SAVED,"top-bar-btn-idle-saved"),_defineProperty(o,e.constants.PROGRESS_STATUS.IN_PROGRESS,"top-bar-btn-in-progress-indicator"),_defineProperty(o,e.constants.PROGRESS_STATUS.DONE_SUCCESS,"top-bar-btn-done-successfully"),o),a=[t.ROOT_COMPS.TOPBAR.DROP_PANELS.SAVE,t.ROOT_COMPS.TOPBAR.DROP_PANELS.PUBLISH,t.ROOT_COMPS.TOPBAR.DROP_PANELS.WIXSTORES_MIGRATION_UPGRADE_SITE],r=[t.ROOT_COMPS.TOPBAR.DROP_PANELS.SITE,t.ROOT_COMPS.TOPBAR.DROP_PANELS.TOOLS,t.ROOT_COMPS.TOPBAR.DROP_PANELS.HELP,t.ROOT_COMPS.TOPBAR.DROP_PANELS.UPGRADE];return{MODES:{EDITOR:"editor",PREVIEW:"preview"},UPGRADE_BANNER_POSITIONS:{SITE_SAVED:"EDITOR_UPGRADE",SITE_NOT_SAVED:"EDITOR_FIRST_SAVE_UPGRADE"},progressButtonClassNames:i,PAGES_PANEL_FRAME:"pagesPanelFrame",TEXT_AND_LINK_DROP_PANEL_KEYS:a,AUTO_SAVE_DATA:(n={},_defineProperty(n,e.constants.PROGRESS_STATUS.IDLE_SAVED,{label:"TOPBAR_SAVE_SAVED_LABEL",tooltipData:{title:null,text:"TOPBAR_SAVE_SAVED_TOOLTIP"}}),_defineProperty(n,e.constants.PROGRESS_STATUS.IN_PROGRESS,{label:"TOPBAR_SAVE_SAVING_LABEL",tooltipData:{title:null,text:"TOPBAR_SAVE_SAVING_TOOLTIP"}}),n),EDIT_MODE_LAST_BUTTON_BUBBLE_STYLE_OVERRIDES:{content:{right:"6px"}},KEYBOARD_ACCESSIBLE_DROP_PANELS:r,RESPONSIVENESS_CLASS_SUFFIXES:{en:"en",ko:"small",fr:"small",tr:"small",de:"medium",pl:"medium",pt:"medium",es:"medium",hi:"medium",it:"medium",no:"medium",nl:"medium"}}}),define("topBar/topBarComponent/mapTopBarPropsToCustomDropPanels",["constants","topBar/topBarComponent/topBarData","experiment"],function(e,t){"use strict";var o=t.EDIT_MODE_LAST_BUTTON_BUBBLE_STYLE_OVERRIDES;return function(t){return[{key:e.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.MOBILE_OPTIMIZE_LAYOUT_UNDO,targetButtonKey:e.ROOT_COMPS.TOPBAR.BUTTONS.UNDO,dropPanelData:{title:"TOPBAR_UNDO_TOOLTIP_TITLE",body:"TOPBAR_MOBILE_TOOLTIP_UNDO_BODY",linkText:null,linkAction:null}},{key:e.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.AUTO_SAVE,targetButtonKey:e.ROOT_COMPS.TOPBAR.BUTTONS.SAVE,closeOnMouseLeave:!0,dropPanelData:{title:null,body:"TOPBAR_SITE_AUTOSAVE_TOOLTIP_BODY",linkText:"TOPBAR_SITE_AUTOSAVE_TOOLTIP_SITE_HISTORY",linkAction:t.openRevisions},bubbleStyleOverrides:t.isSiteInWixStoreTestDrive?o:null}]}}),define("topBar/actionSuccess/actionSuccessSymbol.rt",["react","lodash","symbols"],function(e,t,o){"use strict";return function(t,n){return e.createElement("div",{className:"action-success-symbol"},e.createElement(o.symbol,{name:"topBarActionSuccess"}),e.createElement("div",{className:"symbol-mask"}),e.createElement("div",{className:"circle"}))}}),define("topBar/actionSuccess/actionSuccessSymbol",["topBar/actionSuccess/actionSuccessSymbol.rt"],function(e){"use strict";var t=e;return t.displayName="ActionSuccessSymbol",t}),define("topBar/topBarComponent/mapTopBarPropsToButtons",["react","lodash","util","core","constants","topBar/actionSuccess/actionSuccessSymbol","topBar/topBarComponent/topBarData","experiment"],function(e,t,o,n,i,a,r,s){"use strict";var l=r.MODES,p=r.progressButtonClassNames,u=r.AUTO_SAVE_DATA,c=r.EDIT_MODE_LAST_BUTTON_BUBBLE_STYLE_OVERRIDES,d=i.ROOT_COMPS.TOPBAR.DROP_PANELS.MOBILE,_=function(e){return e===n.constants.PROGRESS_STATUS.DONE_SUCCESS},m=function(e){return e.shouldShowAutoSaveUI?t.get(u,e.savingStatus+".label","TOPBAR_Site_Save"):"TOPBAR_Site_Save"},T=function(e){return s.isOpen("se_obMigrationFlow")&&e.isSiteFromOnBoarding?{title:"ADI_EDITOR_MIGRATION_SAVE_TOOLTIP_TITLE",text:"ADI_EDITOR_MIGRATION_SAVE_TOOLTIP_TEXT"}:e.shouldShowAutoSaveUI?t.get(u,e.savingStatus+".tooltipData",null):null},P=function(r){return[{key:i.ROOT_COMPS.TOPBAR.BUTTONS.ZOOM,automationId:"top-bar-button-zoom",ref:"topBarZoomOutButton",symbolName:"zoomOut_v2",MODES:[l.EDITOR],className:r.isPopupOpen?"hidden":"",onClick:function(){r.enterZoomMode()},tooltipData:{title:"TOPBAR_ZoomOut_Tooltip_Title",text:"TOPBAR_ZoomOut_Tooltip_Body"}},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.UNDO,automationId:"top-bar-button-undo",ref:"undoButton",symbolName:"undo2_v2",MODES:[l.EDITOR],onClick:function(){r.undo(),r.sendBi(n.bi.events.topbar.top_bar_click,{category:"undo"}),r.sendBi(n.bi.events.editor.undo_redo_component_change,{type:"undo",origin:"topbar"})},tooltipData:{text:"TOPBAR_UNDO_TOOLTIP_TITLE"},disabled:r.idePaneState===n.constants.DEVELOPER_MODE.CONTAINER_STATES.MAXIMIZED},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.REDO,automationId:"top-bar-button-redo",className:"top-bar-button-redo",ref:"redoButton",symbolName:"redo2_v2",MODES:[l.EDITOR],onClick:function(){r.redo(),r.sendBi(n.bi.events.topbar.top_bar_click,{category:"redo"}),r.sendBi(n.bi.events.editor.undo_redo_component_change,{type:"redo",origin:"topbar"})},tooltipData:{text:"TOPBAR_REDO_TOOLTIP_TITLE"},disabled:r.idePaneState===n.constants.DEVELOPER_MODE.CONTAINER_STATES.MAXIMIZED},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.MOBILE,automationId:"top-bar-button-switch-mode",symbolName:r.isMobileEditor?"topBarDesktop":"topBarMobile",className:["top-bar-btn-device","MOBILE"===r.openedDropPanel?"active":"",r.isModeSwitchAnimationInProgress?"icon-shiver":""].join(" "),MODES:[l.EDITOR,l.PREVIEW],label:function(e){var t=e.isMobileEditor?"TOP_BAR_DESKTOP_EDITOR_LABEL":"TOP_BAR_MOBILE_EDITOR_LABEL";return o.translate(t)}(r),onClick:function(){r.openedDropPanel===d?r.closeDropPanel(!0):r.openDropPanel(d),r.sendBi(n.bi.events.topbar.top_bar_click,{category:"editor_view_mode",origin:r.isPreviewMode?l.PREVIEW:l.EDITOR})},onMouseEnter:function(){r.openedDropPanel===d&&r.openDropPanel(d)},onMouseLeave:function(){r.closeDropPanel()},tooltipData:function(e){return{title:e.isMobileEditor?"TOPBAR_DESKTOP_TOOLTIP_TITLE":"TOPBAR_MOBILE_TOOLTIP_TITLE_NEW",text:e.isMobileEditor?"TOPBAR_DESKTOP_TOOLTIP_BODY":"TOPBAR_MOBILE_TOOLTIP_BODY_NEW"}}(r)},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.WIXSTORES_MIGRATION_UPGRADE_SITE,automationId:"top-bar-button-stores-migration",MODES:[l.EDITOR,l.PREVIEW],className:"top-bar-btn-stores-migration",label:o.translate("TOPBAR_Site_Migration_Upgrade"),onClick:function(){r.closeDropPanel(!0),r.openPanel("wixStore.migration.wixStoreSwitchPopup",{},!0),r.sendBi(n.bi.events.wixstores.WIXSTORES_MIGRATION_UPGRADE_CLICKED,{origin:"top panel"})},onMouseEnter:function(){r.openDropPanel(i.ROOT_COMPS.TOPBAR.DROP_PANELS.WIXSTORES_MIGRATION_UPGRADE_SITE)},onMouseLeave:function(){r.closeDropPanel()},dropPanelData:{title:"TOPBAR_Site_Migration_Upgrade",body:"TOPBAR_Site_Migration_Upgrade_Description",linkText:null,linkAction:null},condition:function(){return r.isSiteInWixStoreTestDrive}},t.defaults(_(r.savingStatus)?{customSymbol:e.createElement(a)}:{symbolName:"topBarSave",symbolClassName:"top-bar-save-symbol"},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.SAVE,automationId:"top-bar-button-save",ref:"saveButton",className:["top-bar-btn-save",r.isSiteInWixStoreTestDrive?"top-bar-edit-mode-last-btn":"",p[r.savingStatus]||""].join(" "),label:o.translate(m(r)),MODES:r.isSiteInWixStoreTestDrive?[l.EDITOR]:[l.EDITOR,l.PREVIEW],onClick:function(){r.save("topbar"),r.closeDropPanel(!0),r.sendBi(n.bi.events.topbar.top_bar_click,{category:"save",origin:r.isPreviewMode?l.PREVIEW:l.EDITOR})},onMouseEnter:function(){T(r)||r.openDropPanel(i.ROOT_COMPS.TOPBAR.DROP_PANELS.SAVE)},onMouseLeave:function(){r.closeDropPanel()},disabled:r.isPublishInProgress||r.isSaveInProgress,bubbleStyleOverrides:r.isSiteInWixStoreTestDrive?c:null,dropPanelData:function(e){return e.shouldShowAutoSaveUI&&e.savingStatus===n.constants.PROGRESS_STATUS.IDLE?{title:"TOPBAR_SAVE_AS_SAVE_TOOLTIP_TITLE",body:e.isFirstSave?"TOPBAR_SAVE_TOOLTIP_BODY":"TOPBAR_SAVE_AS_SAVE_TOOLTIP_BODY",linkText:e.isFirstSave?null:"TOPBAR_SAVE_AS_SAVE_TOOLTIP_SITE_HISTORY",linkAction:e.isFirstSave?null:e.openRevisions}:{title:"TOPBAR_SAVE_TOOLTIP_TITLE",body:"TOPBAR_SAVE_TOOLTIP_BODY",linkText:e.isFirstSave?null:"TOPBAR_SAVE_TOOLTIP_LINK",linkAction:e.isFirstSave?null:e.openRevisions}}(r),tooltipData:T(r)}),{key:i.ROOT_COMPS.TOPBAR.BUTTONS.PREVIEW,automationId:"top-bar-button-preview",symbolName:"topBarPreview",className:"top-bar-button-preview",label:o.translate("TOPBAR_PREVIEW_TOOLTIP_TITLE"),MODES:[l.EDITOR],onClick:function(){r.togglePreview(),r.sendBi(n.bi.events.topbar.top_bar_click,{category:"preview"}),r.sendBi(n.bi.events.preview.PREVIEW_CLICK,{origin:"topbar"})},tooltipData:{title:"TOPBAR_PREVIEW_TOOLTIP_TITLE",text:"TOPBAR_PREVIEW_TOOLTIP_BODY"}},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.PUBLISH,automationId:"top-bar-button-publish",ref:"publishButton",customSymbol:_(r.publishingStatus)?e.createElement(a):null,className:["top-bar-btn-publish","top-bar-edit-mode-last-btn",p[r.publishingStatus]||""].join(" "),label:o.translate("TOPBAR_Site_Publish"),MODES:[l.EDITOR],onClick:function(){r.saveAndPublish("top_bar_publish"),r.closeDropPanel(!0),r.sendBi(n.bi.events.topbar.top_bar_click,{category:"publish"}),r.sendBi(n.bi.events.publish.PUBLISH_CLICK,{origin:"topbar"})},onMouseEnter:function(){r.openDropPanel(i.ROOT_COMPS.TOPBAR.DROP_PANELS.PUBLISH)},onMouseLeave:function(){r.closeDropPanel()},disabled:r.isPublishInProgress||r.isSaveInProgress||!r.canUserPublish,dropPanelData:function(e){return e.canUserPublish?e.isSitePublished?{title:"TOPBAR_POSTPUBLISH_TOOLTIP_TITLE",body:"TOPBAR_POSTPUBLISH_TOOLTIP_BODY",linkText:"SAVE_PUBLISH_BUTTON_VIEW",linkAction:function(){var t=e.sitePublicUrl;window.open(t)}}:{title:"TOPBAR_PREPUBLISH_TOOLTIP_TITLE",body:"TOPBAR_PREPUBLISH_TOOLTIP_BODY",linkText:null,linkAction:null}:{title:"TOPBAR_SITE_PUBLISH_DISABLED_PROMOTION_TITLE",body:"TOPBAR_SITE_PUBLISH_DISABLED_PROMOTION_TEXT",linkText:"TOPBAR_SITE_PUBLISH_DISABLED_PROMOTION_LINK",linkAction:function(){var e=o.languages.getLocalizedLink(n.constants.HELP_URLS.CONTRIBUTOR_ROLES,"{$lang}");window.open(e)}}}(r),bubbleStyleOverrides:c,condition:function(){return!r.isSiteInWixStoreTestDrive}},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.BACK_TO_EDITOR,automationId:"top-bar-button-back-to-editor",className:"top-bar-btn-back-to-editor",label:o.translate(r.isSiteInWixStoreTestDrive?"TOPBAR_EDIT_SITE":"TOPBAR_BACK_TO_EDITOR"),MODES:[l.PREVIEW],fakeLayoutItems:function(e){return e.isSiteInWixStoreTestDrive?[{type:"text",content:o.translate("TOPBAR_PREVIEW_TOOLTIP_TITLE")},{type:"text",content:o.translate(m(e))}]:[{type:"symbol",width:60,className:"fake-preview-item-symbol"},{type:"text",content:o.translate("TOPBAR_PREVIEW_TOOLTIP_TITLE"),className:"fake-preview-item-text"},{type:"text",content:o.translate("TOPBAR_Site_Publish")}]}(r),onClick:function(){r.sendBi(n.bi.events.topbar.top_bar_Preview_Page_Back_to_Editor_click),r.togglePreview(),r.isMobileEditor&&r.sendBi(n.bi.events.mobileEditor.MOBILE_EDITOR_READY),r.sendBi(n.bi.events.topbar.top_bar_Preview_Page_Back_to_Editor_click,{origin:"thumb"})},tooltipData:r.isSiteInWixStoreTestDrive?{title:"TOPBAR_EDIT_SITE",text:"TOPBAR_Edit_Site_Description"}:null}]};return function(e){return t(e).thru(P).reject(function(e){return e.condition&&!e.condition()}).value()}}),define("topBar/menuBar/menuBarListItems/getSiteMenuItems",["lodash","core","experiment"],function(e,t,o){"use strict";var n="savePublish.panels.save.saveYourSitePanel";return function(i){return[{key:"SAVE",automationId:"list-item-save",leftTitle:"TOPBAR_Site_Save",rightTitle:"TOPBAR_SITE_SAVE_PROMOTION_TITLE",description:"TOPBAR_SITE_SAVE_PROMOTION_TEXT",symbolName:"menubarSaveSitePromotion_v2",onClick:function(){i.save("top_bar_site_menu"),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"save"})}},{key:"PREVIEW",automationId:"list-item-preview",leftTitle:"TOPBAR_PREVIEW_TOOLTIP_TITLE",rightTitle:"TOPBAR_SITE_PREVIEW_PROMOTION_TITLE",description:"TOPBAR_SITE_PREVIEW_PROMOTION_TEXT",symbolName:"menubarPreviewSitePromotion_v2",onClick:function(){i.togglePreview(),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"preview"}),i.sendBi(t.bi.events.preview.PREVIEW_CLICK,{origin:"menubar"})}},{key:"FEEDBACK",automationId:"list-item-feedback",leftTitle:"TOPBAR_GetFeedback_Label",rightTitle:"TOPBAR_GetFeedback_Promotion_Title",description:"TOPBAR_GetFeedback_Promotion_Text",symbolName:"menubarfeedbackPromotion_v2",onClick:function(){i.isFirstSave?i.openPanel(n,{title:"TOPBAR_SITE_FEEDBACK_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_FEEDBACK_SAVE_FIRST_MSG_BODY"},!0):i.openPanel("panels.focusPanels.feedbackPanel"),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"feedback"}),i.sendBi(t.bi.events.preview.PREVIEW_CLICK,{origin:"menubar"})},getCounter:function(){return i.getFeedbackNewCommentsCounter()},condition:function(){return!((i.getEditorVersionsInfo()||{}).isEligibleForSwitch&&!i.isSavedInCurrentSession&&!i.isTemplate)&&i.isUserOwner}},{key:"PUBLISH",automationId:"list-item-publish",leftTitle:"TOPBAR_Site_Publish",rightTitle:"TOPBAR_SITE_PUBLISH_PROMOTION_TITLE",description:"TOPBAR_SITE_PUBLISH_PROMOTION_TEXT",symbolName:"menubarPublishSitePromotion_v2",isDisabled:!i.canUserPublish,onClick:function(){i.canUserPublish&&(i.saveAndPublish("top_bar_site_menu_publish"),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"publish"}),i.sendBi(t.bi.events.publish.PUBLISH_CLICK,{origin:"menubar"}))}},{key:"VIEW_SITE",automationId:"list-item-view-site",leftTitle:"TOPBAR_SITE_VIEWSITE",rightTitle:"TOPBAR_SITE_VIEW_SITE_PROMOTION_TITLE",description:"TOPBAR_SITE_VIEW_SITE_PROMOTION_TEXT",symbolName:"menubarViewPublishedPromotion_v2",isDisabled:!i.isSitePublished,onClick:function(){i.isSitePublished&&(window.open(i.sitePublicUrl),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"view_site"}))}},{key:"GET_TRAFFIC",automationId:"list-item-get-traffic",leftTitle:"TOPBAR_GetTraffic_Label",rightTitle:"TOPBAR_GetTraffic_Label",description:"TOPBAR_GetTraffic_Promotion_Text",symbolName:"menubarGetFoundOnGoogle_v2",isDisabled:!i.isSitePublished,onClick:function(){i.isSitePublished&&(i.openPanel("panels.focusPanels.getTrafficPanel",{title:"TOPBAR_SITE_FEEDBACK_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_FEEDBACK_SAVE_FIRST_MSG_BODY"},!0),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"get_traffic"}))},condition:function(){return!i.isWixSEOWizExperimentOpen}},{key:"GO_TO_SEO_WIZ",automationId:"list-item-go-to-seo-wiz",leftTitle:"TOPBAR_GetTraffic_New_Label",rightTitle:"TOPBAR_GetTraffic_New_Promotion_Title",description:"TOPBAR_GetTraffic_New_Promotion_Text",symbolName:"menubarGetFoundOnGoogle_v2",onClick:function(){i.openWixSEOWiz(),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"get_traffic"})},condition:function(){return i.isWixSEOWizExperimentOpen}},{key:"ACCESSIBILITY",automationId:"list-item-accessibility",experiment:"se_accessibilityPanel",leftTitle:"TOPBAR_SITE_ACCESSIBILITY",rightTitle:"TOPBAR_SITE_ACCESSIBILITY_PROMOTION_TITLE",description:"TOPBAR_SITE_ACCESSIBILITY_PROMOTION_TEXT",symbolName:"accessibilityTopBar",onClick:function(){i.sendBi(t.bi.events.accessibilityPanel.click_accessbility_in_topbar_menu,{site_id:i.siteId}),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"accessibility"}),i.openPanel("panels.focusPanels.accessibilityPanel")}},{key:"CONNECT_DOMAIN",automationId:"list-item-connect-domain",leftTitle:"TOPBAR_SITE_CONNECT_DOMAIN",rightTitle:"TOPBAR_SITE_CONNECT_PROMOTION_TITLE",description:"TOPBAR_SITE_CONNECT_PROMOTION_TEXT",symbolName:"menubarConnectDomainPromotion_v2",onClick:function(){i.isFirstSave?i.save():i.openConnectDomain(t.constants.CONNECT_DOMAIN.FLOWS.TOP_BAR),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"connect_domain"})},condition:function(){return i.isUserOwner&&!i.isSiteInWixStoreTestDrive}},{key:"MULTILINGUAL",automationId:"list-item-multilingual",experiment:"se_multilingual",leftTitle:"TOPBAR_MULTILINGUAL_LABEL",rightTitle:"TOPBAR_MULTILINGUAL_PROMOTION_TITLE",description:"TOPBAR_MULTILINGUAL_PROMOTION_TEXT",symbolName:"menubarPublishSitePromotion_v2",onClick:function(){i.openPanel("multilingual.panels.multilingualManagePanel",{title:"ML_MANAGER_TITLE",subtitle:"ML_MANAGER_SUBTITLE"}),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"multilingual"})}},e.defaults(i.isActivePersonalSaleCampaign?{translatedDescription:i.getPersonalSaleTranslatedLabel("TOPBAR_UPGRADE_POPUP_PERSONAL_SALE_LABEL_DYNAMIC"),illustrationClassName:"illustration-upgrade personal-sale-campaign",symbolName:i.getPersonalSaleCampaignSymbolName("menubarSitePanel")}:{translatedDescription:null,illustrationClassName:"illustration-upgrade",symbolName:"menubarUpgradePromotionLight_v2",image:null},{key:"UPGRADE",automationId:"list-item-upgrade",leftTitle:"TOPBAR_Upgrade_Label",rightTitle:"TOPBAR_SITE_UPGRADE_PROMOTION_TITLE",description:"TOPBAR_SITE_UPGRADE_PROMOTION_TEXT",listItemClassName:"list-item-upgrade",onClick:function(){i.isFirstSave?i.openPanel(n,{title:"TOPBAR_SITE_UPGRADE_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_UPGRADE_SAVE_FIRST_MSG_BODY"},!0):i.upgrade("edhtml_TOP_BAR_SITE_MENU_UPGRADE"),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"upgrade"})},condition:function(){return i.isUserOwner&&!i.isSiteInWixStoreTestDrive}}),{isSeparator:!0},e.defaults(i.isMobileEditor?{leftTitle:"Topbar_Site_Desktop_Editor",rightTitle:"TOPBAR_SITE_DESKTOP_PROMOTION_TITLE",description:"TOPBAR_SITE_DESKTOP_PROMOTION_TEXT",symbolName:"menubarSwitchToDesktopPromotion_v2"}:{leftTitle:"Topbar_Site_Mobile_Editor",rightTitle:"TOPBAR_SITE_MOBILE_PROMOTION_TITLE",description:"TOPBAR_SITE_MOBILE_PROMOTION_TEXT",symbolName:"menubarSwitchToMobilePromotion_v2"},{key:"EDITOR_MODE_SWITCH",automationId:"list-item-mode-switch",onClick:function(){i.setEditorMode(!i.isMobileEditor),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"editor_mode_switch"})}}),{isSeparator:!0},{key:"IMAGE_OPTIMIZATION",automationId:"list-item-image-optimization",leftTitle:"TOPBAR_SITE_IMAGE_QUALITY",rightTitle:"TOPBAR_SITE_IMAGE_QUALITY_PROMOTION_TITLE",description:"TOPBAR_SITE_IMAGE_QUALITY_PROMOTION_TEXT",symbolName:"imageOptimizationPromotion_v2",onClick:function(){i.openPanel("panels.focusPanels.siteImageOptimizationPanel",{panelName:"panels.focusPanels.siteImageOptimizationPanel"}),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"image_optimization"})}},{key:"SITE_DASHBOARD",automationId:"list-item-site-dashboard",leftTitle:"TOPBAR_SITE_DASHBOARD",rightTitle:"TOPBAR_SITE_DASHBOARD",description:"TOPBAR_SITE_DASHBOARD_PROMOTION_TEXT",symbolName:"menubarMySitesPromotion_v2",onClick:function(){i.isFirstSave?i.openPanel(n,{title:"TOPBAR_SITE_SETTINGS_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_DASHBOARD_SAVE_FIRST_MSG_BODY"},!0):i.manage(),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"site_dashboard"})}},{key:"SETTINGS",automationId:"list-item-site-manager",leftTitle:o.isOpen("us_topbarHacks")?"TOPBAR_Site_Label":"TOPBAR_Settings_Label",rightTitle:"TOPBAR_SITE_SETTINGS_PROMOTION_TITLE",description:"TOPBAR_SITE_SETTINGS_PROMOTION_TEXT",symbolName:"menubarSiteSettingsPromotion_v2",onClick:function(){i.isFirstSave?i.openPanel(n,{title:"TOPBAR_SITE_SETTINGS_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_SETTINGS_SAVE_FIRST_MSG_BODY"},!0):(i.sendBi(t.bi.events.topbar.top_bar_open_settings_click),i.openSettings()),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"settings"})}},{key:"REVISIONS",automationId:"list-item-site-revisions",leftTitle:"TOPBAR_Site_Site_Revisions",rightTitle:"TOPBAR_SITE_HISTORY_PROMOTION_TITLE",description:"TOPBAR_SITE_HISTORY_PROMOTION_TEXT",symbolName:"menubarSiteHistoryPromotion_v2",onClick:function(){i.isFirstSave?i.openPanel(n,{title:"TOPBAR_SITE_HISTORY_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_HISTORY_SAVE_FIRST_MSG_BODY"},!0):i.openRevisions(),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"revisions"})}},{key:"EXIT",automationId:"list-item-exit",leftTitle:"TOPBAR_Site_Logout",rightTitle:"TOPBAR_SITE_EXIT_PROMOTION_TITLE",description:"TOPBAR_SITE_EXIT_PROMOTION_TEXT",symbolName:"menubarExitEditorPromotion_v2",onClick:function(){i.exitEditor(),i.sendBi(t.bi.events.topbar.top_bar_SITE_menu_click,{category:"logout"})}}]}}),define("topBar/menuBar/menuBarListItems/getToolsMenuItems",["core"],function(e){"use strict";return function(t){return[{key:"TOOLBAR",automationId:"list-item-toolbar",isCheckbox:!0,checkboxValue:t.isToolBarEnabled,leftTitle:"TOPBAR_VIEW_TOOLBAR_TITLE",rightTitle:"TOPBAR_VIEW_TOOLBAR_TITLE",description:"TOPBAR_VIEW_TOOLBAR_BODY",symbolName:"menubarToolbarPromotion_v2",onClick:function(){t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"toolbar",status:t.isToolBarEnabled?0:1}),t.toggleToolBar()}},{key:"RULERS",automationId:"list-item-rulers",isCheckbox:!0,checkboxValue:t.isRulersEnabled,leftTitle:"TOPBAR_VIEW_RULERS1",rightTitle:"TOPBAR_VIEW_RULERS_TITLE1",description:"TOPBAR_VIEW_RULERS_BODY1",symbolName:"menubarRulersPromotion_v2",onClick:function(){t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"rulers",status:t.isRulersEnabled?0:1,editor_view_mode:t.deviceType}),t.toggleRulers()}},{key:"GUIDELINES",automationId:"list-item-guidelines",isCheckbox:!0,checkboxValue:t.isGuidelinesEnabled,isDisabled:t.isMobileEditor,leftTitle:"TOPBAR_VIEW_GRIDLINES_TITLE",rightTitle:"TOPBAR_VIEW_GRIDLINES_TITLE",description:"TOPBAR_VIEW_GRIDLINES_BODY",symbolName:"menubarGuidesPromotion_v2",onClick:function(){t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"guidelines",status:t.isGuidelinesEnabled?0:1}),t.toggleGuidelines()}},{key:"SNAP",automationId:"list-item-snap",isCheckbox:!0,checkboxValue:t.isSnapToEnabled,leftTitle:"TOPBAR_VIEW_SNAP_TITLE",rightTitle:"TOPBAR_VIEW_SNAP_TITLE",description:"TOPBAR_VIEW_SNAP_BODY",symbolName:"menubarSnapToObjectPromotion_v2",onClick:function(){t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"snap",status:t.isSnapToEnabled?0:1}),t.toggleSnapTo()}},{isSeparator:!0,experiment:"developerModeToggle"},{key:"DEVELOPER_MODE",automationId:"list-item-developer-mode",experiment:"developerModeToggle",isCheckbox:!0,willClickClosePanel:!t.developerModeFirstTime,checkboxValue:t.isDeveloperModeEnabled,leftTitle:"TOPBAR_VIEW_DEVELOPER_MODE_TITLE",rightTitle:"TOPBAR_VIEW_DEVELOPER_MODE_TITLE",description:"TOPBAR_VIEW_DEVELOPER_MODE_BODY",symbolName:"menuBarDeveloperMode_v2",onClick:function(){t.developerModeFirstTime||t.closeDropPanel(!0),t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"dev_mode",status:t.isDeveloperModeEnabled?0:1}),t.toggleDeveloperMode()}},{key:"PROPERTIES_TOOLBAR",automationId:"list-item-properties-toolbar",experiment:"developerModeToggle",isCheckbox:!0,checkboxValue:t.isDeveloperToolBarEnabled,isNested:!0,leftTitle:"TOPBAR_VIEW_DEVELOPER_MODE_PROPERTIES_PANEL_TITLE",rightTitle:"TOPBAR_VIEW_DEVELOPER_MODE_PROPERTIES_PANEL_TITLE",description:"TOPBAR_VIEW_DEVELOPER_MODE_PROPERTIES_PANEL_BODY",symbolName:"menuBarDeveloperModeProperties_v2",condition:function(){return t.isDeveloperModeEnabled},onClick:function(){t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"properties_panel",status:t.isDeveloperToolBarEnabled?0:1}),t.toggleDeveloperToolBar()}},{key:"HIDDEN_ELEMENTS",automationId:"list-item-hidden-elements",experiment:"developerModeToggle",isCheckbox:!0,checkboxValue:t.isDeveloperHiddenComponentsEnabled,isNested:!0,leftTitle:"TOPBAR_VIEW_DEVELOPER_MODE_HIDDEN_ELEMENTS_TITLE",rightTitle:"TOPBAR_VIEW_DEVELOPER_MODE_HIDDEN_ELEMENTS_TITLE",description:"TOPBAR_VIEW_DEVELOPER_MODE_HIDDEN_ELEMENTS_BODY",symbolName:"menuBarDeveloperModeHiddenElements_v2",condition:function(){return t.isDeveloperModeEnabled},onClick:function(){t.sendBi(e.bi.events.topbar.top_bar_VIEW_menu_click,{category:"show_hidden_components",status:t.isDeveloperHiddenComponentsEnabled?0:1}),t.toggleDeveloperHiddenComponents()}}]}}),define("topBar/menuBar/menuBarListItems/getHelpMenuItems",["core","util"],function(e,t){"use strict";var o={DESKTOP:"58406e7a-1ad0-4105-8e37-c053b529f9d8",MOBILE:"f8b24a99-cefd-4c55-adda-aa66ec643259",WIXCODE_DESKTOP:"b06a142e-7796-4fa3-9425-17c84894d10a",WIXCODE_MOBILE:"b31c9491-7c23-45c7-b3b2-5cb7aed2455b",KEYBOARD_SHORTCUTS:"5a3238e6-ebe9-4aca-a7a2-1c717598e334",CONNECT_DOMAIN:"a06941d9-7683-4ced-bce3-bd2cc3c7d6e9",SEO:"ab2c2a83-5bc0-435e-ab82-f2c1036580a7"},n={EDITOR:"editor",KEYBOARD_SHORTCUTS:"kb_shortcuts",SEO:"seo",CONNECT_DOMAIN:"connect_domain"};return function(i){return[{key:"HELP_CENTER",automationId:"list-item-help-center",leftTitle:"TOPBAR_HELP_EDITOR_HELP",rightTitle:"TOPBAR_HELP_CENTER_PROMOTION_TITLE",description:"TOPBAR_HELP_CENTER_PROMOTION_TEXT",symbolName:"menubarHelpCenterPromotion",onClick:function(){var t=i.isDeveloperModeEnabled?o.WIXCODE_DESKTOP:o.DESKTOP,a=i.isDeveloperModeEnabled?o.WIXCODE_MOBILE:o.MOBILE,r=i.isMobileEditor?a:t,s={panel_name:n.EDITOR,origin:e.constants.BI.HELP.ORIGIN.TOPBAR,learn_more:!1};i.openHelpCenter(r,null,s),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"help_center"})}},{key:"HELP_KB_SHORTCUTS",automationId:"list-item-kb-shortcuts",leftTitle:"TOPBAR_HELP_KB_SHORTCUTS",rightTitle:"TOPBAR_HELP_QUESTION_PROMOTION_TITLE",description:"TOPBAR_HELP_QUESTION_PROMOTION_TEXT",symbolName:"menubarKeyboardShortcuts",onClick:function(){var t={panel_name:n.KEYBOARD_SHORTCUTS,origin:e.constants.BI.HELP.ORIGIN.TOPBAR,learn_more:!1};i.openHelpCenter(o.KEYBOARD_SHORTCUTS,null,t),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"help_kb_shortcuts"})}},{isSeparator:!0},{key:"HELP_VIDEOS",automationId:"list-item-help-videos",experiment:"se_video_help_top_bar",leftTitle:"TOPBAR_HELP_HOWTO_VIDEOS",rightTitle:"TOPBAR_HELP_HOWTO_VIDEOS_PROMOTION_TITLE",description:"TOPBAR_HELP_HOWTO_VIDEOS_PROMOTION_TEXT",symbolName:"menubarStepByStepVideo",onClick:function(){i.openPanel("panels.focusPanels.howToVideoGalleryPanel"),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"help_videos"})}},{key:"HELP_CONNECT_DOMAIN",automationId:"list-item-help-connect-domain",leftTitle:"TOPBAR_HELP_CONNECT_DOMAIN",rightTitle:"TOPBAR_HELP_CONNECT_PROMOTION_TITLE",description:"TOPBAR_HELP_CONNECT_PROMOTION_TEXT",symbolName:"menubarConnectDomain",onClick:function(){var t={panel_name:n.CONNECT_DOMAIN,origin:e.constants.BI.HELP.ORIGIN.TOPBAR,learn_more:!1};i.openHelpCenter(o.CONNECT_DOMAIN,null,t),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"help_connect_domain"})}},{key:"HELP_SEO",automationId:"list-item-help-seo",leftTitle:"TOPBAR_HELP_SEO",rightTitle:"TOPBAR_HELP_SEO_PROMOTION_TITLE",description:"TOPBAR_HELP_SEO_PROMOTION_TEXT",symbolName:"menubarGettingFoundOnlineSeo",onClick:function(){var t={panel_name:n.SEO,origin:e.constants.BI.HELP.ORIGIN.TOPBAR,learn_more:!1};i.openHelpCenter(o.SEO,null,t),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"help_seo"})}},{isSeparator:!0},{key:"TERMS_OF_USE",automationId:"list-item-terms-of-use",leftTitle:"TOPBAR_HELP_TERMS_OF_USE",rightTitle:"TOPBAR_HELP_TERMS_PROMOTION_TITLE",description:"TOPBAR_HELP_TERMS_PROMOTION_TEXT",symbolName:"menubarTermsOfUse",onClick:function(){var o=t.serviceTopology.basePublicUrl+"about/terms-of-use",n=t.languages.getLocalizedLink(o);window.open(n),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"terms_of_use"})}},{key:"PRIVACY_POLICY",automationId:"list-item-privacy-policy",leftTitle:"TOPBAR_HELP_PRIVACY_POLICY",rightTitle:"TOPBAR_HELP_PRIVACY_PROMOTION_TITLE",description:"TOPBAR_HELP_PRIVACY_PROMOTION_TEXT",symbolName:"menubarPrivacyPolicy",onClick:function(){var o=t.serviceTopology.basePublicUrl+"about/privacy",n=t.languages.getLocalizedLink(o);window.open(n),i.sendBi(e.bi.events.topbar.top_bar_HELP_menu_click,{category:"privacy_policy"})}}]}}),define("topBar/menuBar/menuBarListItemsGetters",["topBar/menuBar/menuBarListItems/getSiteMenuItems","topBar/menuBar/menuBarListItems/getToolsMenuItems","topBar/menuBar/menuBarListItems/getHelpMenuItems"],function(e,t,o){"use strict";return{getSiteMenuItems:e,getToolsMenuItems:t,getHelpMenuItems:o}}),define("topBar/topBarComponent/mapTopBarPropsToMenuBarItems",["lodash","constants","experiment","topBar/menuBar/menuBarListItemsGetters"],function(e,t,o,n){"use strict";var i=n.getSiteMenuItems,a=n.getToolsMenuItems,r=n.getHelpMenuItems,s=function(t,n){return e(t).thru(n).reject(function(e){return e.experiment&&!o.isOpen(e.experiment)}).reject(function(e){return e.condition&&!e.condition()}).value()},l=function(e){return[{key:t.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.SITE,automationId:"menu-bar-item-site",dropPanelAutomationId:"drop-panel-site",title:"TOPBAR_Site_Label",getCounter:function(){return e.getFeedbackNewCommentsCounter()},getListItems:function(){return s(e,i)}},{key:t.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.TOOLS,automationId:"menu-bar-item-tools",dropPanelAutomationId:"drop-panel-tools",title:"Topbar_Tools_Label",isChecklist:!0,getListItems:function(){return s(e,a)}},{key:t.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.HELP,automationId:"menu-bar-item-help",dropPanelAutomationId:"drop-panel-help",title:"TOPBAR_HELP_TOOLTIP_TITLE",getListItems:function(){return s(e,r)}},{key:t.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.UPGRADE,automationId:"menu-bar-item-upgrade",title:"TOPBAR_Upgrade_Label",className:"menu-bar-upgrade-item",condition:function(){return e.isUserOwner&&!e.isSiteInWixStoreTestDrive}}]};return function(t){return e(t).thru(l).reject(function(e){return e.condition&&!e.condition()}).value()}}),define("topBar/wixLogo/wixLogo",["react","prop-types","higherOrderComponents","core","topBar/topBarComponent/topBarData","symbols"],function(e,t,o,n,i,a){"use strict";var r=i.MODES,s=function(t){return e.createElement("div",{className:"top-bar-left-wix-logo",onClick:function(){t.sendBi(n.bi.events.topbar.top_bar_click,{category:"wix_logo",origin:t.isPreviewMode?r.PREVIEW:r.EDITOR})}},e.createElement(a.symbol,{name:"wixLogo"}))};return s.displayName="WixLogo",s.propTypes={sendBi:t.func.isRequired,isPreviewMode:t.bool.isRequired},o.renderWhenMutated(s)}),define("topBar/pagesNavigation/exitLightbox.rt",["react","lodash","util","baseUI"],function(e,t,o,n){"use strict";return function(t,i){return e.createElement("div",{onClick:t.onClick,"data-aid":"exit-lightbox-mode",className:"top-bar-pages-navigation exit-lightbox-mode"},e.createElement("span",{},o.translate("PopUps_TopBar_Exit")),e.createElement(n.button,{className:"close",icon:"headerCloseButton"}))}}),define("topBar/pagesNavigation/exitLightbox",["prop-types","lodash","topBar/pagesNavigation/exitLightbox.rt"],function(e,t,o){"use strict";var n=function(e){return o(e)};return n.displayName="ExitLightbox",n.propTypes={onClick:e.func},n}),define("topBar/pagesNavigation/pagesNavigation.rt",["react","lodash","symbols","baseUILib","util","uiAnimations","topBar/pagesNavigation/exitLightbox"],function(e,t,o,n,i,a,r){"use strict";return function(){return e.createElement(n.Tooltip,{disabled:this.props.searchMode||this.props.shouldShowExitLightBox,content:"TOPBAR_PAGES_TOOLTIP_TITLE"},e.createElement("div",{className:"top-bar-pages-navigation","data-aid":"top-bar-pages-navigation"},this.props.searchMode?null:e.createElement("div",{className:"pages-navigation-current-page",key:"currentPage",onClick:this.onPagesButtonClick},e.createElement("div",{className:"pages-navigation-symbol"},e.createElement(o.symbol,{name:"pages_v2"})),e.createElement("div",{className:"pages-navigation-name-container"},e.createElement("span",{className:"pages-navigation-name"},e.createElement("span",{className:"pages-navigation-name-label"},i.translate("Pages_Menu_Title_Title"),":","Â "),this.props.currentPageTitle)),e.createElement("div",{className:"pages-navigation-caret"},e.createElement(o.symbol,{name:"pagesArrow"}))),this.props.searchMode?e.createElement("div",{className:"pages-navigation-search",key:"searchMode"},e.createElement("div",{className:"pages-navigation-search-symbol"},e.createElement(o.symbol,{name:"pagesSearch"})),e.createElement("div",{className:"pages-navigation-search-input"},e.createElement("input",{ref:"input",type:"text",value:this.getInputValue(),placeholder:i.translate("TOPBAR_FIND_PAGE"),autoFocus:!0,spellCheck:!1,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown}),this.props.topBarPagesFilter?e.createElement(n.Button,{key:"cancel",className:"pages-navigation-search-clear",onClick:function(){this.props.setTopBarPagesFilter("")}.bind(this)},e.createElement(o.symbol,{name:"topBarButtonCancel"})):null)):null,e.createElement(a.contentSlideCSS,{distance:"60px",delay:1e3},this.props.shouldShowExitLightBox?e.createElement(r,{key:"exitLightBox",onClick:this.props.closePopupPage}):null)))}}),define("topBar/pagesNavigation/pagesNavigation",["react","prop-types","reactDOM","lodash","core","higherOrderComponents","topBar/pagesNavigation/pagesNavigation.rt"],function(e,t,o,n,i,a,r){"use strict";var s=8,l=13,p=27,u=function(t){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.foundPage=null,t.pagesList=[],t.findPageByFilter=function(e){return n(t.pagesList).filter(function(t){return n.startsWith(t.label.toLowerCase(),e.toLowerCase())}).sortBy("label").head()},t.getInputValue=function(){return t.foundPage=t.props.topBarPagesFilter&&t.findPageByFilter(t.props.topBarPagesFilter),t.foundPage&&!t.isDelete?t.foundPage.label:t.props.topBarPagesFilter},t.onInputChange=function(e){t.props.setTopBarPagesFilter(e.target.value),t.isDelete&&t.forceUpdate()},t.onInputKeyDown=function(e){t.isDelete=e.keyCode===s,e.keyCode===l&&t.foundPage?(t.props.navigateTo(t.foundPage.pageData.id),t.props.closePagesPanel()):e.keyCode===p&&t.props.closePagesPanel()},t.onPagesButtonClick=function(){t.props.openPagesPanel(),t.props.sendBi(i.bi.events.topbar.top_bar_click,{category:"pages"})},t}return _inherits(a,e.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){n.isEmpty(this.props.topBarPagesFilter)&&!n.isEmpty(e.topBarPagesFilter)&&(this.pagesList=this.props.getPagesList()),e.searchMode!==this.props.searchMode&&this.props.setTopBarPagesFilter("")}},{key:"componentDidUpdate",value:function(){var e=o.findDOMNode(this.refs.input);e&&this.props.topBarPagesFilter!==e.value&&(e.selectionStart=this.props.topBarPagesFilter.length)}},{key:"render",value:function(){return r.call(this)}}]),a}();return u.displayName="PagesNavigation",u.propTypes={searchMode:t.bool,topBarPagesFilter:t.string,currentPageTitle:t.string.isRequired,sendBi:t.func.isRequired,setTopBarPagesFilter:t.func.isRequired,openPagesPanel:t.func.isRequired,getPagesList:t.func.isRequired,navigateTo:t.func.isRequired,closePagesPanel:t.func.isRequired,closePopupPage:t.func.isRequired,shouldShowExitLightBox:t.bool},a.renderWhenMutated(u)}),define("topBar/topBarButton/topBarButton.rt",["react","lodash","symbols"],function(e,t,o){"use strict";return function(){return e.createElement.apply(this,["button",{className:this.getCssClasses(),"data-aid":this.props.automationId,onClick:this.props.disabled?null:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},this.props.fakeLayoutItems?t.map(this.props.fakeLayoutItems,function(t,o){return e.createElement("div",{key:o,style:{width:t.width},className:this.getFakeLayoutItemCssClasses(t)},t.content)}.bind(this)):null,!this.props.customSymbolName&&this.props.symbolName?e.createElement(o.symbol,{className:"btn-symbol "+this.props.symbolClassName,key:"symbol-"+this.props.symbolName,name:this.props.symbolName}):null,this.props.customSymbol?e.createElement("div",{key:"customSymbol"},"\n        ",this.props.customSymbol,"\n    "):null,"\n\n    ",this.props.children,"\n\n    ",this.props.label?e.createElement("span",{key:"label",className:"label"},this.props.label):null])}}),define("topBar/topBarButton/topBarButton",["react","prop-types","topBar/topBarButton/topBarButton.rt","experiment"],function(e,t,o,n){"use strict";var i=function(t){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getCssClasses=function(){return["top-bar-btn",t.props.className,t.props.disabled?"disabled":"",t.props.label?"":"top-bar-symbol-btn",t.props.fakeLayoutItems?"top-bar-fake-layout":""].join(" ")},t.getFakeLayoutItemCssClasses=function(e){return["fake-layout-item","fake-layout-type-"+e.type,e.className?e.className:""].join(" ")},t}return _inherits(n,e.Component),_createClass(n,[{key:"render",value:function(){return o.call(this)}}]),n}();return i.displayName="TopBarButton",i.propTypes={label:t.string,automationId:t.string,className:t.string,symbolName:t.string,customSymbol:t.element,symbolClassName:t.string,disabled:t.bool,onMouseEnter:t.func,onMouseLeave:t.func,fakeLayoutItems:t.arrayOf(t.shape({type:t.oneOf(["text","symbol"]),width:t.number,content:t.string}))},n.isOpen("se_multilingual")&&(i.propTypes.flagIconUrl=t.string),i.defaultProps={disabled:!1,className:"",symbolClassName:""},i}),define("topBar/hideToolsButton/hideToolsButton.rt",["react","lodash","experiment","baseUI","symbols"],function(e,t,o,n,i){"use strict";return function(){return e.createElement(n.tooltip,{value:this.props.isHidden?"Toolbars_show_hover_label":"Toolbars_hide_hover_label",key:"hideAllTools"},e.createElement("div",{onClick:function(){this.props.toggleHideTools()}.bind(this),style:{zIndex:this.props.zIndex},className:t({"hide-tools-button":!0,"tools-hidden":this.props.isHidden,"stand-out":this.props.shouldHideToolsBtnBlink}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.createElement(i.symbol,{className:"hide-tools-symbol",name:"hideToolsArrow"})))}}),define("topBar/hideToolsButton/hideToolsButton",["react","prop-types","lodash","higherOrderComponents","topBar/hideToolsButton/hideToolsButton.rt"],function(e,t,o,n,i){"use strict";var a=function(t){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,e.Component),_createClass(o,[{key:"render",value:function(){return i.call(this)}}]),o}();return a.displyName="HideToolsButton",a.propTypes={isHidden:t.bool.isRequired,toggleHideTools:t.func.isRequired,shouldHideToolsBtnBlink:t.bool.isRequired,zIndex:t.number},n.renderWhenMutated(a)}),define("topBar/notification/notification",["react","prop-types","higherOrderComponents"],function(e,t,o){"use strict";var n=function(t){return e.createElement("div",{className:"top-bar-center-notification"},t.children)};return n.displayName="Notification",n.propTypes={children:t.any},o.renderWhenMutated(n)}),define("topBar/dropPanel/itemsPropTypes",["prop-types"],function(e){"use strict";return e.arrayOf(e.oneOfType([e.shape({leftTitle:e.string.isRequired,rightTitle:e.string.isRequired,description:e.string.isRequired,onClick:e.func.isRequired,symbolName:e.string,image:e.string,automationId:e.string,illustrationClassName:e.string,listItemClassName:e.string,isCheckbox:e.oneOf([!0]),willClickClosePanel:e.bool,experiment:e.string,getCounter:e.func,condition:e.func,isDisabled:e.bool,isNested:e.bool,checkBoxValue:e.bool}),e.shape({isSeparator:e.oneOf([!0]).isRequired})])).isRequired}),define("topBar/dropPanel/dropPanelIllustration.rt",["react","lodash","util","symbols","baseUI"],function(e,t,o,n,i){"use strict";return function(){return function(){var t=o.translate;return e.createElement("div",{className:"info-drop-panel-illustration "+this.props.className+(this.props.isDisabled?" disabled-action":""),onClick:function(e){this.props.isDisabled||this.props.onClick()}.bind(this,t)},e.createElement("div",{className:"symbol-container-drop-panel-illustration"},this.props.symbolName?e.createElement(n.symbol,{key:"symbol-"+this.props.symbolName,name:this.props.symbolName,className:"symbol-drop-panel-illustration"}):null,this.props.image?e.createElement("img",{key:"image",className:"img-drop-panel-illustration",src:this.props.image}):null),e.createElement("div",{className:"title-info-drop-panel-illustration"},t(this.props.title)),e.createElement("div",{className:"description-drop-panel-illustration"},this.props.translatedDescription||t(this.props.description)))}.apply(this,[])}}),define("topBar/dropPanel/dropPanelIllustration",["react","prop-types","lodash","topBar/dropPanel/dropPanelIllustration.rt"],function(e,t,o,n){"use strict";var i=function(t){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,e.Component),_createClass(o,[{key:"render",value:function(){return n.call(this)}}]),o}();return i.displayName="DropPanelIllustration",i.propTypes={title:t.string.isRequired,description:t.string.isRequired,onClick:t.func.isRequired,translateDescription:t.string,symbolName:t.string,image:t.string,className:t.string,isDisabled:t.bool},i.defaultProps={isDisabled:!1,className:""},i}),define("topBar/util/keyboardContextStack",["lodash","util"],function(e,t){"use strict";var o=[],n=t.keyboardShortcuts,i=function(t){return e.reject(o,function(o){return e(t).castArray().includes(o)})};return{pushAndSetContext:function(e){return o.push(n.getContext()),n.setContext(e),e},pushAndSetCustomContext:function(t){o.push(n.getContext());var i=e.uniqueId("DYNAMIC_CONTEXT_");return n.registerContext(i,t),n.setContext(i),i},popAndRestoreLastContext:function(e,t){e===n.getContext()&&n.setContext(o.pop()),o=i(e),t&&n.unregisterContext(e)},hasContext:function(t){return e.includes(o,t)},removeItemsAndRestoreLastContext:function(e){o=i(e),n.setContext(o.pop())}}}),define("topBar/dropPanel/dropPanelList.rt",["react","lodash","util","baseUILib"],function(e,t,o,n){"use strict";return function(){function i(o,i,a,r,s){return function(o,i,a,r){var s=this.getItemCounter(a);return e.createElement("li",{className:t({"drop-panel-list-item":!a.isSeparator,"drop-panel-list-separator":a.isSeparator,disabled:a.isDisabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:r+"-item-drop-panel-list","data-aid":a.automationId,onClick:function(e,t,o,n,i){this.onClick(o)}.bind(this,o,i,a,r,s),onMouseEnter:function(e,t,o,n,i){this.onItemHover(n)}.bind(this,o,i,a,r,s)},a.isSeparator?null:e.createElement("span",{className:this.getTitleContainerCssClassList(a,r),key:"item"},i?e.createElement(n.Checkbox,{key:a.leftTitle+"-checkbox-drop-panel-list",disabled:a.isDisabled,type:"T02",label:a.leftTitle,labelAfterSymbol:!0,value:a.checkboxValue}):null,i?null:e.createElement("label",{key:"label",className:"list-item-label"},s?e.createElement("span",{className:"drop-panel-list-item-counter",key:"counter"},s):null,"\n                ",o(a.leftTitle),"\n            ")),a.isSeparator?e.createElement("hr",{key:"item",className:"drop-panel-menu-bar-separator"}):null)}.apply(this,[o,i,a,r])}return function(){var n=o.translate,a=this.props.isChecklist;return e.createElement.apply(this,["ul",{className:t({"drop-panel-list":!0,"drop-panel-check-list":this.props.isChecklist}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},t.map(this.props.items,i.bind(this,n,a))])}.apply(this,[])}}),define("topBar/dropPanel/dropPanelList",["react","prop-types","lodash","util","topBar/util/keyboardContextStack","topBar/dropPanel/itemsPropTypes","topBar/dropPanel/dropPanelList.rt"],function(e,t,o,n,i,a,r){"use strict";var s=function(t){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));t.onClick=function(e){!e.isDisabled&&o.isFunction(e.onClick)&&(e.isCheckbox&&!e.willClickClosePanel||i.removeItemsAndRestoreLastContext([t.customKeyboardContext,n.keyboardShortcuts.CONTEXTS.MENU_BAR]),e.isCheckbox||t.props.closePanel(),e.onClick())},t.onItemHover=function(e){t.props.items[e].isSeparator||t.props.onItemHover(e)},t.getTitleContainerCssClassList=function(e,o){return["title-item-container-drop-panel-list",e.listItemClassName?e.listItemClassName:"",e.isDisabled?"disabled":"",o===t.props.selectedIndex?"selected":"",e.isNested?"nested":""].join(" ")};var r=function(e){var n=t.props.items,i=t.props.selectedIndex;o.isNull(i)&&(i=1===e?n.length-1:0);do{i=(n.length+i+e)%n.length}while(n[i].isSeparator);return i};return t.getItemCounter=function(e){return e.getCounter&&e.getCounter()},t.getExtendKeyboardContext=function(){return n.keyboardShortcuts.extendContext(n.keyboardShortcuts.CONTEXTS.MENU_BAR,{up:function(e){t.onItemHover(r(-1)),e.preventDefault()},down:function(e){t.onItemHover(r(1)),e.preventDefault()},enter:function(e){var o=t.props,n=o.selectedIndex,i=o.items[n];i&&t.onClick(i),e.preventDefault()}})},t}return _inherits(a,e.Component),_createClass(a,[{key:"componentDidMount",value:function(){this.customKeyboardContext=i.pushAndSetCustomContext(this.getExtendKeyboardContext())}},{key:"componentWillUnmount",value:function(){i.popAndRestoreLastContext(this.customKeyboardContext,!0)}},{key:"render",value:function(){return r.call(this)}}]),a}();return s.displayName="DropPanelList",s.propTypes={items:a,closePanel:t.func.isRequired,selectedIndex:t.number,onItemHover:t.func},s}),define("topBar/dropPanel/dropPanel.rt",["react","lodash","util","baseUILib","topBar/dropPanel/dropPanelIllustration","topBar/dropPanel/dropPanelList"],function(e,t,o,n,i,a){"use strict";return function(){return e.createElement(n.Bubble,{className:"drop-panel-top-bar",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,arrowAlignment:"top",contentStyle:this.bubbleContentStyle,arrowStyle:this.bubbleArrowStyle,maxWidth:750},function(){var t=this.getSelectedItem();return e.createElement("div",{className:"drop-panel-content","data-aid":this.props.automationId},e.createElement(a,{items:this.props.items,selectedIndex:this.state.selectedIndex,onItemHover:this.onItemHover,isChecklist:this.props.isChecklist,closePanel:this.props.closePanel}),e.createElement(i,{symbolName:t.symbolName,image:t.image,onClick:t.onClick,className:t.illustrationClassName,isDisabled:t.isDisabled,title:t.rightTitle,translatedDescription:t.translatedDescription,description:t.description}))}.apply(this,[]))}}),define("topBar/dropPanel/dropPanel",["react","prop-types","lodash","topBar/dropPanel/itemsPropTypes","topBar/dropPanel/dropPanel.rt"],function(e,t,o,n,i){"use strict";var a={position:"absolute",left:"calc(50% - 8px)",top:"53px"},r={position:"absolute",display:"block",left:"calc(50% - 70px)",paddingLeft:0,top:"60px"},s=function(t){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.state={selectedIndex:null},t.bubbleContentStyle=r,t.bubbleArrowStyle=a,t.getSelectedItem=function(){return t.props.items[t.state.selectedIndex||0]},t.onItemHover=function(e){return t.setState({selectedIndex:e})},t}return _inherits(o,e.Component),_createClass(o,[{key:"render",value:function(){return i.call(this)}}]),o}();return s.displayName="DropPanel",s.propTypes={items:n,automationId:t.string,isChecklist:t.bool,onMouseEnter:t.func,onMouseLeave:t.func,closePanel:t.func.isRequired},s.defaultProps={isChecklist:!1},s}),define("topBar/dropPanel/dropPanelAnchor",["react","prop-types"],function(e,t){"use strict";var o=function(t){return e.createElement("div",{style:{position:"relative",height:"100%"}},t.children)};return o.displayName="DropPanelAnchor",o.propTypes={children:t.any},o}),define("topBar/dropPanel/upgradeDropPanel.rt",["react","lodash","util","baseUILib","symbols","topBar/dropPanel/dropPanelIllustration"],function(e,t,o,n,i,a){"use strict";return function(){return e.createElement(n.Bubble,{className:"upgrade-drop-panel-top-bar",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,arrowAlignment:"top",contentStyle:this.bubbleContentStyle,arrowStyle:this.bubbleArrowStyle,maxWidth:600},function(){var t=o.translate;return e.createElement("div",{className:"drop-panel-content","data-aid":"drop-panel-upgrade"},e.createElement("div",{className:"left-section-container"},e.createElement("div",{className:"text-container"},e.createElement(n.TextLabel,{value:this.getTitle(),shouldTranslate:!1,enableEllipsis:!1,type:"T09"}),e.createElement(n.PromotionalList,{items:this.getListItems,symbol:this.getCheckSymbol})),e.createElement("div",{className:"symbol-container"},this.props.isActivePersonalSaleCampaign?e.createElement(i.symbol,{key:"dynamicPromotionalImage",name:this.getPersonalSaleCampaignSymbol()}):null,this.props.isActivePersonalSaleCampaign?null:e.createElement(i.symbol,{key:"defaultPromotionalImage",name:"menubarUpgradePromotionDark"}))),e.createElement("div",{className:"footer-container"},this.props.isFirstSave?e.createElement("div",{key:"firstSaveFooter",className:"first-save-footer"},e.createElement(n.TextLabel,{className:"comment",value:"TOPBAR_UPGRADE_SAVE_FIRST_TEXT",type:"T07"}),e.createElement(n.Button,{automationId:"upgrade-btn-first-save",className:"btn-md light-purple",onClick:this.onSaveButtonClick},e.createElement("span",{},t("TOPBAR_UPGRADE_BUTTON_SAVE_SITE")))):null,this.props.isFirstSave?null:e.createElement("div",{key:"regularFooter",className:"regular-footer"},e.createElement(n.Button,{automationId:"upgrade-btn-compare-plans",className:"btn-md light-purple",onClick:this.onComparePlansButtonClick},e.createElement("span",{},t("TOPBAR_UPGRADE_FREE_ROW_BUTTON_1"))),e.createElement(n.Button,{automationId:"upgrade-btn-get-yearly-unlimited",className:"btn-md dark-purple",onClick:this.onGetYearlyButtonClick},e.createElement("span",{},this.getOfferButtonText())))))}.apply(this,[]))}}),define("topBar/dropPanel/upgradeDropPanel",["react","prop-types","lodash","util","core","symbols","topBar/dropPanel/upgradeDropPanel.rt"],function(e,t,o,n,i,a,r){"use strict";var s={position:"absolute",right:"calc(50% - 8px)",top:"53px"},l={position:"absolute",display:"block",paddingLeft:"24px",paddingRight:"24px",paddingBottom:"24px",paddingTop:"30px",minWidth:"540px",top:"60px"},p=["TOPBAR_UPGRADE_FREE_US_LINE_1","TOPBAR_UPGRADE_FREE_US_LINE_2","TOPBAR_UPGRADE_FREE_US_LINE_3","TOPBAR_UPGRADE_FREE_US_LINE_4"],u=e.createElement(a.symbol,{name:"check"}),c=function(t){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.state={selectedIndex:null},t.bubbleContentStyle=l,t.bubbleArrowStyle=s,t.getListItems=p,t.getCheckSymbol=u,t.getTitle=function(){return e.isActivePersonalSaleCampaign?t.props.getPersonalSaleTranslatedLabel("TOPBAR_UPGRADE_POPUP_PERSONAL_SALE_LABEL_DYNAMIC"):n.translate("TOPBAR_UPGRADE_FREE_US_TITLE")},t.onSaveButtonClick=function(){t.props.save(),t.props.closePanel()},t.onComparePlansButtonClick=function(){t.props.sendBi(i.bi.events.topbar.top_bar_compare_plans_click),t.props.accountUpgrade("edhtml_TOP_BAR_UPGRADE_MENU_COMPARE_PLANS")},t.onGetYearlyButtonClick=function(){var o=e.isActivePersonalSaleCampaign?"edhtml_TOP_BAR_UPGRADE_MENU_PS":"edhtml_TOP_BAR_UPGRADE_MENU_GET_YEARLY_UNLIMITED";t.props.sendBi(i.bi.events.topbar.top_bar_get_yearly_unlimited_click),t.props.accountUpgrade(o)},t.getOfferButtonText=function(){return e.isActivePersonalSaleCampaign?t.props.getPersonalSaleTranslatedLabel("TOPBAR_UPGRADE_POPUP_PERSONAL_SALE_BUTTON_DYNAMIC"):n.translate("TOPBAR_UPGRADE_FREE_ROW_BUTTON_2")},t.getPersonalSaleCampaignSymbol=function(){return t.props.getPersonalSaleCampaignSymbolName("menubarUpgradePanel")},t}return _inherits(o,e.Component),_createClass(o,[{key:"render",value:function(){return r.call(this)}}]),o}();return c.displayName="UpgradeDropPanel",c.propTypes={accountUpgrade:t.func.isRequired,save:t.func.isRequired,sendBi:t.func.isRequired,isFirstSave:t.bool.isRequired,getPersonalSaleTranslatedLabel:t.func.isRequired,getPersonalSaleCampaignSymbolName:t.func.isRequired,isActivePersonalSaleCampaign:t.bool.isRequired,closePanel:t.func.isRequired,onMouseEnter:t.func,onMouseLeave:t.func},c}),define("topBar/dropPanel/mobileDropPanel.rt",["react","lodash","util","baseUILib","topBar/dropPanel/dropPanelIllustration"],function(e,t,o,n,i){"use strict";return function(){return e.createElement(n.Bubble,{className:"drop-panel-top-bar drop-panel-mobile",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,arrowAlignment:"top",contentStyle:this.bubbleContentStyle,arrowStyle:this.bubbleArrowStyle,maxWidth:750},e.createElement("div",{className:"drop-panel-content","data-aid":"drop-panel-switch-mode"},e.createElement("div",{className:"drop-panel-mobile-controls"},e.createElement(n.Composites.RadioButtonsWithIllustration,{},e.createElement(n.RadioButtonsWithIllustration,{value:this.props.isMobileEditor?"mobile":"desktop",options:this.radioOptions,onChange:this.onRadioChange})),e.createElement("div",{className:"drop-panel-mobile-controls-bottom"},e.createElement(n.Divider,{}),e.createElement(n.Composites.ToggleSwitch,{},e.createElement(n.ToggleSwitch,{value:this.props.isMobileOptimized,label:"TOPBAR_MobileDesktop_MobileOptimized",onChange:this.toggleMobileOptimized})))),e.createElement(i,{image:this.getImageSrc(),onClick:t.noop,title:"TOPBAR_MOBILE_PROMOTION_TITLE",description:"TOPBAR_MOBILE_PROMOTION_BODY"})))}}),define("topBar/dropPanel/mobileDropPanel",["react","prop-types","lodash","core","util","symbols","topBar/util/keyboardContextStack","topBar/topBarComponent/topBarData","topBar/dropPanel/mobileDropPanel.rt"],function(e,t,o,n,i,a,r,s,l){"use strict";var p=s.MODES,u={position:"absolute",right:"calc(50% - 8px)",top:"53px"},c={position:"absolute",display:"block",minHeight:"298px",right:"calc(50% - 70px)",paddingLeft:0,top:"60px"},d=[{text:"TOPBAR_MobileDesktop_Desktopview",image:e.createElement(a.symbol,{name:"desktop_v2"}),value:"desktop"},{text:"TOPBAR_MobileDesktop_MobileView",image:e.createElement(a.symbol,{name:"mobile_v2"}),value:"mobile"}],_=function(t){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));t.nextEditorMode=t.props.isMobileEditor?"mobile":"desktop",t.bubbleContentStyle=c,t.bubbleArrowStyle=u,t.radioOptions=d;var a=i.browserUtil.getDevicePixelRatio();return t.getImageSrc=function(){return function(e){return i.media.getMediaUrl("rEditor/topBar/"+e)}(a>=2?"mobileDesktopIllustration@x2.png":"mobileDesktopIllustration.png")},t.toggleMobileOptimized=function(){var e=!t.props.isMobileOptimized,o=t.props.isPreviewMode?p.PREVIEW:p.EDITOR;t.props.sendBi(n.bi.events.topbar.mobile_view_mode_toggle,{origin:o,status:e?1:0}),t.props.setMobileOptimizedSite(e)},t.setEditorMode=function(){t.props.setEditorMode("mobile"===t.nextEditorMode);var e=t.props.isPreviewMode?n.bi.events.topbar.top_bar_preview_page_editor_view_mode_click:n.bi.events.topbar.top_bar_editor_view_mode_click;t.props.sendBi(e,{editor_view_mode:t.nextEditorMode}),t.props.sendBi(n.bi.events.topbar.editor_view_mode_switch,{origin:"site_menu",mode:t.nextEditorMode})},t.onRadioChange=function(e){t.nextEditorMode!==e&&(t.nextEditorMode=e),t.props.closePanel()},t.getKeyboardShortcuts=function(){return{esc:function(){t.props.closePanel()},enter:function(e){e.preventDefault()}}},t}return _inherits(o,e.Component),_createClass(o,[{key:"componentDidMount",value:function(){this.customKeyboardContext=r.pushAndSetCustomContext(this.getKeyboardShortcuts())}},{key:"componentWillUnmount",value:function(){r.popAndRestoreLastContext(this.customKeyboardContext,!0);var e=this.props.isMobileEditor&&"desktop"===this.nextEditorMode,t=!this.props.isMobileEditor&&"mobile"===this.nextEditorMode;(e||t)&&this.setEditorMode()}},{key:"render",value:function(){return l.call(this)}}]),o}();return _.displayName="MobileDropPanel",_.propTypes={onMouseEnter:t.func,onMouseLeave:t.func,closePanel:t.func.isRequired,sendBi:t.func.isRequired,setMobileOptimizedSite:t.func.isRequired,setEditorMode:t.func.isRequired,isMobileEditor:t.bool,isPreviewMode:t.bool,isMobileOptimized:t.bool},_}),define("topBar/dropPanel/textAndLinkDropPanel.rt",["react","lodash","util","baseUILib"],function(e,t,o,n){"use strict";return function(){return e.createElement(n.Bubble,{className:"drop-panel-top-bar text-and-link-drop-panel-top-bar",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,arrowAlignment:"top",contentStyle:this.bubbleContentStyle,arrowStyle:this.bubbleArrowStyle,maxWidth:750},function(){var t=o.translate;return e.createElement("div",{className:"drop-panel-content"},e.createElement(n.TextLabel,{className:"drop-panel-title",value:this.props.dropPanelData.title,type:"T03"}),e.createElement(n.RichText,{className:"drop-panel-body"},e.createElement("span",{},t(this.props.dropPanelData.body)),this.props.dropPanelData.linkText?e.createElement("a",{key:"link",className:"drop-panel-link",onClick:this.props.dropPanelData.linkAction},t(this.props.dropPanelData.linkText)):null))}.apply(this,[]))}}),define("topBar/dropPanel/textAndLinkDropPanel",["react","prop-types","lodash","topBar/dropPanel/textAndLinkDropPanel.rt"],function(e,t,o,n){"use strict";var i={position:"absolute",right:"calc(50% - 8px)",top:"53px"},a={position:"absolute",display:"block",right:"calc(50% - 120px)",top:"60px"},r=function(t){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.bubbleContentStyle=o.assign({},a,o.get(e,"bubbleStyleOverrides.content",{})),t.bubbleArrowStyle=i,t}return _inherits(r,e.Component),_createClass(r,[{key:"render",value:function(){return n.call(this)}}]),r}();return r.displayName="TextAndLinkDropPanel",r.propTypes={dropPanelData:t.shape({body:t.string.isRequired,title:t.string,linkText:t.string,linkAction:t.func}).isRequired,bubbleStyleOverrides:t.shape({content:t.object,arrow:t.object}),onMouseEnter:t.func,onMouseLeave:t.func},r}),define("topBar/dropPanel/languageDropPanel/languageDropPanel.rt",["react","lodash","baseUI","baseUILib"],function(e,t,o,n){"use strict";return function(){return e.createElement(n.Bubble,{className:"drop-panel-top-bar",arrowAlignment:"top",contentStyle:this.bubbleContentStyle,arrowStyle:this.bubbleArrowStyle,onMouseLeave:this.props.onMouseLeave,maxWidth:750},this.isMultilingualSite()?e.createElement("div",{className:"drop-panel-content languages-panel-container",key:"MLTopBarDropDown"},e.createElement("div",{className:"editor-modes-panel-top-part"},e.createElement("div",{},e.createElement(o.radioList,{options:this.getLanguageList(),value:this.getCurrentLanguage(),onChange:this.onChangeLanguage.bind(this),highlightOnHover:!0})))):null)}}),define("topBar/dropPanel/languageDropPanel/languageDropPanel",["react","prop-types","lodash","util","higherOrderComponents","topBar/dropPanel/languageDropPanel/languageDropPanel.rt","coreMultilingual"],function(e,t,o,n,i,a,r){"use strict";var s={position:"absolute",right:"calc(50% - 8px)",top:"53px"},l={position:"absolute",display:"block",top:"60px"},p=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.bubbleContentStyle=l,t.bubbleArrowStyle=s,t}return _inherits(i,e.Component),_createClass(i,[{key:"languageAPI",value:function(){return this.props.editorAPI.documentServices.language}},{key:"getCurrentLanguage",value:function(){return this.languageAPI().current.get()}},{key:"isMultilingualSite",value:function(){return this.languageAPI().multilingual.isEnabled()}},{key:"generateLanguageData",value:function(e){var t=r.utils.translationKey.getFullName(e);return{label:t,key:t,className:"languages-option",value:e}}},{key:"getLanguageList",value:function(){var e=this.languageAPI().original.get(),t=this.languageAPI().get();return o.map(o.concat(e,t),this.generateLanguageData.bind(this))}},{key:"componentDidMount",value:function(){this.registerKeyboardShortcuts(),this.lastKeyboardContext=n.keyboardShortcuts.getContext(),n.keyboardShortcuts.setContext("CURRENT_LANGUAGE_SWITCH")}},{key:"componentWillUnmount",value:function(){n.keyboardShortcuts.setContext(this.lastKeyboardContext)}},{key:"onChangeLanguage",value:function(e){this.props.editorAPI.panelManager.closeAllPanels(),this.languageAPI().current.set(e)}},{key:"registerKeyboardShortcuts",value:function(){var e=this,t={esc:function(){e.props.closeHandle()}};n.keyboardShortcuts.registerContext("CURRENT_LANGUAGE_SWITCH",t)}},{key:"render",value:function(){return a.call(this)}}]),i}();p.displayName="editorLanguagePanel",p.propTypes={editorAPI:t.object,closeHandle:t.func},p.defaultProps={closeHandle:o.noop};var u=o.flow(i.connectEditorAPI(function(e){return{editorAPI:e}}))(p);return u.pure=p,u}),define("topBar/dropPanel/dealerUpgradeDropPanel.rt",["react","lodash","baseUILib","util","topBar/topBarComponent/topBarData"],function(e,t,o,n,i){"use strict";return function(){return function(){var t=this.dealerViewer;return e.createElement(o.Bubble,{onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,arrowAlignment:"top",contentStyle:this.bubbleContentStyle,arrowStyle:this.bubbleArrowStyle},e.createElement(t,{translationsUrl:this.translationsUrl,bannerPosition:this.props.isFirstSave?i.UPGRADE_BANNER_POSITIONS.SITE_NOT_SAVED:i.UPGRADE_BANNER_POSITIONS.SITE_SAVED,metasiteGuid:this.props.metaSiteId,locale:this.props.languageCode}))}.apply(this,[])}}),define("topBar/dropPanel/dealerUpgradeDropPanel",["react","prop-types","lodash","util","wixDealerViewer","topBar/dropPanel/dealerUpgradeDropPanel.rt"],function(e,t,o,n,i,a){"use strict";var r={position:"absolute",right:"calc(50% - 8px)",top:"53px"},s={position:"absolute",display:"block",maxWidth:"522px",padding:"0",top:"60px"},l=function(t){function l(e){_classCallCheck(this,l);var t=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.dealerViewer=i.DealerViewer,t.bubbleContentStyle=s,t.bubbleArrowStyle=r,t.translationsUrl=o.get(n.serviceTopology.scriptsLocationMap,"dealer-cms-translations","")+"/",t}return _inherits(l,e.Component),_createClass(l,[{key:"render",value:function(){return a.call(this)}}]),l}();return l.displayName="DealerUpgradeDropPanel",l.propTypes={onMouseEnter:t.func.isRequired,onMouseLeave:t.func.isRequired,languageCode:t.string.isRequired,isFirstSave:t.bool.isRequired,metaSiteId:t.string},l}),define("topBar/menuBar/item.rt",["react","lodash"],function(e,t){"use strict";return function(){return function(){var t=this.getCounter();return e.createElement("div",{className:this.getItemCssClasses(),"data-aid":this.props.automationId,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},t?e.createElement("div",{key:"counter",className:"top-bar-menu-bar-item-counter"},t):null,"\n    ",this.props.title,"\n")}.apply(this,[])}}),define("topBar/menuBar/item",["react","prop-types","lodash","topBar/menuBar/item.rt"],function(e,t,o,n){"use strict";var i=function(t){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.getCounter=function(){return t.props.getCounter&&t.props.getCounter()},t.getItemCssClasses=function(){return["top-bar-menu-bar-item",t.props.className,t.props.isActive?"active":""].join(" ")},t}return _inherits(o,e.Component),_createClass(o,[{key:"render",value:function(){return n.call(this)}}]),o}();return i.displayName="MenuBarItem",i.propTypes={title:t.string.isRequired,className:t.string,automationId:t.string,getCounter:t.func,isActive:t.bool,onMouseEnter:t.func,onMouseLeave:t.func},i.defaultProps={className:"",isActive:!1},i}),define("topBar/menuBar/menuBar.rt",["react","lodash","topBar/dropPanel/upgradeDropPanel","topBar/dropPanel/dealerUpgradeDropPanel","topBar/dropPanel/dropPanelAnchor","topBar/dropPanel/dropPanel","topBar/menuBar/item","experiment","uiAnimations","util"],function(e,t,o,n,i,a,r,s,l,p){"use strict";return function(){function u(t,u,c){return function(t,u){var c=this.props.openedDropPanel===t.key&&"UPGRADE"===t.key;return e.createElement(i,{key:t.key},e.createElement(r,{title:p.translate(t.title),getCounter:t.getCounter,automationId:t.automationId,isActive:this.getActiveItemIndex()===u,onMouseEnter:function(e,t,o){this.onMouseEnter(e.key)}.bind(this,t,u,c),onMouseLeave:function(e,t,o){this.onMouseLeave()}.bind(this,t,u,c),className:t.className}),e.createElement(l.topBarMenuPanelAnimation,{outAnimationDuration:this.props.delayedFadeOut?.2:0},this.props.openedDropPanel===t.key&&"UPGRADE"!==t.key?e.createElement(a,{key:t.key+"DropPanel",automationId:t.dropPanelAutomationId,onMouseEnter:function(e,t,o){this.props.openDropPanel(e.key)}.bind(this,t,u,c),onMouseLeave:function(e,t,o){this.props.closeDropPanel()}.bind(this,t,u,c),isChecklist:t.isChecklist,closePanel:function(){this.props.closeDropPanel(!0)}.bind(this),items:t.getListItems()}):null,!c||s.isOpen("se_useDealerUpgradeTopBar")&&this.props.isUpgradeDataFetched?null:e.createElement(o,{key:t.key+"DropPanel",save:this.props.save,isFirstSave:this.props.isFirstSave,sendBi:this.props.sendBi,accountUpgrade:this.props.accountUpgrade,getPersonalSaleTranslatedLabel:this.props.getPersonalSaleTranslatedLabel,getPersonalSaleCampaignSymbolName:this.props.getPersonalSaleCampaignSymbolName,isActivePersonalSaleCampaign:this.props.isActivePersonalSaleCampaign,closePanel:function(){this.props.closeDropPanel(!0)}.bind(this),onMouseEnter:function(e,t,o){this.props.openDropPanel(e.key)}.bind(this,t,u,c),onMouseLeave:function(e,t,o){this.props.closeDropPanel()}.bind(this,t,u,c)}),c&&s.isOpen("se_useDealerUpgradeTopBar")&&this.props.isUpgradeDataFetched?e.createElement(n,{key:t.key+"DropPanel",onMouseEnter:function(e,t,o){this.props.openDropPanel(e.key)}.bind(this,t,u,c),onMouseLeave:function(e,t,o){this.props.closeDropPanel()}.bind(this,t,u,c),isFirstSave:this.props.isFirstSave,metaSiteId:this.props.metaSiteId,languageCode:this.props.languageCode}):null))}.apply(this,[t,u])}return e.createElement.apply(this,["div",{className:"top-bar-menu-bar-wrapper","data-aid":"top-bar-menu-bar"},t.map(this.props.menuBarItems,u.bind(this))])}}),define("topBar/menuBar/menuBar",["react","prop-types","lodash","util","topBar/topBarComponent/topBarData","topBar/util/keyboardContextStack","topBar/menuBar/menuBar.rt"],function(e,t,o,n,i,a,r){"use strict";var s=300,l=i.KEYBOARD_ACCESSIBLE_DROP_PANELS,p=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.state={hoveredItem:null};var a=function(e){var n=function(e){var n=t.getActiveItemIndex(),i=l.length,a=-1===n?null:(i+n+e)%i;return o.isNumber(a)?t.props.menuBarItems[a].key:null}(e);n&&t.props.openDropPanel(n)};return t.closePanelImmediately=function(e){return t.props.closeDropPanel(!0,e)},t.getActiveItemIndex=function(){return o.findIndex(t.props.menuBarItems,["key",t.props.openedDropPanel||t.state.hoveredItem])},t.registerKeyboardContext=function(){var e={esc:function(){if(null!==t.props.openedDropPanel){t.props.closeDropPanel(!0)}},left:function(){return a(-1)},right:function(){return a(1)}};n.keyboardShortcuts.registerContext(n.keyboardShortcuts.CONTEXTS.MENU_BAR,e)},t.onMouseEnter=function(e){window.clearTimeout(t.openDropPanelTimer),t.setState({hoveredItem:e}),t.props.openedDropPanel?t.props.openDropPanel(e):t.openDropPanelTimer=window.setTimeout(function(){return t.props.openDropPanel(t.state.hoveredItem)},s)},t.onMouseLeave=function(){t.props.closeDropPanel(),t.setState({hoveredItem:null})},t}return _inherits(i,e.Component),_createClass(i,[{key:"componentDidMount",value:function(){this.registerKeyboardContext()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.openedDropPanel!==e.openedDropPanel){var t=n.keyboardShortcuts.CONTEXTS.MENU_BAR,i=n.keyboardShortcuts.getContext(),r=null!==e.openedDropPanel,s=i===t,p=o.includes(l,e.openedDropPanel),u=a.hasContext(t),c=r&&p;!c||s||u?c||!s&&!u||a.popAndRestoreLastContext(t):a.pushAndSetContext(t)}}},{key:"componentWillUnmount",value:function(){a.popAndRestoreLastContext(n.keyboardShortcuts.CONTEXTS.MENU_BAR),n.keyboardShortcuts.unregisterContext(n.keyboardShortcuts.CONTEXTS.MENU_BAR)}},{key:"render",value:function(){return r.call(this)}}]),i}();return p.displayName="MenuBar",p.propTypes={menuBarItems:t.arrayOf(t.object).isRequired,openDropPanel:t.func.isRequired,closeDropPanel:t.func.isRequired,languageCode:t.string.isRequired,isUpgradeDataFetched:t.bool.isRequired,metaSiteId:t.string,delayedFadeOut:t.bool,openedDropPanel:t.string,isFirstSave:t.bool,sendBi:t.func.isRequired,save:t.func.isRequired,accountUpgrade:t.func.isRequired,isActivePersonalSaleCampaign:t.bool.isRequired,getPersonalSaleTranslatedLabel:t.func.isRequired,getPersonalSaleCampaignSymbolName:t.func.isRequired},p}),define("topBar/topBarComponent/topBar.rt",["react","lodash","topBar/wixLogo/wixLogo","topBar/pagesNavigation/pagesNavigation","topBar/topBarButton/topBarButton","topBar/hideToolsButton/hideToolsButton","topBar/notification/notification","topBar/dropPanel/dropPanel","topBar/dropPanel/dropPanelAnchor","topBar/dropPanel/upgradeDropPanel","topBar/dropPanel/mobileDropPanel","topBar/dropPanel/textAndLinkDropPanel","topBar/dropPanel/languageDropPanel/languageDropPanel","topBar/menuBar/menuBar","uiAnimations","baseUILib","constants","util","experiment","pages"],function(e,t,o,n,i,a,r,s,l,p,u,c,d,_,m,T,P,b,E,g){"use strict";return function(){function s(o,n,a){return e.createElement(l,{key:"button"+n.key},e.createElement(T.Tooltip,{disabled:this.isButtonTooltipDisabled(n),marginBottom:6,content:this.getTopBarButtonTooltipContent(n)},e.createElement(i,{className:n.className,automationId:n.automationId,label:n.label,onClick:n.onClick,fakeLayoutItems:n.fakeLayoutItems,onMouseEnter:function(e,t,o){this.onTopBarButtonMouseEnter(t)}.bind(this,o,n,a),onMouseLeave:n.onMouseLeave,disabled:n.disabled,ref:n.ref,customSymbol:n.customSymbol,symbolName:n.symbolName,symbolClassName:n.symbolClassName})),e.createElement.apply(this,[m.topBarMenuPanelAnimation,{outAnimationDuration:this.state.delayedFadeOut?.2:0},this.props.openedDropPanel===n.key&&n.key===o?e.createElement(u,{key:n.key+"DropPanel",isMobileOptimized:this.props.isMobileOptimized,setMobileOptimizedSite:this.props.setMobileOptimizedSite,isPreviewMode:this.props.isPreviewMode,setEditorMode:this.props.setEditorMode,isMobileEditor:this.props.isMobileEditor,sendBi:this.props.sendBi,onMouseEnter:function(e,t,o){this.openDropPanel(t.key)}.bind(this,o,n,a),onMouseLeave:function(e,t,o){this.closeDropPanel()}.bind(this,o,n,a),closePanel:function(){this.closeDropPanel(!0)}.bind(this)}):null,this.props.openedDropPanel===n.key&&t.includes(this.textAndLinkDropPanelKeys,n.key)?e.createElement(c,{key:n.key+"DropPanel",dropPanelData:n.dropPanelData,bubbleStyleOverrides:n.bubbleStyleOverrides,onMouseEnter:function(e,t,o){this.openDropPanel(t.key)}.bind(this,o,n,a),onMouseLeave:function(e,t,o){this.closeDropPanel()}.bind(this,o,n,a)}):null,t.map(this.getCustomDropPanelItems(),function(t,o,n,i,a){return[this.props.openedDropPanel===i.key&&o.key===i.targetButtonKey?e.createElement(c,{key:i.key,bubbleStyleOverrides:i.bubbleStyleOverrides,dropPanelData:i.dropPanelData}):null]}.bind(this,o,n,a))]))}return e.createElement("div",{className:t({"top-bar-wrapper":!0,"is-hidden":this.props.isHidden,"is-hidden-completely":this.props.areToolsHiddenAndStagePositionMaintained}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.createElement("div",{className:"main-top-bar top-bar-lang-"+this.getResponsivenessClassSuffix(),onContextMenu:this.props.onContextMenu},e.createElement("div",{className:"top-bar-left-section"},e.createElement(o,{sendBi:this.props.sendBi,isPreviewMode:this.props.isPreviewMode}),E.isOpen("se_multilingual")&&this.props.isMultilingualSite?function(){var o=P.ROOT_COMPS.TOPBAR.DROP_PANELS.LANGUAGE_DROP_PANEL,n=this.getLanguageDropDownButtonProps();return e.createElement(l,{key:"languageDropPanelAnchor"},e.createElement(i,t.assign({},{key:"languageDropDownButton",onClick:this.openLanguagesDropdown},n),null!==n.flagIconUrl?e.createElement("img",{key:"flagIcon",className:"top-bar-language-button-icon",src:n.flagIconUrl}):null),this.props.openedDropPanel===o?e.createElement(m.topBarMenuPanelAnimation,{key:"languageDropPanel",outAnimationDuration:this.state.delayedFadeOut?.2:0},e.createElement(d,{onMouseLeave:this.closeDropPanel.bind(this,!0),closeHandle:this.closeDropPanel.bind(this,!0)})):null)}.apply(this,[]):null,!this.props.isPreviewMode&&E.isOpen("newPagesPanel")?e.createElement(g.quickNavigation,{key:"quickNavigation",forceOpenEventCounter:this.props.forceOpenPagesQuickNavigationEventCounter,currentPageId:this.props.currentPageId}):null,this.props.isPreviewMode||E.isOpen("newPagesPanel")?null:e.createElement(n,{key:"pagesNavigation",sendBi:this.props.sendBi,shouldShowExitLightBox:this.shouldShowExitLightBox(),closePopupPage:this.closePopupPage,searchMode:this.isPagesPanelOpen(),openPagesPanel:this.props.openPagesPanel,topBarPagesFilter:this.props.topBarPagesFilter,setTopBarPagesFilter:this.props.setTopBarPagesFilter,getPagesList:this.props.getPagesList,currentPageTitle:this.props.currentPageTitle,navigateTo:this.props.navigateTo,closePagesPanel:this.props.closePagesPanel}),this.props.isPreviewMode?null:e.createElement(_,{key:"menuBarWrapper",menuBarItems:this.getMenuBarItems(),openDropPanel:this.openDropPanel,closeDropPanel:this.closeDropPanel,delayedFadeOut:this.state.delayedFadeOut,openedDropPanel:this.props.openedDropPanel,isFirstSave:this.props.isFirstSave,sendBi:this.props.sendBi,save:this.props.save,accountUpgrade:this.props.accountUpgrade,isUpgradeDataFetched:this.state.isUpgradeDataFetched,languageCode:this.props.languageCode,metaSiteId:this.props.metaSiteId,getPersonalSaleTranslatedLabel:this.getPersonalSaleTranslatedLabel,getPersonalSaleCampaignSymbolName:this.getPersonalSaleCampaignSymbolName,isActivePersonalSaleCampaign:this.props.isActivePersonalSaleCampaign})),e.createElement("div",{className:"top-bar-center-section"},this.props.isPreviewMode?e.createElement(r,{key:"notification"},this.getNotification(),"\n            "):null),function(){var o=P.ROOT_COMPS.TOPBAR.BUTTONS.MOBILE;return e.createElement.apply(this,["div",{className:"top-bar-right-section"},t.map(this.getTopBarButtons(),s.bind(this,o))])}.apply(this,[])),this.props.isPreviewMode||this.props.isMobileEditor?null:e.createElement(a,{isHidden:this.props.isHidden,key:"hideAllTools",toggleHideTools:this.props.toggleHideTools,shouldHideToolsBtnBlink:this.props.shouldHideToolsBtnBlink}))}}),define("topBar/topBarComponent/topBar",["react","prop-types","util","core","lodash","baseUILib","constants","wixDealerViewer","higherOrderComponents","topBar/topBarComponent/topBarMapper","topBar/topBarComponent/mapTopBarPropsToCustomDropPanels","topBar/topBarComponent/mapTopBarPropsToButtons","topBar/topBarComponent/mapTopBarPropsToMenuBarItems","topBar/topBarComponent/topBarData","topBar/topBarComponent/topBar.rt","coreMultilingual","experiment"],function(e,t,o,n,i,a,r,s,l,p,u,c,d,_,m,T,P){"use strict";var b=_.PAGES_PANEL_FRAME,E=_.MODES,g=_.TEXT_AND_LINK_DROP_PANEL_KEYS,O=_.RESPONSIVENESS_CLASS_SUFFIXES,S=function(t){return e.createElement("span",{},[o.translate("mobile_preview_notification_text1"),"Â ",e.createElement("a",{onClick:t.onClick},o.translate("mobile_preview_notification_link")),"Â ",o.translate("mobile_preview_notification_text2")])};S.displayName="MobileNonOptimizedNotification",S.propTypes={onClick:t.func.isRequired};var I=function(e,t,o){return i.map(e,function(n,i){return t===i?e[o]:o===i?e[t]:n})},h=i.partial(T.utils.getIconFileName,i,T.flagCountryIconType.CIRCLE),B=i.flow(T.utils.translationKey.getFlagCountry,o.translate,h),R=function(t){function l(t){_classCallCheck(this,l);var p=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return p.state={delayedFadeOut:!0,isUpgradeDataFetched:!1},p.triedPrefetchingUpgradeData=!1,p.dealerAssetsLoader=P.isOpen("se_useDealerUpgradeTopBar")&&new s.DealerAssetsLoader,p.textAndLinkDropPanelKeys=g,p.openDropPanel=function(e){window.clearTimeout(p.dropPanelTimer),p.props.openedDropPanel!==e&&(p.setState({delayedFadeOut:!1}),p.props.openDropPanel(e))},p.closeDropPanel=function(e){window.clearTimeout(p.dropPanelTimer),e?(p.setState({delayedFadeOut:!1}),p.props.closeDropPanel()):(p.setState({delayedFadeOut:!0}),p.dropPanelTimer=window.setTimeout(p.props.closeDropPanel,500))},p.isPagesPanelOpen=function(){return!!i.find(p.props.openPanels,{frameType:b})},p.getTopBarButtons=function(){var e=p.props.isPreviewMode?E.PREVIEW:E.EDITOR,t=i.defaults({openDropPanel:function(e){return p.openDropPanel(e)},closeDropPanel:p.closeDropPanel},p.props),o=i(t).thru(c).filter(function(t){return i.includes(t.MODES,e)}).value();if(p.props.isSiteInWixStoreTestDrive&&e===E.EDITOR){var n=i.findIndex(o,["key",r.ROOT_COMPS.TOPBAR.BUTTONS.SAVE]),a=i.findIndex(o,["key",r.ROOT_COMPS.TOPBAR.BUTTONS.PREVIEW]);return I(o,n,a)}return o},p.getMenuBarItems=function(){return d(i.assign({closeDropPanel:p.closeDropPanel,getPersonalSaleTranslatedLabel:p.getPersonalSaleTranslatedLabel,getPersonalSaleCampaignSymbolName:p.getPersonalSaleCampaignSymbolName},p.props))},p.getCustomDropPanelItems=function(){return u(p.props)},p.getNotification=function(){return p.props.isMobileEditor&&!p.props.isMobileOptimized?e.createElement(S,{onClick:function(){p.props.togglePreview(),p.props.waitForChangesApplied(function(){p.props.collapseMobileMenu(),p.props.openMobileElementsPanel()})}}):o.translate("Topbar_PREVIEW_TITLE")},p.shouldShowExitLightBox=function(){return p.props.isPopupOpened&&!p.props.isPreviewMode&&!p.isPagesPanelOpen()},p.closePopupPage=function(){p.props.closeAllPanels(),p.props.closePopupPages(),p.props.sendBi(n.bi.events.popups.exit_pop_up_mode_clicked,{})},p.getTopBarButtonTooltipContent=function(t){if(t.tooltipData){var o=e.createElement(a.TextLabel,{value:t.tooltipData.text,enableEllipsis:!1});if(!t.tooltipData.title)return o;var n=e.createElement(a.TextLabel,{type:"T03",value:t.tooltipData.title,enableEllipsis:!1});return e.createElement("div",{className:"top-bar-tooltip-content-wrapper"},n,o)}},p.isCustomDropPanelActiveOnTargetButton=function(e){var t=p.getCustomDropPanelItems(p.props),o=i.find(t,["key",p.props.openedDropPanel]);return o&&o.targetButtonKey===e.key},p.getPersonalSaleTranslatedLabel=function(e){return i.template(o.translate(e))({discount:p.props.personalSaleCampaignDiscountValue})},p.getPersonalSaleCampaignSymbolName=function(e){return 50===p.props.personalSaleCampaignDiscountValue?e+"_"+p.props.personalSaleCampaignDiscountValue:""},p.onTopBarButtonMouseEnter=function(e){var t=p.isCustomDropPanelActiveOnTargetButton(e),o=p.props.openedDropPanel===r.ROOT_COMPS.TOPBAR.BUTTONS.MOBILE;t||(o||p.closeDropPanel(!0),i.isFunction(e.onMouseEnter)&&e.onMouseEnter()),p.lastOpenedDropPanel=null},p.isButtonTooltipDisabled=function(e){var t=p.isCustomDropPanelActiveOnTargetButton(e),o=r.ROOT_COMPS.TOPBAR.BUTTONS.MOBILE;return!e.tooltipData||p.props.openedDropPanel===o||p.lastOpenedDropPanel===o||t},p.getResponsivenessClassSuffix=function(){return O[o.languages.getLanguageCode()]||"large"},P.isOpen("se_multilingual")&&(p.getLanguageDropDownButtonProps=function(){var e=null;if(!i.isNull(p.props.currentLanguageCode)){var t=B(p.props.currentLanguageCode);e=o.url.joinURL(o.serviceTopology.scriptsDomainUrl,"services","santa-resources","resources","viewer","languageSelector","flags",t)}return{className:"top-bar-button-language",automationId:"top-bar-button-language",ref:"languageDropDownButton",flagIconUrl:e}},p.openLanguagesDropdown=function(){p.openDropPanel(r.ROOT_COMPS.TOPBAR.DROP_PANELS.LANGUAGE_DROP_PANEL)}),p}return _inherits(l,e.Component),_createClass(l,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(!this.triedPrefetchingUpgradeData&&P.isOpen("se_useDealerUpgradeTopBar")&&e.metaSiteId){this.triedPrefetchingUpgradeData=!0;var o=e.isFirstSave?_.UPGRADE_BANNER_POSITIONS.SITE_NOT_SAVED:_.UPGRADE_BANNER_POSITIONS.SITE_SAVED;this.dealerAssetsLoader.loadAsset(o,e.metaSiteId).then(function(e){var o=Boolean(i.invoke(e,"assetExist"));t.setState({isUpgradeDataFetched:o}),t.props.sendBi(n.bi.events.dealer.content_presented_by_dealer,{description:o?"":"error",content_presented_by_dealer:o,category:"upgrade"})}).catch(function(e){throw e})}}},{key:"componentDidUpdate",value:function(e){this.lastOpenedDropPanel=e.openedDropPanel}},{key:"render",value:function(){return m.call(this)}}]),l}();R.displayName="TopBar",R.propTypes={openPanel:t.func.isRequired,openPanels:t.arrayOf(t.object).isRequired,openPagesPanel:t.func.isRequired,openHelpCenter:t.func.isRequired,topBarPagesFilter:t.string,setTopBarPagesFilter:t.func.isRequired,getPagesList:t.func.isRequired,currentPageTitle:t.string.isRequired,currentPageId:t.string.isRequired,navigateTo:t.func.isRequired,closePagesPanel:t.func.isRequired,isMobileEditor:t.bool.isRequired,setEditorMode:t.func.isRequired,isPreviewMode:t.bool.isRequired,undo:t.func.isRequired,redo:t.func.isRequired,save:t.func.isRequired,upgrade:t.func.isRequired,saveAndPublish:t.func.isRequired,sendBi:t.func.isRequired,togglePreview:t.func.isRequired,togglePreviewSimple:t.func.isRequired,toggleHideTools:t.func.isRequired,isPopupOpen:t.bool.isRequired,enterZoomMode:t.func.isRequired,isHidden:t.bool.isRequired,shouldHideToolsBtnBlink:t.bool.isRequired,areToolsHiddenAndStagePositionMaintained:t.bool.isRequired,idePaneState:t.string.isRequired,isPublishInProgress:t.bool.isRequired,isSaveInProgress:t.bool.isRequired,isFirstSave:t.bool.isRequired,isSiteFromOnBoarding:t.bool.isRequired,isSitePublished:t.bool.isRequired,siteId:t.string,metaSiteId:t.string,sitePublicUrl:t.string.isRequired,canUserPublish:t.bool.isRequired,savingStatus:t.string,publishingStatus:t.string,isMobileOptimized:t.bool,isSavedInCurrentSession:t.bool,getEditorVersionsInfo:t.func.isRequired,deviceType:t.string,isToolBarEnabled:t.bool.isRequired,isRulersEnabled:t.bool.isRequired,isGuidelinesEnabled:t.bool.isRequired,isDeveloperModeEnabled:t.bool.isRequired,isSnapToEnabled:t.bool.isRequired,isDeveloperToolBarEnabled:t.bool.isRequired,isDeveloperHiddenComponentsEnabled:t.bool.isRequired,toggleToolBar:t.func.isRequired,toggleRulers:t.func.isRequired,toggleGuidelines:t.func.isRequired,toggleSnapTo:t.func.isRequired,toggleDeveloperMode:t.func.isRequired,toggleDeveloperToolBar:t.func.isRequired,toggleDeveloperHiddenComponents:t.func.isRequired,isWixSEOWizExperimentOpen:t.bool,isTemplate:t.bool,isUserOwner:t.bool,openWixSEOWiz:t.func.isRequired,openConnectDomain:t.func.isRequired,manage:t.func.isRequired,openSettings:t.func.isRequired,openRevisions:t.func.isRequired,exitEditor:t.func.isRequired,accountUpgrade:t.func.isRequired,isActivePersonalSaleCampaign:t.bool.isRequired,personalSaleCampaignAssetPath:t.string.isRequired,personalSaleCampaignDiscountValue:t.number,isSiteInWixStoreTestDrive:t.bool,setMobileOptimizedSite:t.func.isRequired,isPopupOpened:t.bool,developerModeFirstTime:t.bool.isRequired,closeAllPanels:t.func.isRequired,closePopupPages:t.func.isRequired,openDropPanel:t.func.isRequired,closeDropPanel:t.func.isRequired,openedDropPanel:t.string,openMobileElementsPanel:t.func.isRequired,waitForChangesApplied:t.func.isRequired,collapseMobileMenu:t.func.isRequired,shouldShowAutoSaveUI:t.bool,languageCode:t.string.isRequired,isModeSwitchAnimationInProgress:t.bool.isRequired,forceOpenPagesQuickNavigationEventCounter:t.number.isRequired,getFeedbackNewCommentsCounter:t.func.isRequired},P.isOpen("se_multilingual")&&(R.propTypes.isMultilingualSite=t.bool.isRequired,R.propTypes.currentLanguageCode=t.string);var f=i.flow(l.renderWhenMutated,l.connectEditorAPI(p),l.noUpdateOnMouseMove)(R);return f.pure=R,f}),define("topBar",["topBar/topBarComponent/topBar"],function(e){"use strict";return{topBar:e}});
//# sourceMappingURL=topBar.min.js.map