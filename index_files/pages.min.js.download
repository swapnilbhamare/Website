function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();define("pages/utils/pageCategories",["lodash","util"],function(e,t){"use strict";var n=t.translate;return{MAIN_MENU:{id:"CUSTOM_MAIN_MENU",title:n("NewPages_Panel_Left_SiteMenu_Label"),flatMenuTitle:n("NewPages_QuickNav_Site_Pages_Label"),helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",mobileHelpId:"1aeed4d9-19a1-44b7-beec-7bc38a9d4d99",group:"menus"},MEMBERS_MENU:{id:"MEMBERS_SUB_MENU",title:n("NewPages_Panel_Left_MembersMenu_Label"),helpId:"ab4d4af2-0a5a-4ad9-93fe-dbf42f22d2ca",mobileHelpId:"8fa70d57-3d09-4f0b-a966-7ef2475e3f1b",group:"menus"},MENUS:{id:"MENUS",group:"menus",helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",biCategory:"custom menu",getBiCategory:function(t){return e.includes(["CUSTOM_MAIN_MENU","MEMBERS_SUB_MENU"],t)?t:"CUSTOM_MENU"},titleAdd:n("NewPages_Panel_AddPage_Button")},TPA_PAGES:{id:"TPA_PAGES",group:"tpa_pages",titleAdd:n("NewPages_Panel_AddPage_Button"),getBiCategory:function(e){return"tpa_"+e}},DYNAMIC_PAGES_INTRO:{id:"DYNAMIC_PAGES_INTRO",helpId:"4d88ab53-0157-47aa-9c19-0d5762fcb82b",title:"NewPages_Panel_Left_DynamicPage_Label",group:"dynamic_pages",biCategory:"dynamic_page_intro"},DYNAMIC_PAGES:{id:"DYNAMIC_PAGES",helpId:"1e76f0cc-531a-45b3-bfe0-8907cf391fca",mobileHelpId:"4eda8656-f16f-4ddd-9c80-4b80eef09686",group:"dynamic_pages",biCategory:"router",titleAdd:"NewPages_Panel_Add_Dyanamic_Page_Button"},ROUTER_PAGES:{id:"ROUTER_PAGES",helpId:"aa6cebfb-a948-4767-bb0e-a60cb8fa9146",mobileHelpId:"4b873e86-b218-4589-b84b-8070c775f3c4",group:"dynamic_pages",biCategory:"router",titleAdd:"NewPages_Panel_Routing_Add_Page_Button"},POPUPS:{id:"POPUPS",title:"POPUPS_SiteStructure_Panel_Popups",helpId:"24659a21-11c8-41e1-9752-5822677154a0",mobileHelpId:"05438eeb-262a-49e0-a59b-dfda242c5609",group:"popups",biCategory:"lightbox",titleAdd:"POPUPS_SiteStructure_Panel_Button_Add"},TRANSITIONS:{id:"TRANSITIONS",title:"NewPages_Panel_Transitions_Title",group:"transitions",biCategory:"transitions"}}}),define("pages/panel/pagesView/editorAPIConnectors/getActions",["lodash","util","core","tpa","platform"],function(e,t,n,a,i){"use strict";var o=["1380b703-ce81-ff05-f115-39571d94dfcd"],s="Pages_Actions_Page_Rename",r=function(e,t,a,i){e.bi.event(n.bi.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:i,category:a})},l=function(e,t,a){e.bi.event(n.bi.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:a,category:t})},p=function(t,n,a,i){return function(o){var s=e.defaults(i,{origin:"pagesPanel",publicUrl:t.documentServices.generalInfo.getPublicUrl(),pageRef:o?t.documentServices.pages.getReference(o):null});t.documentServices.platform.notifyApplication(n,{eventType:a,eventPayload:s}),t.panelManager.closeAllPanels()}},u=function(e,n,a){return{title:t.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(t){e({pageId:t,tabTitle:"page"}),r(n,t,"tabPageInfo",a)},isSettings:!0}};return{dynamicPage:function(t,n,a,o,l,u){if(!u)return null;var c=[];if(t.developerMode.isEnabled()){var d=t.pages.dynamicPages.getDynamicPageActions(n,"pageActions");c=e.map(d,function(e){var n=e.title,i=e.icon,l=e.type,u=e.event,c=p(t,a,u,{routerRef:o});return{title:n,symbolName:l===s?"renameAction":i,onClick:function(e,a){l===s?t.pages.data.update(e,{title:a}):c(e),r(t,e,n,"router")},isRename:l===s}})}var g=t.pages.dynamicPages.getDynamicPageActions(n,"pageSettings",[i.constants.pages.page_settings.pageInfo.type,i.constants.pages.page_settings.seo.type]),m=e.map(g,function(e){return{title:e.title,symbolName:e.icon,onClick:function(a){l({pageId:n,tabTitle:e.tabTitle}),r(t,a,e.title,"router")},isSettings:!0}});return[].concat(_toConsumableArray(m),_toConsumableArray(c))},tpaPage:function(e,n,a){return a?[u(n,e,"tpa_pages"),{title:t.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(t,n){e.pages.data.update(t,{title:n}),e.history.debouncedAdd("Rename Page"),r(e,t,"rename","tpa_pages")},isRename:!0},{title:t.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(t){e.pages.remove(t,function(){return e.history.add("removing a page",{currentPage:t})}),r(e,t,"delete","tpa_pages")}}]:null},tpaSubPage:function(e,t,n){return n?[u(t,e,"tpa_pages")]:null},popup:function(a,i,o,s){return i?[{title:t.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){var t=a.pages.popupPages.getPopupContainer();a.selection.selectComponentByCompRef(t),a.openComponentPanel("settingsPanel",{initiatorName:"quickActions"}),r(a,e,"open_popup_settings_panel","lightbox")},isSettings:!0},{title:t.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){a.pages.data.update(e,{title:t}),a.history.debouncedAdd("Rename Page"),s(),r(a,e,"rename","lightbox")},isRename:!0},{title:t.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(e,t){var i=a.pages.popupPages.duplicate(e),s=n.utils.pageTitleUtils.generateDuplicatedTitle(t),l=a.documentServices.generalInfo.urlFormat.isSlash()?a.pages.data.pageUriSEO.convertPageNameToUrl:n.utils.pageTitleUtils.convertPageNameToUrl;a.pages.data.update(i.id,{title:s,pageUriSEO:l(s)}),a.pages.navigateTo(i.id),a.history.add("popup page was duplicated",{currentPage:e}),o(i.id),r(a,e,"duplicate","lightbox")}},{title:t.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(t,i){a.documentServices.waitForChangesApplied(function(){a.pages.remove(t,e.partial(a.history.add,"removed popup"))}),a.bi.event(n.bi.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:t,page_popup_name:i}),r(a,t,"delete","lightbox")}}]:null},tpaTab:function(n,i,s){if(!e.includes(o,i)||!s)return null;return[{title:t.translate("NewPages_Panel_StorePages_Panel_Manage"),symbolName:"settingsAction",onClick:function(){a.superApps.openDashboardUrl(a.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),l(n,"manage","tpa_pages")}}]},menuTab:function(t,n,a){if(!a||!n)return null;var i=t.pages.dynamicPages.getActionByAppDefId(n,"routerActions"),o=e.get(t.documentServices.platform.getAppDataByAppDefId(n),"applicationId");return e.map(i,function(e){return{title:e.title,symbolName:e.icon,onClick:e.callback||p(t,o,e.event)}})},router:function(t,n,a,i){if(!n||!t.developerMode.isEnabled())return null;var o=t.documentServices.routers.getRouterRef.byPrefix(i),s=t.pages.dynamicPages.getRouterActionByPrefix(i);return e.map(s,function(e){var n=e.title,i=e.icon,s=e.event,r=p(t,a,s,{routerRef:o});return{title:n,symbolName:i,onClick:function(e){r(e),l(t,n,"router")}}})},getOnClickApplicationNotification:p}}),define("pages/panel/pagesView/page/page.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){function o(){var n=this.getActions(),o=this.getSettingsActions();return e.createElement.apply(this,[a.ContextMenu,{className:"context-menu flat page-actions",key:"page-context-menu",automationId:"page-context-menu",onToggle:this.handleContextMenuToggle},t.map(o,function(t,n,o,s){return e.createElement(a.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,t,n,o,s),key:"action-"+o.title,automationId:"action-"+o.title,className:"page-settings-action-pp"},e.createElement(i.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,o)),t.isEmpty(n)||t.isEmpty(o)?null:e.createElement(a.Divider,{key:"divider"}),t.map(n,function(t,n,o,s){return e.createElement(a.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,t,n,o,s),key:"action-"+o.title,automationId:"action-"+o.title},e.createElement(i.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,o))])}return e.createElement("div",{className:"page-pp "+t({selected:this.props.isSelected}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},null===this.state.inputValue?e.createElement("div",{className:"title-container",key:"title-container-page-pp",onClick:function(){this.props.onClick(this.props.id)}.bind(this),onDoubleClick:this.onDoubleClick},e.createElement("div",{className:"left-container"},e.createElement(a.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},this.props.typeSymbol?e.createElement(i.symbol,{name:this.props.typeSymbol,key:"typeSymbol-pp"}):null),e.createElement(a.TooltipOnEllipsis,{marginTop:5,contentClassName:"title"},this.props.title)),e.createElement("div",{className:"right-container"},this.props.permissionSymbol?e.createElement(i.symbol,{name:this.props.permissionSymbol,key:"permissionSymbol-pp"}):null,this.props.actions&&this.props.actions.length>1?o.apply(this,[]):null,this.props.actions&&1===this.props.actions.length?function(){var t=this.props.actions[0];return e.createElement(a.Button,{className:"single-action page-actions",onClick:function(e){this.handleClickAction(e)}.bind(this,t),key:"page-single-action"},e.createElement(i.symbol,{name:t.symbolName}))}.apply(this,[]):null)):null,null!==this.state.inputValue?function(){var t=n.validate.pageNameValidator(this.state.inputValue);return e.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},e.createElement(a.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!t,invalidMessage:n.translate(t),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleBlurInput,autoSelect:!0}),e.createElement(a.Button,{className:"done-button",disabled:t},"\n            ",n.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/pagesView/page/page",["react","prop-types","lodash","core","util","pages/panel/pagesView/page/page.rt"],function(e,t,n,a,i,o){"use strict";var s=function(t){function s(e){_classCallCheck(this,s);var t=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.state={inputValue:e.mountInRenameMode?e.title:null},t.handleClickAction=function(e){e.isRename?t.openRenameMode():e.onClick(t.props.id,t.props.title)},t.handleContextMenuToggle=function(e){e&&t.props.biEvent(a.bi.events.pages.pagesPanel.page_actions_click,{page_id:t.props.id,source:t.props.biCategory})},t.openRenameMode=function(){return t.setState({inputValue:t.props.title})},t.onDoubleClick=function(){n.filter(t.props.actions,"isRename")[0]&&t.props.renameEnabled&&t.openRenameMode()},t.handleChangeInput=function(e){return t.setState({inputValue:e})},t.handleBlurInput=function(){if(!i.validate.pageNameValidator(t.state.inputValue)&&t.props.title!==t.state.inputValue){n.filter(t.props.actions,"isRename")[0].onClick(t.props.id,t.state.inputValue)}t.setState({inputValue:null})},t.getSettingsActions=function(){return n.filter(t.props.actions,"isSettings")},t.getActions=function(){return n.reject(t.props.actions,"isSettings")},t}return _inherits(s,e.Component),_createClass(s,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.inputValue===this.props.title,n=e.title!==this.props.title;t&&n&&this.setState({inputValue:e.title})}},{key:"render",value:function(){return o.call(this)}}]),s}();return s.displayName="Page",s.propTypes={id:t.string.isRequired,title:t.string.isRequired,onClick:t.func.isRequired,actions:t.arrayOf(t.shape({title:t.string.isRequired,onClick:t.func.isRequired,symbolName:t.string.isRequired,isRename:t.bool})),isSelected:t.bool,info:t.string,mountInRenameMode:t.bool,renameEnabled:t.bool.isRequired,typeSymbol:t.string,permissionSymbol:t.string,biEvent:t.func.isRequired,biCategory:t.string.isRequired},s}),define("pages/panel/pagesView/pagesView.rt",["react","lodash","util","baseUILib","symbols","pages/panel/pagesView/page/page"],function(e,t,n,a,i,o){"use strict";return function(){return e.createElement("div",{className:"pages-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp,className:"header light"},e.createElement("span",{className:"title-pages-view-pp"},this.props.title)),e.createElement("div",{className:"pages-container-outer"},e.createElement(a.CustomScroll,{},e.createElement.apply(this,["ul",{className:"pages-container-inner"},t.map(this.props.pages,function(t,n){return e.createElement("li",{className:"page-container",key:"li-"+t.id},e.createElement(o,{id:t.id,title:t.title,info:t.info,typeSymbol:t.typeSymbol,permissionSymbol:t.permissionSymbol,mountInRenameMode:this.props.renamedItemId===t.id,actions:t.actions,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renameEnabled:this.props.renameEnabled,isSelected:this.props.selectedPageId===t.id,onClick:this.handleClickItem}))}.bind(this))]))),this.props.onClickAdd?e.createElement("footer",{className:"add-container",key:"add-container"},e.createElement(a.Button,{className:"add-button",onClick:this.props.onClickAdd},e.createElement(i.symbol,{name:"addPagePagesPanel"}),e.createElement("span",{},n.translate(this.props.titleAdd)))):null)}}),define("pages/panel/pagesView/pagesView",["lodash","react","prop-types","pages/panel/pagesView/pagesView.rt"],function(e,t,n,a){"use strict";var i=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleClickItem=function(e){t.props.navigateTo(e)},t}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return a.call(this)}}]),n}();return i.displayName="PagesView",i.propTypes={title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,navigateTo:n.func.isRequired,pages:n.arrayOf(n.shape({id:n.string.isRequired,title:n.string.isRequired,info:n.string,actions:n.arrayOf(n.shape({title:n.string.isRequired,onClick:n.func.isRequired,symbolName:n.string.isRequired,isRename:n.bool})),typeSymbol:n.string,permissionSymbol:n.string})).isRequired,selectedPageId:n.string,titleAdd:n.string,onClickAdd:n.func,onShowSettings:n.func,renamedItemId:n.string,renameEnabled:n.bool.isRequired,biEvent:n.func.isRequired,biCategory:n.string.isRequired},i}),define("pages/panel/pagesView/editorAPIConnectors/popupView",["lodash","util","core","higherOrderComponents","stateManagement","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,o,s,r){"use strict";var l=function(n,a){var i=function(n,a){return e.template(t.translate(n))(a)},o=a.length,s=i("Pages_Menu_Popup_Tooltip_Start_Section",{$PAGE_NAME:e.truncate(e.head(a))}),r=i("Pages_Menu_Popup_Tooltip_End_Section",{$PAGE_NAME:e.truncate(e.last(a))}),l=void 0;if(1===o)l=s;else if(2===o)l=s+" "+r;else{l=e.reduce(e.slice(a,1,-1),function(t,n){return t+" "+i("Pages_Menu_Popup_Tooltip_Middle_Section",{$PAGE_NAME:e.truncate(n)})},s)+" "+r}return l};return a.connectEditorAPI(function(a,r){var p=r.popups,u=r.pagesData,c=r.onItemAdded,d=r.onRename,g=r.onHelp,m=r.isDesktop,f=r.biPanelName;return{pages:function(n,a,i,o,r,p){var u=s.popup(n,o,r,p),c=e.map(a,function(e){return{id:e.id,title:e.title,actions:u,typeSymbol:"popupPageType"}});return o?function(n,a,i){var o=n.pages.popupPages.getOpenBehaviorsForPopups(),s=e.zipObject(e.map(i,"id"),e.map(i,"title")),r=e.groupBy(o,"popupId"),p=n.documentServices.siteSegments.getSiteStructureId();return e.map(a,function(a){var i=r[a.id],o=!!i&&i[0].pageId===p,u=e.map(i,"pageId");if(o)return a.info=t.translate("Pages_Menu_Popup_Tooltip_Set_To_All"),a;var c=e.map(u,e.partial(e.get,s));return c.length>0&&(a.info=l(n,c)),a})}(n,c,i):c}(a,p,u,m,c,d),onClickAdd:function(e,t){return t?function(){e.store.dispatch(i.userPreferences.logic.setSessionUserPreferences("addPanelCategoryIdOnClose","popup")),e.store.dispatch(i.leftBar.logic.openAddPanel()),e.bi.event(n.bi.events.pages.pagesPanel.add_page_selection_click,{category:"popup",source:"lightbox"})}:null}(a,m),navigateTo:function(e,t){return function(a){e.pages.navigateTo(a,function(){e.selection.selectComponentByCompRef(e.pages.popupPages.getPopupContainer(a))}),e.bi.event(n.bi.events.pages.navigate_to_page,{page_id:a,panel_name:t,category:o.POPUPS.biCategory})}}(a,f),renameEnabled:m,onHelp:m?e.partial(g,o.POPUPS.helpId):e.partial(g,o.POPUPS.mobileHelpId),titleAdd:o.POPUPS.titleAdd,biEvent:a.bi.event,biCategory:o.POPUPS.biCategory}})(a.renderWhenMutated(r))}),define("pages/panel/menuView/utils/menuDataGetterUtil",["pages/utils/pageCategories"],function(e){"use strict";return{getMenuTabNameIfApplicable:function(t,n,a,i,o){return"CUSTOM_MAIN_MENU"===n?o?e.MAIN_MENU.flatMenuTitle:e.MAIN_MENU.title:a===t?e.MEMBERS_MENU.title:i},getHelpIdForMenu:function(t,n,a,i){return"CUSTOM_MAIN_MENU"===t?i?e.MAIN_MENU.helpId:e.MAIN_MENU.mobileHelpId:n===a?i?e.MEMBERS_MENU.helpId:e.MEMBERS_MENU.mobileHelpId:e.MENUS.helpId}}}),define("pages/panel/getPages",["lodash","util","core","pages/utils/pageCategories","experiment","pages/panel/menuView/utils/menuDataGetterUtil"],function(e,t,n,a,i,o){"use strict";var s="1380b703-ce81-ff05-f115-39571d94dfcd",r=[s],l=function(t){if(e.get(t,"pageSecurity.requireLogin"))return"membersPagePermission";return e.get(t,"pageSecurity.dialogLanguage")?"passwordPagePermission":null};return{dynamicPages:function(t,n){return e.map(n,function(e){var t=e.id,n=e.label,a=e.pageData;return{id:t,title:n,permissionSymbol:l(a)}})},popups:function(t){return e.map(t.pages.popupPages.getDataListOrdered(),function(e){return{id:e.id,title:e.title,biCategory:a.POPUPS.biCategory}})},tpas:function(o,p){var u=n.utils.tpaTypeUtils,c=e.filter(p,function(e){return e.tpaApplicationId>0}),d=e.groupBy(c,"tpaApplicationId"),g=function(a,i,r){return e(a).reject(function(e){return u.isPageNotVisibleInPagesMenu(o,e)}).filter(function(e){return u.isTPASpecialPage(o,e,!0)}).map(function(e){return{id:e.id,title:e.title,isSubPage:!0,permissionSymbol:l(e),biCategory:i,info:function(e,a,i){var o=n.utils.wixStoreTypeUtils;if(i===s){if(o.isWixStoreProductPage(a))return t.translate("Pages_Store_Product_Info_WhatisText");if(o.isWixStoreCartPage(a))return t.translate("Pages_Store_Cart_Info_WhatisText");if(o.isWixStoreThankYouPage(a))return t.translate("Pages_Store_Thankyou_Info_WhatisText")}}(0,e,r)}}).value()};return e(d).thru(Object.keys).map(function(n){var s=o.documentServices.tpa.app.getData(n),l=s.appDefinitionId,p=s.appDefinitionName,u=s.helpId,c=a.TPA_PAGES.getBiCategory(l);return e.includes(r,l)?{pagesData:g(d[n],c,l),id:l,typeSymbol:"storesPageType",title:t.translate("NewPages_Panel_Left_StorePages_Label"),helpId:"59a4a620-30b2-4c93-a27a-c9290141738c",mobileHelpId:"2d2d9e55-a955-4f45-97c4-76fc2436f297",biCategory:c}:i.isOpen("pagesAllTpas")?{pagesData:g(d[n],c,l),id:l,title:p,helpId:u,biCategory:c}:null}).compact().value()},routers:function(t){return e(t.pages.dynamicPages.getMenuItems()).reject(function(t){var n=t.items;return e.isEmpty(n)}).map(function(n){var a=n.id,i=n.label,o=n.items,s=n.prefix,r=t.documentServices.pages.getReference(o[0].id),l=t.documentServices.routers.getRouterRef.byPage(r),p=t.documentServices.routers.get.byRef(l).appDefinitionId;return p===t.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId?null:{id:a,title:i,pagesData:o,prefix:s,applicationId:e.get(t.documentServices.platform.getAppDataByAppDefId(p),"applicationId")}}).compact().value()},menus:function(t,n,a){var i=t.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,s=["MEMBERS_LOGIN_MENU","MEMBERS_LOGIN_ICONS_MENU"],r=t.documentServices.menu.getAll();return e(r).reject(function(t){var n=t.id;return e.includes(s,n)}).map(function(e){var s=t.documentServices.platform.getAppDataByApplicationId(e.appId).appDefinitionId,r=t.menus.getExtendedMenuItemsTree(e,n);return{id:e.id,appDefId:s,menuItems:r.items,multiPageMenu:r.multiplePagesInMenu,title:o.getMenuTabNameIfApplicable(i,e.id,s,e.name,a)}}).value()}}}),define("pages/panel/pagesView/editorAPIConnectors/dynamicPagesView",["lodash","core","higherOrderComponents","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,o,s){"use strict";return n.connectEditorAPI(function(n,s){var r=s.router,l=r.title,p=r.pagesData,u=r.prefix,c=s.onShowSettings,d=s.isDesktop,g=s.onHelp,m=s.biPanelName,f=n.documentServices.pages.getReference(p[0].id),b=n.documentServices.routers.getRouterRef.byPage(f),_=n.documentServices.routers.get.byRef(b).appDefinitionId,P=e.get(n.documentServices.platform.getAppDataByAppDefId(_),"applicationId");return{title:l,pages:function(t,n,a,s,r,l,p){var u=o.dynamicPages(t,n,a,s,r,l);return e.map(u,function(e){var n=e.id;return{id:n,title:e.title,permissionSymbol:e.permissionSymbol,typeSymbol:"dataBinding"===p?"dynamicPageType":"routerPageType",actions:i.dynamicPage(t,n,a,s,r,l)}})}(n,p,P,b,c,d,_),onHelp:function(t,n,i){return"dataBinding"===n?t?e.partial(i,a.DYNAMIC_PAGES.helpId):e.partial(i,a.DYNAMIC_PAGES.mobileHelpId):t?e.partial(i,a.ROUTER_PAGES.helpId):e.partial(i,a.ROUTER_PAGES.mobileHelpId)}(d,_,g),renameEnabled:d,navigateTo:function(e,n){return function(i){e.pages.navigateTo(i),e.bi.event(t.bi.events.pages.navigate_to_page,{page_id:i,panel_name:n,category:a.ROUTER_PAGES.biCategory})}}(n,m),onClickAdd:function(e,n,a,o,s,r){if(!n||!e.developerMode.isEnabled())return null;var l="dataBinding"===o?"addDynamicPageClicked":"addPageToRouterClicked",p=i.getOnClickApplicationNotification(e,a,l,{prefix:s,routerRef:r});return function(n){e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"dynamic page",source:"router"}),p(n)}}(n,d,P,_,u,b),titleAdd:"dataBinding"===_?a.DYNAMIC_PAGES.titleAdd:a.ROUTER_PAGES.titleAdd,biEvent:n.bi.event,biCategory:a.ROUTER_PAGES.biCategory}})(n.renderWhenMutated(s))}),define("pages/panel/pagesView/editorAPIConnectors/tpaView",["lodash","higherOrderComponents","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView","core","pages/utils/pageCategories"],function(e,t,n,a,i,o){"use strict";return t.connectEditorAPI(function(t,a){var s=a.tpa,r=s.pagesData,l=s.title,p=s.helpId,u=s.mobileHelpId,c=s.onClickAdd,d=s.typeSymbol,g=s.biCategory,m=a.onShowSettings,f=a.isDesktop,b=a.onHelp,_=a.biPanelName;return{title:l,pages:function(t,a,i,o,s){var r=n.tpaPage(t,i,o),l=n.tpaSubPage(t,i,o);return e.map(a,function(e){var t=e.id,n=e.title,a=e.isSubPage,i=e.permissionSymbol;return{id:t,title:n,info:e.info,typeSymbol:s,permissionSymbol:i,actions:a?l:r}})}(t,r,m,f,d),onHelp:f?e.partial(b,p):e.partial(b,u),titleAdd:o.TPA_PAGES.titleAdd,onClickAdd:c,renameEnabled:f,navigateTo:function(e,t,n){return function(a){e.pages.navigateTo(a),e.bi.event(i.bi.events.pages.navigate_to_page,{page_id:a,panel_name:t,biCategory:n})}}(t,_,g),biEvent:t.bi.event,biCategory:g}})(t.renderWhenMutated(a))}),define("pages/panel/menuView/utils/mainMenuTreeState",["lodash"],function(e){"use strict";function t(e,t){i[e]=Boolean(t)}function n(e,t){return i.hasOwnProperty(e)?i[e]:t||!1}function a(i){e.forEach(i,function(e){e.isCollapsed=n(e.id),e.items.length>0?a(e.items):e.isCollapsed&&(e.isCollapsed=!1,t(e.id,!1))})}var i={};return{setMenuItemCollapsed:t,reflectStateToMenuTree:a,reflectStateToMenuItem:function(a,i){return a.isCollapsed=n(a.id,i),e.get(a,"items.length",0)<=0&&a.isCollapsed&&(a.isCollapsed=!1,t(a.id,!1)),a}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewUtils",["lodash"],function(e){"use strict";return{getMenuItemsWithInitialCollaptionData:function(t,n){return n&&e.forEach(t,function(e){e.isCollapsed=n[e.id]}),t},getMenuItemsWithsymbolIfApplicable:function(t,n,a){return n!==a?t:e.map(t,function(t){return e.defaults({symbol:"membersAction",items:e.map(t.items,function(t){return e.defaults({symbol:"membersAction"},t)})},t)})}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewActions",["lodash","core","constants","util","platform"],function(e,t,n,a,i){"use strict";function o(n,a,i,o,s){var r=o[e.findIndex(o,{id:i.id})-1],l=r.items.length;!function(t,n,a,i,o){e.forEachRight(a.items,function(e){t.menus.moveMenuItem(n,e.id,i,o,!1)})}(n,a,i,r.id,l),n.menus.moveMenuItem(a,i.id,r.id,l,!1),n.bi.event(t.bi.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"quick actions",source:s}),n.history.add("subpaging a page")}var s=function(e,n,a,i){e.bi.event(t.bi.events.pages.pagesPanel.quick_actions_menu_select,{page_id:n,source:i,category:a})},r=function(e,t,n,a,i){var o={};"boolean"==typeof a?o.hidePage=a:a=!n.isVisible,"boolean"==typeof i?o.mobileHidePage=i:i=!n.isVisibleMobile,n.pageData?e.pages.data.update(n.pageData.id,o):e.documentServices.menu.updateItem(t,n.id,{isVisible:!a,isVisibleMobile:!i}),e.history.add("hiding a page")},l=function(n,i,r,l,p,u){!function(e){var t=0===e.position;return!e.parent&&!t}(l)?function(t){return e.isObject(t.parent)}(l)&&r.push({title:a.translate("Pages_Actions_Page_MoveUp"),symbolName:"unsubpageAction",onClick:function(){!function(e,n,a,i){var o=a.parent.parent&&a.parent.parent.id,s=a.parent.position+1;e.menus.moveMenuItem(n,a.id,o,s,!1),e.bi.event(t.bi.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"quick actions",source:i}),e.history.add("moving a page out of its parent")}(n,i,l,u);var a=e.get(l,"pageData.id");s(n,a,"mainpage",u)}}):r.push({title:a.translate("Pages_Actions_Page_Subpage"),symbolName:"subpageAction",onClick:function(){o(n,i,l,p,u);var t=e.get(l,"pageData.id");s(n,t,"subpage",u)}})};return{getActionsForMenuItem:function(o,p,u,c,d,g,m,f,b,_){return p.appId?c?function(t,n,o,r,p,u,c){var d=function(t,n,a,o,r,l){if(o){var p=t.documentServices.platform.getAppDataByApplicationId(n.appId).appDefinitionId,u=t.pages.dynamicPages.getActionByAppDefId(p,"pageSettings",[i.constants.pages.page_settings.pageInfo.type,i.constants.pages.page_settings.seo.type]);return e.map(u,function(n){return{title:n.title,symbolName:n.icon,onClick:function(){var i=e.get(a,"pageData.id");r({pageId:i,routerId:e.get(a,"link.routerId"),innerRoute:e.get(a,"link.innerRoute"),tabType:n.type}),s(t,i,n.type,l)},isSettings:!0}})}return[]}(t,n,o,r,p,c);return function(t,n,o,r,l,p){var u=e.get(o,"pageData.id"),c=t.documentServices.platform.getAppDataByApplicationId(n.appId).appDefinitionId,d=t.pages.dynamicPages.getActionByAppDefId(c,"pageSettings",[i.constants.pages.page_settings.pageInfo.type])[0];d&&(o.isVisible?l.push({title:a.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){r({tabType:d.type,pageId:u,routerId:e.get(o,"link.routerId"),innerRoute:e.get(o,"link.innerRoute")}),s(t,u,"hide",p)}}):l.push({title:a.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){r({tabType:d.type,pageId:u,routerId:e.get(o,"link.routerId"),innerRoute:e.get(o,"link.innerRoute")}),s(t,u,"hide",p)}}),l.push({title:a.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(){r({tabType:d.type,pageId:u,routerId:e.get(o,"link.routerId"),innerRoute:e.get(o,"link.innerRoute")}),s(t,u,"rename",p)}}))}(t,n,o,p,d,c),l(t,n,d,o,u,c),d}(o,p,u,c,d,f,_):null:c?function(t,i,o,p,u,c,g,m,f,b){var _=[];return function(t,i,o,r,l,p){o.type.isPage&&r&&i.unshift({title:a.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(){l({tabType:n.PAGE_SETTINGS_TABS.PAGE_INFO,pageId:o.pageData.id});var a=e.get(o,"pageData.id");s(t,a,"tabPageInfo",p)},isSettings:!0},{title:a.translate("Pages_Actions_Page_SEO"),symbolName:"seoSettingsAction",onClick:function(){l({tabType:n.PAGE_SETTINGS_TABS.SEO,pageId:o.pageData.id});var a=e.get(o,"pageData.id");s(t,a,"tabSEO",p)},isSettings:!0})}(t,_,o,p,d,b),function(e,t,n,i,o){i.type.isLink&&n.push({title:a.translate("Pages_Actions_Link_Change"),symbolName:"linkAction",onClick:function(){e.menus.updateLink(t,i,i.link),s(e,null,"change link",o)}})}(t,i.id,_,o,b),function(t,n,i,o,r,l){i.push({title:a.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(a){o.pageData?t.menus.renamePage(o.pageData.id,o.pageData.title,a):function(e,t,n,a){a&&n.label!==a&&(e.menu.updateItem(t,n.id,{label:a}),e.history.debouncedAdd("Rename Menu Item"))}(t,n,o,a);var i=e.get(o,"pageData.id");s(t,i,"rename",l),r()},isRename:!0})}(t,i.id,_,o,g,b),function(t,n,i,o,r,l){t.menus.canDuplicate(o)&&i.push({title:a.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(){t.menus.duplicateMenuItem(n,o,r);var a=e.get(o,"pageData.id");s(t,a,"duplicate",l)}})}(t,i.id,_,o,c,b),function(t,n,i,o,r){o.type.isPage&&t.developerMode.isEnabled()&&function(e,t){var n=t.pageData&&t.pageData.id;return!!n&&e.documentServices.routers.pages.isConnectablePage(n)}(t,o)&&i.push({title:a.translate("Platform_Page_Actions_Set_Dynamic_Page"),symbolName:"page_dynamic_icon",onClick:function(){!function(e,t){var n=o.pageData.id,a=e.documentServices.platform.getAppDataByAppDefId(e.documentServices.platform.editorApps.DATA_BINDING.appDefId);e.documentServices.platform.notifyApplication(a.applicationId,{eventType:"addDynamicPageClicked",eventPayload:{pageRef:e.documentServices.pages.getReference(n),origin:"quickActionsMenu"}})}(t);var n=e.get(o,"pageData.id");s(t,n,"Set Page Dynamic",r)}})}(t,i.id,_,o,b),function(t,n,i,o,l){o.isVisible?i.push({title:a.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){r(t,n,o,!0);var a=e.get(o,"pageData.id");s(t,a,"hide",l)}}):i.push({title:a.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){r(t,n,o,!1);var a=e.get(o,"pageData.id");s(t,a,"show",l)}})}(t,i.id,_,o,b),l(t,i,_,o,m,b),function(t,n,i,o,r,l){!l&&o.type.isPage||i.push({title:a.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(){t.menus.removeMenuItem(n,o,l);var a=e.get(o,"pageData.id");s(t,a,"delete",r)}})}(t,i.id,_,o,b,f),_}(o,p,u,c,0,g,m,f,b,_):function(n,i,o,s){return o.isVisibleMobile?[{title:a.translate("MenuItem_Hide_Mobile_Action"),symbolName:"quickActionsHide",onClick:function(){r(n,i,o,void 0,!0);var a=e.get(o,"pageData.id");n.bi.event(t.bi.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:a,source:s,category:"hide"})}}]:[{title:a.translate("MenuItem_Show_Mobile_Action"),symbolName:"quickActionsShow",onClick:function(){r(n,i,o,void 0,!1);var a=e.get(o,"pageData.id");n.bi.event(t.bi.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:a,source:s,category:"show"})}}]}(o,p.id,u,_)}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewMapper",["lodash","core","pages/panel/menuView/editorAPIConnectors/menuViewUtils","pages/panel/menuView/editorAPIConnectors/menuViewActions","pages/panel/menuView/utils/menuDataGetterUtil","pages/utils/pageCategories","stateManagement"],function(e,t,n,a,i,o,s){"use strict";var r=function(e){return s.userPreferences.selectors.getSessionUserPreferences("collapsedMenuItems")(e.store.getState())};return function(l,p){var u=p.onShowSettings,c=p.onItemAdded,d=p.onRename,g=p.isDesktop,m=p.onHelp,f=p.menu,b=p.selectedMenuItemId,_=p.biPanelName,P=l.documentServices.menu.getById(f.id),h=l.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,y=n.getMenuItemsWithInitialCollaptionData(f.menuItems,r(l)),I=n.getMenuItemsWithsymbolIfApplicable(y,f.appDefId,h),v=o.MENUS.getBiCategory(f.id);return{title:f.title,menuItems:I,isDraggable:g,renameEnabled:g,isMobile:!g,initialActions:!g&&f.appDefId?null:[],showAddOptions:g&&f.appDefId!==l.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,biEvent:l.bi.event,biCategory:v,onMoveMenuItem:function(e,t,n,a){return l.menus.moveMenuItem(P,e,t,n,!0,a)},navigateCallback:function(n){if(n.type.isPage)!function(e,n,a,i){e.documentServices.pages.getFocusedPageId()!==n&&(e.pages.navigateTo(n),e.bi.event(t.bi.events.pages.navigate_to_page,{page_id:n,category:a,panel_name:i}))}(l,n.pageData.id,v,_);else if(n.type.isLink&&"AnchorLink"===n.type.raw){var a=n.link,i=a.pageId&&a.pageId.replace("#","");!function(e,n,a,i,o){(e.documentServices.pages.getFocusedPageId()!==n||o)&&(e.pages.navigateToAndScroll(n,o,e.applyPreviewScrollToEditorScroll),e.bi.event(t.bi.events.pages.navigate_to_page,{page_id:n,category:a,panel_name:i}))}(l,i,v,_,a.anchorDataId)}else n.type.isLink&&"DynamicPageLink"===n.type.raw&&function(n,a,i,o,s){var r=e.assign(n.data.createItem("DynamicPageLink"),{innerRoute:i||"",routerId:a});n.pages.navigateTo(r),n.bi.event(t.bi.events.pages.navigate_to_page,{category:o,panel_name:s})}(l,n.link.routerId,n.link.innerRoute,v,_)},titleAdd:o.MENUS.titleAdd,onHelpHeader:e.partial(m,i.getHelpIdForMenu(f.id,f.appDefId,h,g)),onHelp:m,onClickAddPage:function(e,n,a,i,o){return function(){e.menus.addPage(a,i,o),e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"page",source:n})}}(l,v,f.id,b,c),onClickAddLink:function(e,n,a,i,o){return function(){e.menus.addLink(a,i,o),e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"link",source:n})}}(l,v,f.id,b,c),onClickAddFolder:function(e,n,a,i,o){return function(){e.menus.addFolder(a,i,o),e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"dropdown menu",source:n})}}(l,v,f.id,b,c),setInPrefIscollapsedMenuItems:function(e,t){return function(e,t,n){var a=r(e);a||(e.store.dispatch(s.userPreferences.logic.setSessionUserPreferences("collapsedMenuItems",{})),a={}),a[t]=Boolean(n),e.store.dispatch(s.userPreferences.logic.setSessionUserPreferences("collapsedMenuItems",a))}(l,e,t)},getMenuItemActions:function(e){return a.getActionsForMenuItem(l,P,e,g,u,c,d,y,f.multiPageMenu,v)}}}}),define("pages/panel/menuView/addTooltip.rt",["react","lodash","util","baseUILib"],function(e,t,n,a){"use strict";return function(t,i){return e.createElement("div",{className:"add-tooltip-pp",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},e.createElement(a.Composites.RichTextLabeled,{},e.createElement(a.TextLabel,{type:"T06",value:t.title}),e.createElement(a.RichText,{},e.createElement("p",{},n.translate(t.description),"\n            ",e.createElement("a",{onClick:t.onLearnMore},n.translate("NewPages_Panel_Add_Folder_Learnmore"))))))}}),define("pages/panel/menuView/addTooltip",["lodash","prop-types","pages/panel/menuView/addTooltip.rt"],function(e,t,n){"use strict";var a=n;return a.displayName="addTooltip",a.propTypes={title:t.string,description:t.string,onLearnMore:t.func,onMouseEnter:t.func,onMouseLeave:t.func},a}),define("pages/panel/menuView/menuItem/menuItem.rt",["react","lodash","baseUI","symbols","baseUILib","util","core","experiment"],function(e,t,n,a,i,o,s,r){"use strict";return function(){function n(n){var o=this.filterRegularActions(),s=this.filterSettingsActions();return e.createElement(i.ContextMenu,{className:"flat",isOpen:this.state.contextMenuOpened,key:"page-context-menu",onToggle:this.handleContextMenuToggle,automationId:"menu-item-context-menu"},e.createElement.apply(this,[i.ContextMenuContent,{key:"actions-"+this.state.actions.length},t.map(s,function(t,n,o,s,r){return e.createElement(i.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,t,n,o,s,r),key:"action-"+s.title,automationId:"action-"+s.title,className:"menu-item-settings-action-pp"},e.createElement(a.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,o,s)),t.isEmpty(o)||t.isEmpty(s)?null:e.createElement(i.Divider,{key:"actions-divider"}),t.map(o,function(t,n,o,s,r){return e.createElement(i.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,t,n,o,s,r),key:"action-"+s.title,automationId:"action-"+s.title},e.createElement(a.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,o,s))]))}return e.createElement("div",{className:"menu-item-pp "+t(this.getTopLevelClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.props.setSelected,"data-aitemtype":this.getAutomationItemType()},null===this.state.inputValue?e.createElement("div",{className:"title-action-container",key:"pageInfo",onDoubleClick:this.onDoubleClick},e.createElement("div",{className:"left-container"},this.props.isDragAvailable?e.createElement(a.symbol,{name:"dragPage",key:"drag-icon",className:"page-item-drag",dataHintMyData:"hint_my_data"}):null,e.createElement(i.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},e.createElement(a.symbol,{name:this.getTypeSymbolName()})),e.createElement("span",{className:"menu-item-title"},e.createElement(i.TooltipOnEllipsis,{marginTop:5,contentClassName:"menu-item-title-name"},this.props.dataSource.label))),function(){var t=this.getPagePermissionSymbol();return e.createElement("div",{className:"right-container"},t?e.createElement(a.symbol,{name:t,key:"pagePermissionSymbol"}):null,this.isHidden()?e.createElement(a.symbol,{name:"hiddenPageStatus",key:"hiddenPageStatus-symbol"}):null,this.state.actions?n.apply(this,[t]):null)}.apply(this,[])):null,null!==this.state.inputValue?function(){var t=o.validate.pageNameValidator(this.state.inputValue);return e.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},e.createElement(i.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!t,invalidMessage:o.translate(t),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleRenameDone,autoSelect:!0}),e.createElement(i.Button,{className:"done-button",disabled:t},"\n            ",o.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/menuView/menuItem/menuItem",["lodash","react","prop-types","pages/panel/menuView/menuItem/menuItem.rt","core","util"],function(e,t,n,a,i,o){"use strict";var s=function(t){var n;return e.get((n={},_defineProperty(n,"1380b703-ce81-ff05-f115-39571d94dfcd","storesPageType"),_defineProperty(n,"13d21c63-b5ec-5912-8397-c3a5ddb27a97","bookingPageType"),_defineProperty(n,"14724f35-6794-cd1a-0244-25fd138f9242","forumPageType"),_defineProperty(n,"14bcded7-0066-7c35-14d7-466cb3f09103","blogPageType"),_defineProperty(n,"135aad86-9125-6074-7346-29dc6a3c9bcf","hotelsPageType"),_defineProperty(n,"13c1402c-27f2-d4ab-7463-ee7c89e07578","restaurantsPageType"),_defineProperty(n,"13e8d036-5516-6104-b456-c8466db39542","restaurantsPageType"),n),t,"tpaPageType")},r=function(t){return e.get({AnchorLink:"anchorPageType",ExternalLink:"urlPageType",EmailLink:"emailPageType",PhoneLink:"phonePageType",DocumentLink:"documentPageType"},t,"linkPageType")},l=function(n){function l(t){_classCallCheck(this,l);var n=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return n.state={actions:n.props.initialActions,contextMenuOpened:!1,inputValue:function(){if(!(n.props.dataSource.id===n.props.renamedMenuItemId)||!n.props.renameEnabled)return null;var t=n.props.getMenuItemActions(n.props.dataSource);return e.head(e.filter(t,"isRename"))?n.props.dataSource.label:null}()},n.handleClickAction=function(e){e.isRename?n.openRenameMode():e.onClick(n.props.dataSource.id,n.props.dataSource.label)},n.openRenameMode=function(){n.getRenameAction()&&n.props.renameEnabled&&n.setState({inputValue:n.props.dataSource.label})},n.handleChangeInput=function(e){return n.setState({inputValue:e})},n.handleRenameDone=function(){var e=!o.validate.pageNameValidator(n.state.inputValue)?n.state.inputValue:n.props.dataSource.label;n.getRenameAction().onClick(e),n.props.setSelected(),n.setState({inputValue:null,contextMenuOpened:!1})},n.getRenameAction=function(){var t=n.state.actions;return e.isEmpty(t)&&(t=n.props.getMenuItemActions(n.props.dataSource)),e.head(e.filter(t,"isRename"))},n.onDoubleClick=function(){return n.openRenameMode()},n.handleContextMenuToggle=function(t){t?(n.setState({contextMenuOpened:!0,actions:n.getActionsForItem(n.props.dataSource)}),n.props.biEvent(i.bi.events.pages.pagesPanel.page_actions_click,{page_id:e.get(n.props.dataSource,"pageData.id"),source:n.props.biCategory})):n.setState({contextMenuOpened:!1})},n.getActionsForItem=function(e){return n.props.getMenuItemActions(e)},n.isHidden=function(){return n.props.isMobile?!n.props.dataSource.isVisibleMobile:!n.props.dataSource.isVisible},n.getAutomationItemType=function(){var e=n.props.dataSource,t=e.parent?"subpage-":"";return e.isHomePage?t+"home":e.type.isPage?t+"page":e.type.isLink?t+"link":e.type.isDropdown?t+"folder":void 0},n.getTopLevelClasses=function(){return{"hidden-page":n.isHidden(),selected:n.props.isSelected}},n.getPagePermissionSymbol=function(){if(e.get(n.props.dataSource,"pageData.pageSecurity.requireLogin"))return"membersPagePermission";return e.get(n.props.dataSource,"pageData.pageSecurity.dialogLanguage")?"passwordPagePermission":null},n.filterSettingsActions=function(){return e.filter(n.state.actions,"isSettings")},n.filterRegularActions=function(){return e.reject(n.state.actions,"isSettings")},n.getTypeSymbolName=function(){var t=n.props.dataSource;return t.symbol?t.symbol:t.type.isPopupLink?"popupPageType":t.type.isLink?r(e.get(t,"link.type")):t.type.isDropdown?"folderPageType":t.isHomePage?"homePageType":t.isOldBlog?"oldBlogPageType":"members"===e.get(t,"pageData.tpaPageId")?"membersAction":e.get(t,"pageData.tpaApplicationId")>0?s(t.appDefinitionId):"regularPageType"},n}return _inherits(l,t.Component),_createClass(l,[{key:"componentWillReceiveProps",value:function(e){var t=e.dataSource,n=e.renamedMenuItemId,a=null!==this.state.inputValue;t.id!==n||a||this.openRenameMode()}},{key:"render",value:function(){return a.call(this)}}]),l}();return l.displayName="MenuItem",l.propTypes={renamedMenuItemId:n.string,dataSource:n.object.isRequired,isSelected:n.bool,setSelected:n.func.isRequired,isDragAvailable:n.bool.isRequired,isMobile:n.bool.isRequired,info:n.string,getMenuItemActions:n.func.isRequired,renameEnabled:n.bool,biEvent:n.func.isRequired,biCategory:n.string.isRequired,initialActions:n.oneOfType([n.array,n.object])},l}),define("pages/panel/menuView/menuView.rt",["react","lodash","baseUI","baseUILib","pages/panel/menuView/menuItem/menuItem","pages/panel/menuView/addTooltip","symbols"],function(e,t,n,a,i,o,s){"use strict";return function(){return e.createElement("div",{className:"menu-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelpHeader,className:"header light"},e.createElement("span",{className:"title-menu-view-pp"},this.props.title)),e.createElement("div",{className:t({"pages-tree-container":!0,"disable-drag":!this.props.isDraggable}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(n.treeDocker,{className:t({"pages-tree-docker":!0,"pages-tree-shrinked":this.isShrink()}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onNodeMoved:this.handleMovePage,treeClass:"pages-tree",treeNodeClass:"pages-tree-node",treeNodeLabelClass:"menu-item-pp",draggedClass:"rotated",previewClass:"shadow",isDragAvailable:this.props.isDraggable,scrollTopGetter:this.getScrollTop,collapsedClass:"tree-collapsed"},e.createElement(a.CustomScroll,{ref:"customScroll"},e.createElement(n.treeView,{nodeContent:i,structureType:"tree",isDragAvailable:this.props.isDraggable,isMobile:this.props.isMobile,className:"pages-tree",dataSource:this.props.menuItems,collapsedSelector:"isCollapsed",onNodeToggled:this.onMenuItemToggled,isRoot:!0,onChange:this.handleSelectedItem,initialActions:this.props.initialActions,equalityComparer:this.equalityComparer,value:this.state.selectedMenuItemId,getMenuItemActions:this.props.getMenuItemActions,renameEnabled:this.props.renameEnabled,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renamedMenuItemId:this.props.renamedItemId})))),this.props.showAddOptions?e.createElement("footer",{key:"add-container"},e.createElement("div",{className:"add-options-container"},e.createElement(a.Button,{className:"add-menu-page-button",onClick:this.props.onClickAddPage,automationId:"add-menu-page-button"},e.createElement(s.symbol,{name:"addPagePagesPanel"}),e.createElement("span",{className:"add-title"},this.props.titleAdd)),e.createElement("div",{className:"add-menu-link-button-container",onMouseEnter:this.handleMouseEnterAddLink,onMouseLeave:this.handleMouseLeaveAddLinkButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddLinkHovered,content:this.getAddLinkTooltipContent(),key:"tooltip-add-link"},e.createElement(a.Button,{onClick:this.props.onClickAddLink,automationId:"add-menu-link-button"},e.createElement(s.symbol,{name:"addLink"})))),e.createElement("div",{className:"add-menu-folder-button-container",onMouseEnter:this.handleMouseEnterAddFolder,onMouseLeave:this.handleMouseLeaveAddFolderButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddFolderHovered,content:this.getAddFolderTooltipContent(),key:"tooltip-add-folder"},e.createElement(a.Button,{onClick:this.props.onClickAddFolder,automationId:"add-menu-folder-button"},e.createElement(s.symbol,{name:"addFolder"})))))):null)}}),define("pages/panel/menuView/menuView",["react","prop-types","reactDOM","lodash","core","higherOrderComponents","pages/panel/menuView/utils/mainMenuTreeState","pages/panel/menuView/editorAPIConnectors/menuViewMapper","pages/panel/menuView/addTooltip","pages/panel/menuView/menuView.rt"],function(e,t,n,a,i,o,s,r,l,p){"use strict";var u=17,c=700,d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.reduce(t,function(t,n){return t+1+(n.isCollapsed?0:e(n.items))},0)},g=function(t){function a(t){_classCallCheck(this,a);var o=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return o.state={selectedMenuItemId:o.props.selectedMenuItemId,isAddLinkHovered:!1,isAddFolderHovered:!1},o.scrollToSelectedNode=!1,o.componentWillReceiveProps=function(e){o.props.selectedMenuItemId!==e.selectedMenuItemId&&o.setState({selectedMenuItemId:e.selectedMenuItemId}),e.renamedItemId&&o.setState({selectedMenuItemId:e.renamedItemId})},o.componentDidUpdate=function(){o.doScrollToSelectedNode()},o.componentDidMount=function(){o.scrollToSelectedNode=!0,o.doScrollToSelectedNode()},o.isShrink=function(){return d(o.props.menuItems)>u},o.getScrollTop=function(){return o.refs.customScroll.getScrollTop()},o.handleMovePage=function(e){var t={items:o.props.menuItems},n=e.from.findIn(t,"items"),a=n.id;if(a){var r=e.to.parent().findIn(t,"items").id||null,l=e.to.findIn(t,"items"),p=l?l.position:e.to.atRight();r&&s.setMenuItemCollapsed(r,!1),o.props.onMoveMenuItem(a,r,p,function(){r&&(o.scrollToSelectedNode=!0),o.handleSelectedItem(n)}),o.props.biEvent(i.bi.events.topbar.pages.top_bar_PAGES_menu_drag,{source:o.props.biCategory}),r&&1===e.from.length()?o.props.biEvent(i.bi.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"drag",source:o.props.biCategory}):!r&&e.from.length()>1&&o.props.biEvent(i.bi.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"drag",source:o.props.biCategory})}},o.onMenuItemToggled=function(e,t){var n=e.props.dataSource.id;o.props.setInPrefIscollapsedMenuItems(n,t)},o.handleSelectedItem=function(e){(e.type.isDropdown||e.type.isLink&&"DynamicPageLink"!==e.type.raw)&&o.props.onSelectNonPageItem(),o.setState({selectedMenuItemId:e.id}),o.props.navigateCallback(e)},o.equalityComparer=function(e,t){return e.id===t},o.doScrollToSelectedNode=function(){var e=void 0,t=void 0,a=NaN;if(o.scrollToSelectedNode){o.scrollToSelectedNode=!1;var i=n.findDOMNode(o),s=i.querySelector(".pages-tree-container"),r=i.querySelector(".menu-item-pp.selected");r&&(e=s.getBoundingClientRect(),(t=r.getBoundingClientRect()).top<e.top?a=o.getScrollTop()+(t.top-e.top):t.bottom>e.bottom&&(a=o.getScrollTop()+(t.bottom-e.bottom)),isNaN(a)||o.refs.customScroll.updateScrollPosition(Math.max(0,a)))}},o.clearTimeout=function(){return o.props.timeoutHandler.clearTimeout(o.tooltipTimeout)},o.getAddLinkTooltipContent=function(){return e.createElement(l,{title:"NewPages_Panel_Add_Link_Title",description:"NewPages_Panel_Add_Link_Text",onLearnMore:function(){o.props.onHelp("79f9b88c-f080-4acc-8195-d62d34583dc6"),o.clearTimeout(),o.setState({isAddLinkHovered:!1})},onMouseEnter:o.handleMouseEnterAddLink,onMouseLeave:function(){o.clearTimeout(),o.setState({isAddLinkHovered:!1})}})},o.getAddFolderTooltipContent=function(){return e.createElement(l,{title:"NewPages_Panel_Add_Folder_Title",description:"NewPages_Panel_Add_Folder_Text",onLearnMore:function(){o.props.onHelp("c29d5e56-186e-47c6-903a-7ee7908fc078"),o.clearTimeout(),o.setState({isAddFolderHovered:!1})},onMouseEnter:o.handleMouseEnterAddFolder,onMouseLeave:function(){o.clearTimeout(),o.setState({isAddFolderHovered:!1})}})},o.handleMouseEnterAddLink=function(){o.clearTimeout(),o.setState({isAddLinkHovered:!0,isAddFolderHovered:!1})},o.handleMouseLeaveAddLinkButton=function(){o.clearTimeout(),o.tooltipTimeout=o.props.timeoutHandler.setTimeout(function(){o.setState({isAddLinkHovered:!1})},c)},o.handleMouseEnterAddFolder=function(){o.clearTimeout(),o.setState({isAddFolderHovered:!0,isAddLinkHovered:!1})},o.handleMouseLeaveAddFolderButton=function(){o.clearTimeout(),o.tooltipTimeout=o.props.timeoutHandler.setTimeout(function(){o.setState({isAddFolderHovered:!1})},c)},o}return _inherits(a,e.Component),_createClass(a,[{key:"render",value:function(){return p.call(this)}}]),a}();g.displayName="MenuView",g.propTypes={selectedMenuItemId:t.string,setInPrefIscollapsedMenuItems:t.func.isRequired,navigateCallback:t.func.isRequired,isDraggable:t.bool.isRequired,isMobile:t.bool.isRequired,onMoveMenuItem:t.func.isRequired,menuItems:t.arrayOf(t.object).isRequired,title:t.string.isRequired,onClose:t.func.isRequired,onHelp:t.func.isRequired,onHelpHeader:t.func.isRequired,getMenuItemActions:t.func.isRequired,renamedItemId:t.string,initialActions:t.oneOfType([t.array,t.object]),renameEnabled:t.bool.isRequired,showAddOptions:t.bool.isRequired,onClickAddPage:t.func.isRequired,onClickAddLink:t.func.isRequired,onClickAddFolder:t.func.isRequired,titleAdd:t.string.isRequired,onSelectNonPageItem:t.func.isRequired,biEvent:t.func.isRequired,biCategory:t.string.isRequired,timeoutHandler:t.object},g.defaultProps={timeoutHandler:window};var m=o.connectEditorAPI(r)(o.renderWhenMutated(g));return m.pure=g,m}),define("pages/panel/transitionsView/transitionsView.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"transitions-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:function(){this.props.onHelp("000c9232-9321-4738-94c8-885f8633b35b")}.bind(this),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement(a.Composites.Thumbnails,{},e.createElement(a.Thumbnails,{value:this.props.selectedTransition,onChange:this.props.onClickTransition,maxThumbsPerRow:3,options:this.getTransitions()})))}}),define("pages/panel/transitionsView/transitionsView",["lodash","react","prop-types","symbols","pages/panel/transitionsView/transitionsView.rt"],function(e,t,n,a,i){"use strict";var o=function(e){return t.createElement(a.symbol,{name:e})},s=[{value:"none",label:"Pages_Menu_Transitions_None",illustration:o("transition-none")},{value:"swipeHorizontalFullScreen",label:"Pages_Menu_Transitions_SwipeH_Selected",illustration:o("transition-pages-horizontal")},{value:"swipeVerticalFullScreen",label:"Pages_Menu_Transitions_SwipeV_Popup",illustration:o("transition-pages-vertical")},{value:"crossfade",label:"Pages_Menu_Transitions_CrossFade",illustration:o("transition-pages-crossfade")},{value:"outIn",label:"Pages_Menu_Transitions_OutIn",illustration:o("transition-pages-inout")}],r=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getTransitions=function(){return s},t}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return i.call(this)}}]),n}();return r.displayName="TransitionsView",r.propTypes={onClickTransition:n.func.isRequired,title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,selectedTransition:n.string.isRequired},r}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt",["react","lodash","util","baseUILib","pages/utils/pageCategories"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"dynamic-pages-intro-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp.bind(null,i.DYNAMIC_PAGES_INTRO.helpId),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("img",{className:"banner",src:n.media.getMediaUrl("panels/pages/add_dynamic_pages_intro.png")}),e.createElement(a.Composites.RichTextLabeled,{className:"composite-centered"},e.createElement(a.TextLabel,{type:"T16",value:"Platform_Pages_Menu_Add_Dynamic_Page_Member_Title"}),e.createElement(a.RichText,{type:"T06"},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Member_Text"))),e.createElement(a.Composites.ActionSetVertical,{},e.createElement(a.Button,{onClick:this.props.addDynamicPage},e.createElement("span",{},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Add_Button")))))}}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView",["lodash","react","prop-types","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt"],function(e,t,n,a){"use strict";var i=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return a.call(this)}}]),n}();return i.displayName="DynamicPagesIntroView",i.propTypes={title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,addDynamicPage:n.func.isRequired},i}),define("pages/panel/pagesPanelMapper",["lodash","tpa","core","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages"],function(e,t,n,a,i,o){"use strict";var s=function(e,t){var n=e.documentServices.homePage.get(),a=p(t,n);return{selectedPageId:n,selectedMenuItemId:a.id,selectedTabId:a.menuId}},r=function(t,n,a,i,o){var s=e.find(a,function(t){var a=t.pagesData;return e.some(a,{id:n})}),r=e.get(s,"id");if(r)return{selectedPageId:n,selectedTabId:r};if(!(!!i.routerId&&!!i.innerRoute))return null;var p=l(o,i.routerId,i.innerRoute),u=p.id,c=p.routerId,d=p.innerRoute,g=p.menuId;return{selectedPageId:n,selectedMenuItemId:u,selectedRouterId:c,selectedInnerRoute:d,selectedTabId:g}},l=function(t,n,a){var i=null;return e.some(t,function(t){var o=t.id,s=t.menuItems,r=e.flatMap(s,function(e){return[e].concat(_toConsumableArray(e.items))}),l=e.find(r,function(t){return e.get(t,"link.routerId")===n&&e.get(t,"link.innerRoute")===a});return i={id:e.get(l,"id"),menuId:o,routerId:n,innerRoute:a},l})?i:{}},p=function(t,n){var a=null;return e.some(t,function(t){var i=t.id,o=t.menuItems,s=e.flatMap(o,function(e){return[e].concat(_toConsumableArray(e.items))}),r=e.find(s,["pageData.id",n]);return a={id:e.get(r,"id"),menuId:i},r})?a:{}},u=function(t,n){return e.get(e.find(n,function(n){var a=n.pagesData;return e.some(a,{id:t})}),"id")};return function(l,c){var d=l.documentServices.pages.getPagesData(),g=l.documentServices.pages.data.get,m=l.isDesktopEditor(),f=function(t,n){return e.map(o.routers(t),function(e){return e.actions=i.router(t,n,e.applicationId,e.prefix),e})}(l,m),b=function(t,n,a){return e.map(o.tpas(t,n),function(e){return e.actions=i.tpaTab(t,e.id,a),e})}(l,d,m),_=function(t,n,a){return e.map(o.menus(t,n),function(e){return e.actions=i.menuTab(t,e.appDefId,a),e})}(l,d,m),P=function(t,n,i,o){var l=t.pages.popupPages.getCurrentPopup();if(l)return{selectedPageId:l.id,selectedTabId:a.POPUPS.id};var c=t.pages.getCurrentUrlPageId();if(!c)return{};var d=t.documentServices.routers.getCurrentInnerRoute();if(d.isDynamic){var g=r(t,c,o,d,n);if(g)return g}var m=p(n,c),f=m.menuId||u(c,i);return f?{selectedPageId:c,selectedMenuItemId:e.get(m,"id"),selectedTabId:f}:s(t,n)}(l,_,b,f),h=P.selectedPageId,y=P.selectedMenuItemId,I=P.selectedRouterId,v=P.selectedInnerRoute,S=P.selectedTabId;return{selectedPageId:h,selectedMenuItemId:y,selectedRouterId:I,selectedInnerRoute:v,initialTabId:c.menuId||S,onHelp:function(e,t){return function(a){var i={panel_name:t,origin:n.constants.BI.HELP.ORIGIN.PAGES_PANEL,learn_more:!0};e.panelManager.openHelpCenter(a,null,i)}}(l,c.panelName),onClose:function(e,t){return function(){e.panelManager.closePanelByName(t)}}(l,c.panelName),pagesData:d,menus:_,routers:f,tpas:b,isTPASubPage:function(e,t){return function(a){var i=t(a);return n.utils.tpaTypeUtils.isTPASpecialPage(e,i)}}(l,g),popups:o.popups(l),getPageData:g,openStoreManager:function(){t.superApps.openDashboardUrl(t.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),l.bi.event(n.bi.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},isDesktop:m,biEvent:l.bi.event,biPanelName:"pages_panel",addDynamicPage:function(e){return function(){var t=e.documentServices.platform.editorApps.DATA_BINDING.appDefId,a=e.documentServices.platform.getAppDataByAppDefId(t).applicationId;e.documentServices.platform.notifyApplication(a,{eventType:"addDynamicPageClicked",eventPayload:{origin:"pagesPanel"}}),e.bi.event(n.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,{category:"add_dynamic_page",origin:"dynamic_page_intro"})}}(l),isDeveloperModeEnabled:Boolean(l.developerMode.isEnabled()),selectedTransition:function(t){var n=t.pages.transitions.get();return e.get({outIn:"outIn",crossfade:"crossfade",shrinkfade:"crossfade",swipeHorizontal:"swipeHorizontalFullScreen",swipeHorizontalFullScreen:"swipeHorizontalFullScreen",swipeVertical:"swipeVerticalFullScreen",swipeVerticalFullScreen:"swipeVerticalFullScreen",none:"none"},n,"none")}(l),onClickTransition:function(t){return function(a){var i=function(t){return e.trim(t.link.pageId,"#")};t.pages.transitions.set(a),t.bi.event(n.bi.events.pages.pagesPanel.page_transition_selected_click,{category:a});var o=t.documentServices.pages.getPrimaryPageId(),s=e(t.documentServices.mainMenu.getMenu(!0)).flatMap(function(e){return[e].concat(_toConsumableArray(e.items))}).filter(function(n){return"PageLink"===e.get(n,"link.type")&&!t.documentServices.pages.popupPages.isPopup(i(n))}).map(i).value(),r=s.indexOf(o),l=(r+1)%s.length;l!==r&&t.pages.navigateTo(s[l])}}(l),pageSettingsPanelTabCounter:l.getForcePageSettingsTabEventCounter()}}}),define("pages/panel/tabs/panelTabs.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){function n(n,o){return e.createElement("li",{onClick:function(e,t){this.handleClick(e)}.bind(this,n,o),key:"li-"+n.id,"data-aid":"tab-"+n.title,className:"tab"},e.createElement("div",{className:"container-for-background "+t({selected:this.props.selectedTabId===n.id}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(a.TooltipOnEllipsis,{marginTop:9},e.createElement("div",{className:"title"},n.title)),e.createElement(a.Tooltip,{marginTop:6,className:"actions-tooltip",content:"NewPages_Panel_Left_SiteMenu_Actions_Label",closeOnMouseClick:!0},n.actions?e.createElement.apply(this,[a.ContextMenu,{customButton:this.getActionsButton(n.id),key:"tab-context-menu",onToggle:function(e,t,n){this.handleContextMenuToggle(e,n)}.bind(this,n,o)},t.map(n.actions,function(t,n,o,s){return e.createElement(a.ContextMenuAction,{onClick:o.onClick,key:"action-"+o.title},e.createElement(i.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,o))]):null)),n.separatorAfter?e.createElement(a.Divider,{key:"separator-after-"+n.id}):null)}return e.createElement("div",{className:"tabs-pp"},e.createElement.apply(this,["ul",{},t.map(this.getTabs(),n.bind(this))]))}}),define("pages/panel/tabs/panelTabs",["react","prop-types","lodash","util","core","symbols","pages/utils/pageCategories","pages/panel/tabs/panelTabs.rt"],function(e,t,n,a,i,o,s,r){"use strict";var l=function(e){var t=e.id,n=e.title,i=e.group,o=e.biCategory;return{id:t,title:a.translate(n),group:i,biCategory:o}},p=function(e){return n(e).groupBy("group").forEach(function(e){n.last(e).separatorAfter=!0})},u=function(e){return e.group===s.MENUS.group?s.MENUS.getBiCategory(e.id):e.group===s.TPA_PAGES.group?s.TPA_PAGES.getBiCategory(e.id):e.biCategory},c=function(e,t,a){if(e&&t&&n.isEmpty(a))return[l(s.DYNAMIC_PAGES_INTRO)];var i=[];return n.forEach(a,function(e){var t=e.id,n=e.title,a=e.actions;i.push({id:t,title:n,actions:a,group:s.DYNAMIC_PAGES.group,biCategory:s.DYNAMIC_PAGES.biCategory})}),i},d=function(t){function a(t){_classCallCheck(this,a);var r=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return r.getTabs=function(){var e=c(r.props.isDeveloperModeEnabled,r.props.isDesktop,r.props.routers),t=[];return n.forEach(r.props.menus,function(e){var n=e.id,a=e.title,i=e.actions;t.push({id:n,title:a,actions:i,group:s.MENUS.group})}),n.forEach(r.props.tpas,function(e){var n=e.id,a=e.title,i=e.actions;t.push({id:n,title:a,actions:i,group:s.TPA_PAGES.group})}),t=t.concat(e),n.isEmpty(r.props.popups)||t.push(l(s.POPUPS)),p(t),r.props.isDesktop?t.push(l(s.TRANSITIONS)):n.last(t).separatorAfter=!1,t},r.handleContextMenuToggle=function(e,t){t&&r.props.biEvent(i.bi.events.pages.pagesPanel.tab_clicked_on_settings,{category:u(e)})},r.getActionsButton=function(t){return e.createElement("div",{key:"actions-button-"+t},e.createElement(o.symbol,{name:"settingsActionSmall"}))},r.handleClick=function(e){r.props.biEvent(i.bi.events.pages.pagesPanel.category_click,{category:u(e)}),r.props.onClickTab(e.id)},r}return _inherits(a,e.Component),_createClass(a,[{key:"render",value:function(){return r.call(this)}}]),a}();return d.displayName="PanelTabs",d.propTypes={popups:t.arrayOf(t.object).isRequired,routers:t.arrayOf(t.object).isRequired,tpas:t.arrayOf(t.object).isRequired,menus:t.arrayOf(t.object).isRequired,onClickTab:t.func.isRequired,selectedTabId:t.string,biEvent:t.func.isRequired,isDeveloperModeEnabled:t.bool.isRequired,isDesktop:t.bool.isRequired},d}),define("pages/panel/pagesPanel.rt",["react","lodash","pages/panel/tabs/panelTabs","util","panels","pageSettingsPanel"],function(e,t,n,a,i,o){"use strict";return function(){return function(){var t=o.settingsPanels.wrappedMain,a=o.settingsPanels.tpaSubPage;return e.createElement(i.frames.leftPanelFrame,{className:"left-panel-frame-pages-panel-pp",ref:"pagesPanel",panelName:this.props.panelName,panelIndex:this.props.panelIndex,panelClass:"pages-panel-pp"},e.createElement(n,{onClickTab:this.handleClickTab,selectedTabId:this.state.selectedTabId,popups:this.props.popups,isDeveloperModeEnabled:this.props.isDeveloperModeEnabled,routers:this.props.routers,tpas:this.props.tpas,isDesktop:this.props.isDesktop,menus:this.props.menus,biEvent:this.props.biEvent}),"\n    ",this.getView(),"\n        ",this.showRegularSettings()?e.createElement(t,{key:"page-settings-panel-main-pp",menuItem:this.getSettingsItem(),menuId:this.state.settingsData.menuId,activeTabType:this.state.settingsData.tabType,closeSettingsPanel:this.handleCloseSettings,token:"dffdfadsfa",actions:{closeSettingsPanel:this.handleCloseSettings}}):null,!this.showRegularSettings()&&this.showSettingsForTPASubPage()?e.createElement(a,{key:"page-settings-panel-tpa-pp",ref:"settingsPanel",menuItem:this.getSettingsItem(),closeSettingsPanel:this.handleCloseSettings,actions:{openStoreManager:this.props.openStoreManager}}):null)}.apply(this,[])}}),define("pages/panel/pagesPanel",["react","prop-types","lodash","higherOrderComponents","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/popupView","pages/panel/pagesView/editorAPIConnectors/dynamicPagesView","pages/panel/pagesView/editorAPIConnectors/tpaView","pages/panel/menuView/menuView","pages/panel/transitionsView/transitionsView","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView","pages/panel/pagesPanelMapper","pages/panel/pagesPanel.rt"],function(e,t,n,a,i,o,s,r,l,p,u,c,d,g){"use strict";var m=function(t){function a(t){_classCallCheck(this,a);var d=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return d.getInitialSettingsData=function(){return t.initialSettingsTabType?{tabType:t.initialSettingsTabType,pageId:t.selectedPageId}:null},d.state={selectedTabId:d.props.initialTabId,settingsData:d.getInitialSettingsData(),renamedItemId:null},d.getView=function(){var t=void 0,a=d.state.selectedTabId;return a===o.TRANSITIONS.id?t=u:a===o.DYNAMIC_PAGES_INTRO.id?t=c:n.some(d.props.menus,{id:a})?t=p:a===o.POPUPS.id?t=s:n.some(d.props.tpas,{id:a})?t=l:n.some(d.props.routers,{id:a})&&(t=r),e.createElement(t,{pagesData:d.props.pagesData,onClose:d.props.onClose,onHelp:d.props.onHelp,selectedMenuItemId:d.props.selectedMenuItemId,selectedPageId:d.props.selectedPageId,renamedItemId:d.state.renamedItemId,title:i.translate(n.get(o[a],"title")),onShowSettings:d.handleShowSettings,onItemAdded:function(e){return d.setState({renamedItemId:e,settingsData:null})},onRename:function(){return d.setState({renamedItemId:null})},isDesktop:d.props.isDesktop,popups:d.props.popups,menu:n.find(d.props.menus,{id:a}),router:n.find(d.props.routers,{id:a}),tpa:n.find(d.props.tpas,{id:a}),selectedTransition:d.props.selectedTransition,onClickTransition:d.props.onClickTransition,onSelectNonPageItem:d.handleCloseSettings,addDynamicPage:d.props.addDynamicPage,biPanelName:d.props.biPanelName})},d.handleClickTab=function(e){return d.setState({selectedTabId:e,settingsData:null})},d.handleChangeShownSettings=function(e){e?d.setState(function(t){return{settingsData:n.assign(t.settingsData,{tabType:e.tabType,pageId:e.pageId,routerId:e.routerId,innerRoute:e.innerRoute})}}):d.handleCloseSettings()},d.handleCloseSettings=function(){return d.setState({settingsData:null})},d.handleShowSettings=function(e){d.setState(function(t){return{settingsData:n.assign({},t.settingsData,e)}})},d.getSettingsItem=function(){var e=n.get(d.state.settingsData,"pageId")||d.props.selectedPageId,t=n.get(d.state.settingsData,"routerId"),a=n.get(d.state.settingsData,"innerRoute"),i=n.find(d.props.routers,{id:d.state.selectedTabId}),o=e&&d.props.getPageData(e);return{pageData:o,label:n.get(o,"title"),routerId:t,innerRoute:a,type:{isPage:!0,isDynamicPage:!!i,routerType:n.get(i,"routerType")}}},d.updateSelectedTabIdIfDeleted=function(e){var t=d.state.selectedTabId;n.some(d.props.tpas,{id:t})&&!n.some(e.tpas,{id:t})&&d.setState({selectedTabId:e.initialTabId})},d.showSettingsForTPASubPage=function(){return d.state.settingsData&&n.get(d.state.settingsData,"pageId")&&d.props.isTPASubPage(d.state.settingsData.pageId)},d.showRegularSettings=function(){var e=d.state.settingsData&&n.get(d.state.settingsData,"pageId")&&!d.props.isTPASubPage(d.state.settingsData.pageId),t=d.state.settingsData&&n.get(d.state.settingsData,"routerId")&&n.get(d.state.settingsData,"innerRoute");return e||t},d}return _inherits(a,e.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedPageId!==e.selectedPageId,n=this.props.selectedRouterId!==e.selectedRouterId,a=this.props.selectedInnerRoute!==e.selectedInnerRoute,i=this.state.selectedTabId===o.TRANSITIONS.id;this.state.settingsData&&(t||n||a)&&this.handleChangeShownSettings({tabType:null,pageId:e.selectedPageId,routerId:e.selectedRouterId,innerRoute:e.selectedInnerRoute}),e.initialTabId&&!i&&(t||n||a)&&this.setState({selectedTabId:e.initialTabId}),e.pageSettingsPanelTabCounter>this.props.pageSettingsPanelTabCounter&&this.handleShowSettings({tabType:e.initialSettingsTabType,pageId:e.selectedPageId,routerId:e.selectedRouterId,innerRoute:e.selectedInnerRoute}),this.updateSelectedTabIdIfDeleted(e)}},{key:"render",value:function(){return g.call(this)}}]),a}();m.displayName="PagesPanel",m.propTypes={pagesData:t.arrayOf(t.object).isRequired,selectedPageId:t.string,selectedRouterId:t.string,selectedInnerRoute:t.string,selectedMenuItemId:t.string,initialTabId:t.string,menus:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,applicationId:t.string})).isRequired,routers:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,pagesData:t.arrayOf(t.object).isRequired,prefix:t.string.isRequired})).isRequired,tpas:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,pagesData:t.arrayOf(t.object).isRequired})).isRequired,popups:t.arrayOf(t.object).isRequired,panelName:t.string,onClose:t.func.isRequired,onHelp:t.func.isRequired,getPageData:t.func.isRequired,isTPASubPage:t.func.isRequired,openStoreManager:t.func.isRequired,isDesktop:t.bool.isRequired,biEvent:t.func.isRequired,biPanelName:t.string.isRequired,selectedTransition:t.string.isRequired,onClickTransition:t.func.isRequired,isDeveloperModeEnabled:t.bool.isRequired,addDynamicPage:t.func.isRequired,initialSettingsTabType:t.string,pageSettingsPanelTabCounter:t.number},m.defaultProps={panelName:"pagesPanel"};var f=a.connectEditorAPI(d)(m);return f.pure=m,f}),define("pages/quickNavigation/quickNavigationMapper",["lodash","util","core","stateManagement","pages/utils/pageCategories","pages/panel/getPages"],function(e,t,n,a,i,o){"use strict";var s=function(e,n){return n>0&&{title:t.translate(e.title)}},r=function(e,t){return e&&t?e+" "+t:null},l=function t(n,a,o,s){var l=i.MENUS.getBiCategory(o);if(!e.isEmpty(a.items)){var p=e(a.items).flatMap(function(e){return t(n,e,o,!0)}).compact().value();if(!e.isEmpty(p))return[{id:e.get(a.pageData,"id",a.id),title:e.get(a.pageData,"title",a.label),isFolder:a.type.isDropdown,isLink:a.type.isLink,biCategory:l}].concat(_toConsumableArray(p))}if(n.has(e.get(a,"pageData.id")))return null;if(a.type.isPage)return{id:a.pageData.id,title:a.pageData.title,isNested:s,biCategory:l};var u=e.get(a,"link.routerId"),c=e.get(a,"link.innerRoute");return u&&c?{id:r(u,c),title:a.label,isNested:s,biCategory:l,routerId:u,innerRoute:c}:null},p=function(t){return e.startsWith(t,"RECENTLY-")},u=function(t){return p(t)?e.trimStart(t,"RECENTLY-"):t},c=function(e){return(p(e)?"":"RECENTLY-")+e},d=function(e,t){return t<18?[]:a.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(e.store.getState())||[]},g=function(t){return{getItems:function(t){return function(){var n=t.documentServices.pages.getPagesData(),a=o.popups(t),r=function(t){return e.flatMap(o.routers(t),function(t){var n=t.title,a=t.pagesData;return[{title:n}].concat(_toConsumableArray(e.map(a,function(e){return{id:e.id,title:e.label,biCategory:i.DYNAMIC_PAGES.biCategory}})))})}(t),p=function(t,n){return e.flatMap(o.tpas(t,n),function(e){var t=e.title,n=e.pagesData;return[{title:t}].concat(_toConsumableArray(n))})}(t,n),u=function(t){var n=new Set;return e(t).flatMap(function(t){return e.map(t,"id")}).compact().forEach(function(e){return n.add(e)}),n}([a,r,p]),c=o.menus(t,n,!0),g=function(t,n){return e.flatMap(t,function(t){var a=t.id,i=t.title,o=t.menuItems,s=e(o).flatMap(function(e){return l(n,e,a)}).compact().value();if(!e.isEmpty(s))return[{title:i}].concat(_toConsumableArray(s))})}(c,u),m=u.size+g.length-c.length,f=d(t,m);return function(e,t,n){0===t+n&&(e[0]=null)}(g,u.size,f.length),e.compact([s({title:"NewPages_QuickNav_Pages_Recently_Viewed_Label"},f.length)].concat(_toConsumableArray(f),_toConsumableArray(g),_toConsumableArray(r),_toConsumableArray(p),[s(i.POPUPS,a.length)],_toConsumableArray(a)))}}(t),onClickItem:function(t){return function(a){var i=a.id,o=a.routerId,s=a.innerRoute,r=a.biCategory;o&&s?t.pages.navigateTo(e.assign(t.data.createItem("DynamicPageLink"),{routerId:o,innerRoute:s})):t.pages.navigateTo(u(i)),t.bi.event(n.bi.events.pages.navigate_to_page,{page_id:u(i),panel_name:"quick_navigation",category:r})}}(t),selectedItem:function(t){var n=e.invoke(t,"documentServices.routers.getCurrentInnerRoute"),a=e.get(n,"routerId"),i=e.get(n,"innerRoute"),o=e.invoke(t,"documentServices.pages.getFocusedPageId");return o?{id:o,routeId:r(a,i),title:t.pages.getPageTitle(o),isHomePage:t.pages.isHomePage(o),routerId:a,innerRoute:i}:null}(t),onClickManagePages:function(e){return function(){e.panelManager.openPanel("pages.pagesPanel"),e.bi.event(n.bi.events.pages.click_on_pages_panel_open,{origin:"quick_navigation"})}}(t),biEvent:t.bi.event,closeAllPanels:t.panelManager.closeAllPanels,updateRecentlyViewedPages:function(t){return function(n){if(!n)return[];var i=n.id,o=n.title,s=n.isHomePage,r=n.routerId,l=n.innerRoute,p=e.cloneDeep(a.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(t.store.getState()))||[];if(e.isEmpty(p)&&s)return[];var d=e.find(p,{id:c(i)}),g=Date.now();d?(d.time=g,d.title=o):p.push({time:g,id:c(i),routerId:r,innerRoute:l,title:o,biCategory:"recently_viewed"});var m=e(p).sortBy("time").filter(function(e){return t.pages.isPageExist(u(e.id))}).reverse().slice(0,3).value();t.store.dispatch(a.userPreferences.logic.setSiteUserPreferences("recentlyViewedPages",m))}}(t)}};return g.PANEL_NAME="quick_navigation",g}),define("pages/quickNavigation/quickNavigation.rt",["react","lodash","baseUILib","util"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"quick-navigation-pp",onMouseEnter:this.handleMouseEnter,onClick:this.onClick},e.createElement(n.DropDown,{value:this.getSelectedItemId(),onChange:this.handleClickItem,shouldTranslate:!1,searchBox:!0,onToggle:this.handleToggle,forceOpen:this.state.forceOpen,dataLabel:a.translate("NewPages_QuickNav_Label"),optionsContainerClassName:"dropdown-quick-navigation-pp"},this.getContent(),e.createElement(n.DropDownStickyFooter,{closeOnClick:!0},e.createElement(n.Button,{className:"btn-text",onClick:this.props.onClickManagePages},e.createElement("span",{className:"manage-pages-text"},a.translate("NewPages_QuickNav_Pages_Manage_Button"))))),e.createElement(n.Bubble,{className:"bubble-quick-navigation-pp",arrowAlignment:"top",arrowStyle:{position:"relative",left:"104px",top:"-97px"}},e.createElement(n.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_TITLE",type:"T03",className:"bubble-title-quick-navigation-pp",enableEllipsis:!1}),e.createElement(n.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_BODY",enableEllipsis:!1})))}}),define("pages/quickNavigation/quickNavigation",["lodash","react","prop-types","higherOrderComponents","core","baseUILib","pages/quickNavigation/quickNavigationMapper","pages/quickNavigation/quickNavigation.rt"],function(e,t,n,a,i,o,s,r){"use strict";var l=function(n){return[t.createElement(o.SectionDivider,{className:"upper",key:e.uniqueId("section-divider")},e.toUpper(n))]},p=function(n){return t.createElement(o.DropDownOption,{value:n.id,label:n.title,shouldTranslate:!1,disabled:n.isFolder||n.isLink,optionWrapperClassName:function(e){return e.isNested?"nested-page":e.isFolder?"folder":e.isLink?"link":void 0}(n),key:e.uniqueId("quick-navigation-option")})},u=function(n){function a(t){_classCallCheck(this,a);var n=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return n.state={items:t.selectedItem?n.props.getItems():[],forceOpen:!1},n.handleMouseEnter=function(){return n.setState({items:n.props.getItems()})},n.getContent=function(){return e.flatMap(n.state.items,function(e){return e.id?p(e):l(e.title)})},n.getSelectedItemId=function(){return n.props.selectedItem?!n.props.selectedItem.routeId||e.some(n.state.items,["id",n.props.selectedItem.id])?n.props.selectedItem.id:n.props.selectedItem.routeId:null},n.handleClickItem=function(t){return n.props.onClickItem(e.find(n.state.items,{id:t}))},n.onClick=function(){n.props.biEvent(i.bi.events.topbar.top_bar_click,{category:s.PANEL_NAME}),n.props.biEvent(i.bi.events.pages.quick_navigation_clicked,{origin:"top_bar"})},n.handleToggle=function(e){e?n.props.closeAllPanels():n.setState({forceOpen:!1})},n}return _inherits(a,t.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){(function(e,t){var n=!e&&t,a=e&&e.id!==t.id,i=e&&e.id===t.id&&e.title!==t.title;return n||a||i})(this.props.selectedItem,e.selectedItem)&&(this.props.updateRecentlyViewedPages(e.selectedItem),this.setState({items:e.getItems()}));e.forceOpenEventCounter>this.props.forceOpenEventCounter&&this.setState({items:e.getItems(),forceOpen:!0})}},{key:"render",value:function(){return r.call(this)}}]),a}();u.displayName="QuickNavigation",u.propTypes={onClickItem:n.func.isRequired,onClickManagePages:n.func.isRequired,getItems:n.func.isRequired,selectedItem:n.shape({id:n.string.isRequired,title:n.string.isRequired,isHomePage:n.bool.isRequired,routeId:n.string,routerId:n.string,innerRoute:n.string}),updateRecentlyViewedPages:n.func.isRequired,forceOpenEventCounter:n.number,biEvent:n.func,closeAllPanels:n.func,currentPageId:n.string};var c=a.connectEditorAPI(s)(a.renderWhenMutated(u));return c.pure=u,c}),define("pages",["pages/panel/pagesPanel","pages/quickNavigation/quickNavigation"],function(e,t){"use strict";return{pagesPanel:e,quickNavigation:t}});
//# sourceMappingURL=pages.min.js.map