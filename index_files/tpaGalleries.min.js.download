define("tpaGalleries/galleries/tpaGallery",["lodash","core","utils","tpa","color","coreUtils","santaProps"],function(e,i,t,a,r,s,o){"use strict";function n(i,a,s){var o=void 0,n=void 0,l={};return e.forEach(a,function(p,d){o=t.colorParser.getColorValue(i,s[a[d]]),l[d]=e.includes(o,",")?function(e){var i=e.split(",");return r({r:i[0],g:i[1],b:i[2]}).hexString()}(o):o,n=s["alpha-"+a[d]],e.isUndefined(n)||(l["alpha"+t.stringUtils.capitalize(d)]=n)}),l}function l(i,a,r){return e.map(i,function(i){return function(i,a,r){return i=i.link?e.merge({},i,d.renderLink(i.link,a,r),{linkType:u[i.link.type]}):i,e.assign(i,{description:t.xss.filterHtmlString(i.description),title:t.xss.filterHtmlString(i.title)})}(i,a,r)})}function p(i){return e.map(i,function(i){return e.omit(i,"quality")})}var d=t.linkRenderer,c=i.compMixins,m=a.tpaMixins,u={ExternalLink:"WEBSITE",EmailLink:"EMAIL",PageLink:"PAGE",DocumentLink:"DOCUMENT",AnchorLink:"ANCHOR",DynamicPageLink:"DYNAMIC_PAGE_LINK"};return{mixins:[c.skinBasedComp,m.tpaUrlBuilder,m.tpaCompApi,c.skinInfo],statics:{compSpecificIsDomOnly:function(){return!1}},propTypes:{id:o.Types.Component.id.isRequired,compProp:o.Types.Component.compProp.isRequired,compData:o.Types.Component.compData.isRequired,linkRenderInfo:o.Types.Link.linkRenderInfo.isRequired,rootNavigationInfo:o.Types.Component.rootNavigationInfo.isRequired,navigateToPage:o.Types.navigateToPage.isRequired,compTheme:o.Types.Component.theme.isRequired,style:o.Types.Component.style.isRequired,structure:o.Types.Component.structure.isRequired,sendPostMessage:o.Types.TPA.sendPostMessage.isRequired,santaBase:o.Types.santaBase.isRequired,isDebugMode:o.Types.isDebugMode.isRequired,globalImageQuality:o.Types.globalImageQuality.isRequired,mainPageId:o.Types.mainPageId.isRequired,THEME_DATA:o.Types.Theme.THEME_DATA.isRequired,isPlayingAllowed:o.Types.RenderFlags.isPlayingAllowed.isRequired,tpaComponentsDomAspect:o.Types.SiteAspects.tpaComponentsDomAspect.isRequired,isExperimentOpen:o.Types.isExperimentOpen},messageSent:!1,isAlive:!1,componentInIframeReady:!1,processImageZoom:function(i){var a=i.args[0],r=this.props.compData.items[a],s=this.props.compData.id,o=d.renderImageZoomLink(this.props.linkRenderInfo,this.props.rootNavigationInfo,r,s,void 0,this.props.id);if(this.props.rootNavigationInfo.pageItemId!==r.id){var n=d.getLinkUrlFromLinkProps(o),l=e.defaults({pageItemAdditionalData:o["data-page-item-context"]},t.wixUrlParser.parseUrl(this.props.linkRenderInfo,n));this.props.navigateToPage(l)}},processItemClicked:function(e){var i=e.args[0],a=this.props.compData.items[i],r=this.props.id;this.props.handleAction({type:"comp",name:t.constants.ACTION_TYPES.ITEM_CLICKED,sourceId:r,pageId:this.props.mainPageId},function(e,i,a){return{item:e,timeStamp:t.performance.now(),imageIndex:i,name:a}}(a,i,t.constants.ACTION_TYPES.ITEM_CLICKED))},getInitialState:function(){return this.currStyle=this.props.compTheme,this.lastRenderedStyleData={},{height:this.props.style.height}},setAppIsAlive:function(){this.isAlive=!0,this.askToSendIframeMessage(this.props),this.props.tpaComponentsDomAspect.markComponentIsAlive(this.props.id)},setComponentInIframeReady:function(){this.messageSent=!1,this.componentInIframeReady=!0,this.askToSendIframeMessage(this.props)},askToSendIframeMessage:function(e){var i=e.compProp,t=e.compData;this.debounceIframe&&this.shouldDebounceIframe&&this.shouldDebounceIframe(i)?this.debounceIframe(i,t,e):this.sendIframeMessage(i,t,e)},sendIframeMessage:function(i,t,a){var r=void 0;if(this.isAlive&&this.componentInIframeReady&&!this.messageSent){var s=this.getOverrideParams?this.getOverrideParams(i):i,o=this.getStyleData(a);r=function(i,t,a,r,s){return{params:{props:e.merge({},i,n(a.THEME_DATA,r,s)),quality:a.globalImageQuality,marketingLandingPage:a.isExperimentOpen("sv_marketingLandingPage"),items:l(t,a.linkRenderInfo,a.rootNavigationInfo),mainPageId:a.mainPageId},eventType:"SETTINGS_UPDATED",intent:"addEventListener"}}(s,t.items,a,this.getStyleProps(),o),this.patchMessageProps&&this.patchMessageProps(r.params.props,a),this.props.sendPostMessage(this,r),this.lastRenderedStyleData=o,this.messageSent=!0}},shouldRenderIframe:function(i){var t=p(l(i.compData.items,i.linkRenderInfo,i.rootNavigationInfo)),a=p(this.props.compData.items),r=this.props.globalImageQuality,s=!e.isEqual(r,i.globalImageQuality)||e.every(this.props.compData.items,function(i){return!(e.isEqual(i.quality,r)||e.isEmpty(i.quality)&&e.isEmpty(r))}),o=!e.isEqual(i.compProp,this.props.compProp)||!e.isEqual(a,t)||s||!e.isEqual(this.getStyleData(i),this.lastRenderedStyleData);return o},componentWillReceiveProps:function(i){var t=i.compTheme;e.isEqual(this.currStyle,t)||(this.currStyle=t,this.messageSent=!1),this.shouldRenderIframe(i)&&(this.messageSent=!1),e.isEqual(i.style.height,this.props.style.height)||this.setState({height:i.style.height}),this.askToSendIframeMessage(i),this.isPlayingAllowed!==i.isPlayingAllowed&&(this.isPlayingAllowed=i.isPlayingAllowed,this.sendEditModeMessage(this.isPlayingAllowed?"site":"editor"))},sendEditModeMessage:function(e){if(this.isAlive&&this.componentInIframeReady){var i={params:{editMode:e},eventType:"EDIT_MODE_CHANGE",intent:"addEventListener"};this.props.sendPostMessage(this,i)}},getSkinProperties:function(){var i=this.getHeight?this.getHeight():this.state.height||0;return{"":{style:{height:i,display:"table",minWidth:10,minHeight:10}},iframe:{style:{height:i,width:e.get(this.props,"structure.layout.width","100%"),position:"relative",minHeight:10,minWidth:10},className:"tpa-gallery-"+this.getGalleryType(),"data-src":function(e,i,t,a){return t(s.urlUtils.joinURL(e,"/node_modules/santa-galleries/"+(a?"src/":"target/"))+i+"/"+i+".html",["compId","deviceType","locale","viewMode"])}(this.props.santaBase,this.getGalleryType(),this.buildUrl,this.props.isDebugMode)}}}}}),define("tpaGalleries/galleries/masonry",["lodash","tpaGalleries/galleries/tpaGallery"],function(e,i){"use strict";var t={textColor:"#000",descriptionColor:"#000",textBackgroundColor:"#fff",backgroundMouseoverColor:"#000",alphaBackgroundMouseoverColor:.4};return{displayName:"MasonryGallery",mixins:[i],statics:{useSantaTypes:!0},getGalleryType:function(){return"Masonry"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",backgroundMouseoverColor:"color4",textButtonColor:"color5"}},patchMessageProps:function(i,a){var r=this.getStyleData(a);r.version&&1!==parseInt(r.version,10)||e.assign(i,t)}}}),define("tpaGalleries/galleries/accordion",["tpaGalleries/galleries/tpaGallery"],function(e){"use strict";return{displayName:"AccordionGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Accordion"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",borderColor:"color4"}}}}),define("tpaGalleries/galleries/tpaGalleryCurrentItemMixin",["lodash","core","utils","santaProps"],function(e,i,t,a){"use strict";return{mixins:[i.compMixins.compStateMixin(function(i){return{currentIndex:e.get(i,"currentIndex",0),isPlaying:e.get(i,"isPlaying")}})],propTypes:{id:a.Types.Component.id.isRequired,compProp:a.Types.Component.compProp.isRequired,compData:a.Types.Component.compData.isRequired,sendPostMessage:a.Types.TPA.sendPostMessage.isRequired,mainPageId:a.Types.mainPageId.isRequired},componentDidMount:function(){this._itemChangedCallbacksToInvokeOnce=[]},processItemChanged:function(i){var a=i.args[0],r=this.props.compData.items[a],s=this.props.id;this.props.handleAction({type:"comp",name:t.constants.ACTION_TYPES.IMAGE_CHANGED,sourceId:s,pageId:this.props.mainPageId},function(e,i,a){return{item:e,timeStamp:t.performance.now(),imageIndex:i,name:a}}(r,a,t.constants.ACTION_TYPES.IMAGE_CHANGED)),this.currentIndex!==a&&(this.setState({currentIndex:a}),e.invokeMap(this._itemChangedCallbacksToInvokeOnce,Function.call),this._itemChangedCallbacksToInvokeOnce=[])},getInitialState:function(){return{currentIndex:0,isPlaying:this.props.compProp.autoplay}},componentWillReceiveProps:function(i){var t=this.props.compProp.autoplay;e.isUndefined(t)||t===i.compProp.autoplay||this.setState({isPlaying:i.compProp.autoplay})},sendCommandMessage:function(e){if(this.isAlive&&this.componentInIframeReady){var i={params:{cmd:e},eventType:"SETTINGS_UPDATED",intent:"addEventListener"};this.props.sendPostMessage(this,i)}},next:function(e){this._itemChangedCallbacksToInvokeOnce.push(e),this.sendCommandMessage("next",e)},prev:function(e){this._itemChangedCallbacksToInvokeOnce.push(e),this.sendCommandMessage("previous",e)}}}),define("tpaGalleries/galleries/impress",["tpaGalleries/galleries/tpaGallery","tpaGalleries/galleries/tpaGalleryCurrentItemMixin"],function(e,i){"use strict";return{displayName:"ImpressGallery",mixins:[e,i],statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Impress"},getStyleProps:function(){return{bcgColor1:"color1",bcgColor2:"color2",bcgColor3:"color3",bcgColor4:"color4",bcgColor5:"color5",textColor:"color6",descriptionColor:"color7",textBackgroundColor:"color8"}}}}),define("tpaGalleries/galleries/freestyle",["tpaGalleries/galleries/tpaGallery"],function(e){"use strict";return{displayName:"FreestyleGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Freestyle"},getStyleProps:function(){return{borderColor:"color1"}}}}),define("tpaGalleries/galleries/collage",["tpaGalleries/galleries/tpaGallery"],function(e){"use strict";return{displayName:"CollageGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Collage"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",backgroundMouseoverColor:"color3"}},getOverrideParams:function(e){return e.maxImageSize>e.numOfCells&&(e.maxImageSize=e.numOfCells),e.minImageSize>e.maxImageSize?e.minImageSize=e.maxImageSize:e.maxImageSize<e.minImageSize&&(e.maxImageSize=e.minImageSize),e}}}),define("tpaGalleries/galleries/honeycomb",["lodash","tpaGalleries/galleries/tpaGallery","santaProps"],function(e,i,t){"use strict";return{displayName:"HoneycombGallery",mixins:[i],propTypes:{compProp:t.Types.Component.compProp.isRequired},statics:{useSantaTypes:!0},getGalleryType:function(){return"Honeycomb"},debounceIframe:e.debounce(function(e,i){this.sendIframeMessage(e,i,this.props)},400),shouldDebounceIframe:function(e){return e.numOfColumns!==this.props.compProp.numOfColumns},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",backgroundMouseoverColor:"color4",holesColor:"color5"}}}}),define("tpaGalleries/galleries/stripShowcase",["santaProps","tpaGalleries/galleries/tpaGallery","tpaGalleries/galleries/tpaGalleryCurrentItemMixin"],function(e,i,t){"use strict";return{displayName:"StripShowcaseGallery",mixins:[i,t],propTypes:{screenSize:e.Types.screenSize.isRequired},statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"StripShowcase"},getStyleProps:function(){return{}}}}),define("tpaGalleries/galleries/stripSlideshow",["santaProps","tpaGalleries/galleries/tpaGallery","tpaGalleries/galleries/tpaGalleryCurrentItemMixin"],function(e,i,t){"use strict";return{displayName:"StripSlideshowGallery",propTypes:{screenSize:e.Types.screenSize.isRequired},mixins:[i,t],statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"StripSlideshow"},getStyleProps:function(){return{titleColor:"color1",descriptionColor:"color2",backgroundColor:"color3"}}}}),define("tpaGalleries/galleries/thumbnails",["tpaGalleries/galleries/tpaGallery","tpaGalleries/galleries/tpaGalleryCurrentItemMixin"],function(e,i){"use strict";return{displayName:"ThumbnailsGallery",mixins:[e,i],statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Thumbnails"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3"}}}}),define("tpaGalleries/galleries/tpa3DGallery",["tpaGalleries/galleries/tpaGallery","tpaGalleries/galleries/tpaGalleryCurrentItemMixin"],function(e,i){"use strict";return{displayName:"TPA3DGallery",mixins:[e,i],statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Slicebox"},getStyleProps:function(){return{}}}}),define("tpaGalleries/galleries/tpa3DCarousel",["tpaGalleries/galleries/tpaGallery","tpaGalleries/galleries/tpaGalleryCurrentItemMixin"],function(e,i){"use strict";return{displayName:"TPA3DCarouselGallery",mixins:[e,i],statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getGalleryType:function(){return"Carousel"},getHeight:function(){return.33*this.props.style.width},getStyleProps:function(){return{}}}}),define("tpaGalleries/skins/skins.json",[],function(){"use strict";var e={};return e["wysiwyg.viewer.skins.TPA3DCarouselSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPA3DGallerySkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAAccordionSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPACollageSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAEcomGallerySkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAFreestyleSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAHoneycombSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAImpressSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAMasonrySkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAStripShowcaseSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAStripSlideshowSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e["wysiwyg.viewer.skins.TPAThumbnailsSkin"]={react:[["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0,scrolling:"no",allowTransparency:!0}]],css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},e}),define("tpaGalleries",["tpaGalleries/galleries/masonry","tpaGalleries/galleries/accordion","tpaGalleries/galleries/impress","tpaGalleries/galleries/freestyle","tpaGalleries/galleries/collage","tpaGalleries/galleries/honeycomb","tpaGalleries/galleries/stripShowcase","tpaGalleries/galleries/stripSlideshow","tpaGalleries/galleries/thumbnails","tpaGalleries/galleries/tpa3DGallery","tpaGalleries/galleries/tpa3DCarousel","core","skins","tpaGalleries/skins/skins.json"],function(e,i,t,a,r,s,o,n,l,p,d,c,m,u){"use strict";var g={masonry:e,accordion:i,impress:t,freestyle:a,collage:r,honeycomb:s,stripShowcase:o,stripSlideshow:n,thumbnails:l,tpa3DGallery:p,tpa3DCarousel:d};return c.compRegistrar.register("tpa.viewer.components.Masonry",g.masonry,!0).register("tpa.viewer.components.Accordion",g.accordion,!0).register("tpa.viewer.components.Impress",g.impress,!0).register("tpa.viewer.components.Freestyle",g.freestyle,!0).register("tpa.viewer.components.Collage",g.collage,!0).register("tpa.viewer.components.Honeycomb",g.honeycomb,!0).register("tpa.viewer.components.StripShowcase",g.stripShowcase,!0).register("tpa.viewer.components.StripSlideshow",g.stripSlideshow,!0).register("tpa.viewer.components.Thumbnails",g.thumbnails,!0).register("wysiwyg.viewer.components.tpapps.TPA3DGallery",g.tpa3DGallery,!0).register("wysiwyg.viewer.components.tpapps.TPA3DCarousel",g.tpa3DCarousel,!0),m.skinsMap.addBatch(u),g});
//# sourceMappingURL=tpaGalleries.min.js.map